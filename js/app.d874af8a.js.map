{"version":3,"file":"js/app.d874af8a.js","mappings":"oLAMO,SAASA,EAAYC,GAG1B,IAAMC,GAAmB,SAAS,WAAM,WAASD,EAAiBE,MAAMC,YAAaH,EAAiBE,MAAME,aAApE,IAGlCC,GAAyB,SAAS,WAAM,eAAkBJ,EAAiBC,MAAnC,IACxCI,GAAgB,SAAS,WAAM,eAAiB,IAAIC,KAAQN,EAAiBC,MAAO,MAArD,IAE/BM,EAAkBC,KAAKC,iBAAiBC,kBAAkBC,SAE1DC,EAAyD,IAAjC,IAAIN,MAAOO,oBAA2B,IAOpE,OALAC,QAAQC,IAAI,oBAAqBR,GACjCO,QAAQC,IAAI,2BAA4BH,GACxCE,QAAQC,IAAI,qBAAsBf,EAAiBC,OACnDa,QAAQC,IAAI,4BAA6BX,EAAuBH,OAEzD,CACLD,iBAAgB,EAChBK,cAAa,EACbD,uBAAsB,EACtBG,gBAAe,EACfK,sBAAqB,EAEzB,CCxBO,SAASI,EAAaC,EAAgBC,EAAeC,GAC1DD,EAAQE,KAAKC,GAAKH,EACdA,EAAQ,IACVA,GAAS,EAAIE,KAAKC,IAEpB,IAAIC,EAAKF,KAAKG,MAAMH,KAAKI,IAAIN,GAAQE,KAAKK,IAAIP,GAASE,KAAKI,IAAIL,GAAUC,KAAKM,IAAIT,GAAUG,KAAKK,IAAIN,IAClGG,EAAK,IACPA,GAAM,EAAIF,KAAKC,IAEjB,IAAMM,EAAMP,KAAKQ,KAAKR,KAAKI,IAAIL,GAAUC,KAAKI,IAAIP,GAAUG,KAAKK,IAAIN,GAAUC,KAAKK,IAAIR,GAAUG,KAAKK,IAAIP,IAC3G,MAAO,CAAEI,GAAE,EAAEK,IAAG,EAClB,CAEO,SAASE,EAAUC,GACxB,IAAIC,EAAOD,EAAIE,iBACXC,EAAQH,EAAII,cAAc,EACxBC,EAAML,EAAIM,aACVC,EAAOP,EAAIQ,cACXC,EAAST,EAAIU,gBACbC,EAASX,EAAIY,gBAAkBZ,EAAIa,qBAAuB,IAEnD,GAATV,GAAuB,GAATA,IAEhBF,GAAQ,EACRE,GAAS,IAGX,IAAMW,EAAIxB,KAAKyB,MAAMd,EAAO,KACtBe,EAAI,EAAIF,EAAIxB,KAAKyB,MAAMD,EAAI,GAC3BG,EAAI3B,KAAKyB,MAAM,OAASd,GACxBiB,EAAI5B,KAAKyB,MAAM,SAAWZ,EAAQ,IAGlCgB,EAAKH,EAAIC,EAAIC,EAAI,UAAYb,GAAOE,EAAOE,EAAS,GAAQE,EAAS,MAAW,GACtF,OAAOQ,CACT,CAEO,SAASC,EAAYpB,EAAWqB,GACrC,IAAMC,EAAMD,EAAU,EAAAE,IAEhBC,EAAazB,EAAUC,GAAQ,QAE/ByB,EAAkBD,EAAa,MAEjCE,EAAM,aAAe,gBAAkBF,EAAa,UAAcC,EAAkBA,EAAkBA,EAAkBA,EAAkBA,EAAkB,OAAWH,EAE3K,GAAII,EAAM,EACR,MAAOA,EAAM,IACXA,GAAY,SAGd,MAAOA,EAAM,EACXA,GAAY,IAIhB,OAAOA,CACT,CAEO,SAASC,EAAuBxC,EAAgBC,EAAeC,EAAgBgC,EAAiBrB,GACrG,IAAM4B,EAAKR,EAAYpB,EAAKqB,GAEtBQ,EAAQ3C,EAAaC,EAAQC,EAAOC,GAEpCyC,EAAKD,EAAMrC,GAAK,EAAA+B,IAElB/B,EAAKoC,EAAKE,EAUd,OATItC,EAAK,IACPA,GAAM,KAEJA,EAAK,MACPA,GAAM,KAKD,CAAEuC,MAAO,EAAAC,IAAMxC,EAAIyC,OAAQJ,EAAMhC,IAC1C,CAEO,SAASqC,EAAuBH,EAAeE,EAAgB5C,EAAgBgC,EAAiBrB,GACrG,IAAImC,EAAYf,EAAYpB,EAAKqB,GAAW,EAAAE,IAAMQ,EAC9CI,EAAY,IACdA,GAAa,KAGf,IAAML,EAAK,EAAAE,IAAMG,EACXtC,EAAMoC,EACNG,EAAM/C,EAENgD,EAAS/C,KAAKI,IAAIG,GAAOP,KAAKI,IAAI0C,GAAO9C,KAAKK,IAAIE,GAAOP,KAAKK,IAAIyC,GAAO9C,KAAKK,IAAImC,GAClFQ,EAAWhD,KAAKQ,KAAKuC,GACrBE,GAASjD,KAAKI,IAAIG,GAAOP,KAAKI,IAAI4C,GAAYhD,KAAKI,IAAI0C,KAAS9C,KAAKK,IAAI2C,GAAYhD,KAAKK,IAAIyC,IAChGI,EAAUlD,KAAKmD,KAAKF,GAOxB,OALAC,GAA+B,GAAVlD,KAAKC,IAAsB,EAAVD,KAAKC,IAEvCD,KAAKI,IAAIoC,GAAM,IACjBU,EAAU,EAAIlD,KAAKC,GAAKiD,GAEnB,CAAErD,OAAQmD,EAAUlD,MAAOoD,EAEpC,CAEO,SAASE,EAAoBC,GAClC,IAAMC,GAAiB,EAAI,EAAAZ,IACrBa,EAAuB,EAAID,EAEjC,OAAOtD,KAAKwD,IAAIxD,KAAKyD,KAAK,EAAIzD,KAAK0D,KAAK1D,KAAKC,GAAKoD,GAAcE,IAA0B,EAAG,GAAI,EACnG,CC3FA,IAAMI,EAAW,IAAI,EAAAC,MACrBD,EAASE,UAAU,CAAC,QACpBF,EAASG,mBAAmB,KAAeC,aAC3CJ,EAASK,WAAW,KAAmBC,KACvCN,EAASO,cAAc,IAGhB,IAAMC,EAAc,SAACC,EAA8BC,G,MAClDC,EAAI,EACJC,EAAQ,EAAIvE,KAAKC,GAAKqE,EACtBE,EAAe,IAAI,eACnBC,EAAQ,EAAAC,MAAMC,KAAKN,EAAQI,OACjCA,EAAMjD,EAAIxB,KAAK4E,MAA2B,QAArB,MAAMP,EAAQQ,eAAO,QAAI,GAK9C,IAJA,IAAMC,EAAW,EAAAC,SAASC,aACpBC,EAAeH,EAASI,kBAAoB,EAAAxC,IAC5CyC,EAAcL,EAASM,kBAAoB,EAAA1C,IAC3C2C,EAAM,EAAAC,oBAAoBC,UACvBC,EAAI,EAAGA,EAAIlB,EAAGkB,IAAK,CAC1B,IAAIC,EAA6B,CAC/B,CAAC,EAAGD,EAAIjB,GACR,EAAEvE,KAAKC,GAAK,EAAGuF,EAAIjB,GACnB,CAAC,GAAIiB,EAAI,GAAKjB,IAEhBkB,EAASA,EAAOC,KAAI,SAACC,GACnB,IAAMC,EAAWvD,EAAsB,uBAAC,oBAAGsD,IAAK,IAAER,EAAaF,EAAcI,IAAG,IAChF,OAAO,EAAAQ,YAAYC,UAAU,EAAA7D,IAAM2D,EAASnD,MAAQ,GAAI,EAAAR,IAAM2D,EAASjD,OACzE,IACA6B,EAAauB,uBAAsB,MAAnCvB,GAAY,6BAA2BiB,IAAM,IAAEhB,EAAO,IAAI,QAAa,EAAG,GAAI,IAAC,GAEjF,CACAD,EAAawB,KAAK5B,EAAe,GAAG,EAEtC,EAGa6B,EAAU,SAAC7B,EAA8BC,GACpD,IAAMC,EAAI,EACJC,EAAQ,EAAIvE,KAAKC,GAAKqE,EACtBE,EAAe,IAAI,eACnBC,EAAQ,EAAAC,MAAMC,KAAKN,EAAQI,OAC3BK,EAAW,EAAAC,SAASC,aACpBC,EAAeH,EAASI,kBAAoB,EAAAxC,IAC5CyC,EAAcL,EAASM,kBAAoB,EAAA1C,IAE3CwD,EAAWtD,EAA2C,GAApBe,EAASwC,SAAgB,EAAAzD,IACzBiB,EAASyC,UAAY,EAAA1D,IACrByC,EACAF,EACA,EAAAK,oBAAoBC,WACtDV,EAAUzB,EAAoB8C,EAASrG,QAC7C4E,EAAMjD,EAAIxB,KAAK4E,MAAM,IAAMC,GAC3B,EAAAwB,WAAWC,gBAAgBC,qBAAqC,KAAf,EAAI1B,IAErD,IADA,IAAMQ,EAAM,EAAAC,oBAAoBC,UACvBC,EAAI,EAAGA,EAAIlB,EAAGkB,IAAK,CAC1B,IAAIC,EAA6B,CAC/B,CAAC,EAAGD,EAAIjB,GACR,CAAC,GAAIiB,EAAI,GAAKjB,GACd,CAACvE,KAAKC,GAAK,EAAGuF,EAAIjB,IAEpBkB,EAASA,EAAOC,KAAI,SAACC,GACnB,IAAMC,EAAWvD,EAAsB,uBAAC,oBAAGsD,IAAK,IAAER,EAAaF,EAAcI,IAAG,IAChF,OAAO,EAAAQ,YAAYC,UAAU,EAAA7D,IAAM2D,EAASnD,MAAQ,GAAI,EAAAR,IAAM2D,EAASjD,OACzE,IACA6B,EAAauB,uBAAsB,MAAnCvB,GAAY,6BAA2BiB,IAAM,IAAEhB,EAAO,IAAI,QAAa,EAAG,GAAI,IAAC,GAEjF,CACAD,EAAawB,KAAK5B,EAAe,GAAG,EAEtC,ECpFA,SAASoC,EAAcC,GAErB,IAAIC,EAAO,KAAmBD,GAE9B,OADAC,EAAOA,EAAKC,OAAO,GAAGC,cAAgBF,EAAKG,MAAM,GAC1CH,CACT,CAEA,SAASI,EAAeL,GACtB,IAAMM,EAAQ,IAAI,EAAAnD,MACZ8C,EAAOF,EAAcC,GAI3B,OAHAM,EAAMlD,UAAU,CAAC6C,IACjBK,EAAMjD,mBAAmB,KAAeC,aACxCgD,EAAM/C,WAAWyC,GACVM,CACT,CAEA,IAAMC,EAAS,GACTC,EAAS,GACTC,EAAY,GACZC,EAAY,GACZC,EAAOpH,KAAKL,IAAIuH,GAAa,EAAIA,IACjCG,EAAOrH,KAAKL,IAAIwH,GAAY,EAAIA,IAChCzF,GAAK0F,EAAOC,IAASL,EAASC,GAC9BzF,EAAI4F,EAAO1F,EAAIsF,EAEfM,EAAqB,CACzB,KACC,GACD,GACA,IACA,IACA,IACA,GACA,GACA,KACC,IAGGC,EAAqB,CACzB,IACC,IACD,EACA,EACA,EACA,EACA,EACA,EACA,EACA,GAGF,SAASC,EAAgCpD,EAA8BqC,EAA4BgB,EAAcC,G,QACzGC,EAAOvD,EAAcwD,WAAWD,KAChCE,EAAMF,EAAO,EACbG,EAAM9H,KAAK8H,IAAItG,EAAIE,EAAImG,GACvBE,EAAQ,MAAW,IAAMD,GAAO,EAAIA,GAAQ,GAC5CE,EAAO,EAAA1C,oBAAoB2C,eAAeC,UAAY,GAAK,EAAI,EAC/DC,EAAK,EAAAC,SAASC,OAAO,EAAGL,EAAM,GAE9BjB,EAAQD,EAAeL,GACvB6B,EAAW,EAAAzC,YAAYC,UAAUiB,EAAMZ,SAAUY,EAAMX,WAG7D,OAFAkC,EAASC,GAAuC,QAAlC,EAAAjB,EAAmBb,GAAUsB,SAAK,QAAI,KACpDO,EAASE,GAAuC,QAAlC,EAAAjB,EAAmBd,GAAUsB,SAAK,QAAI,EAC7C,IAAI,EAAAU,OAAOH,EAAUH,EAAIV,EAAMC,EAAaK,EACrD,CAEO,SAASW,EAAiBtE,GAC/B,IAAMsD,EAAc,KACdiB,EAAQ,IAAI,EAAAC,YAAYlB,GACxBmB,EAASC,OAAOC,KAAK,MAAoBC,QAAO,SAAAC,GAAO,OAACC,MAAMC,OAAOF,GAAd,IAQ7D,OAPAJ,EAAOO,SAAQ,SAAA3C,GACb,GAAI0C,OAAO1C,IAAW,KAAmB4C,KAAM,CAC7C,IAAM3C,EAAOF,EAAcC,GACrBgB,EAAOD,EAAgCpD,EAAeqC,EAAQC,EAAMgB,GAC1EiB,EAAMW,IAAI7B,EACZ,CACF,IACOkB,CACT,CCnDO,SAASY,IACd,EAAAC,MAAMC,gBAAkB,IAC1B,CAEO,SAASC,IACd,GAA6B,MAAzB,EAAAF,MAAMC,gBAAyB,CACjC,IAAM/B,EAAc,GACpB,EAAA8B,MAAMC,gBAAkB,IAAI,EAAAb,YAAYlB,GACxC,IAAMM,EAAO,EAAA1C,oBAAoB2C,eAAeC,UAAY,GAAK,EAAI,EAC/DyB,EAAM,IAAO3B,EACb,EAAK,EAAAI,SAASC,OAAO,EAAGL,EAAM,GAC9B4B,EAAa,CACjB,CAAC,CAAC,EAAGD,GAAM,GAAI,KACf,CAAC,EAAE3B,EAAM2B,EAAK,GAAI,KAClB,CAAC,CAAC,EAAGA,EAAK,GAAI,KACd,CAAC,CAAC3B,EAAM2B,EAAM,GAAI,MAEpBC,EAAWR,SAAQ,SAAC,G,IAAA,gBAACS,EAAC,KAAEpC,EAAI,KAC1B,EAAA+B,MAAMC,gBAAgBH,IAAI,IAAI,EAAAb,OAAO,EAAAL,SAASC,OAAM,MAAf,EAAAD,UAAQ,oBAAWyB,IAAI,MAAIpC,EAAM,GAAI,OAC5E,IACAqC,EAAgB,EAAAN,MAAMC,gBACxB,CACF,CAEA,IAAMM,EAAc,WAClB,IAAMC,EAAQ,IAAI,EAAAC,WACdC,EAASC,OAAO7B,SAAS4B,OACzBA,EAAOE,SAAS,OAClBF,EAASA,EAAOrD,MAAM,EAAGqD,EAAOG,OAAS,IAE3C,IAAMC,EAAW,UAAGJ,EAAM,gBACpBK,EAAS,UAAGL,EAAM,gBAMxB,OALAF,EAAMQ,SAAW,EAAAC,QAAQC,QAAQJ,GACjCN,EAAMW,SAAW,IAAI,EAAAC,QAAQL,GAC7BP,EAAMW,SAASE,cAAgB,EAAAZ,WAAWa,UAAUC,eAAeC,KAAKhB,GACxEA,EAAMW,SAASM,OAERjB,CACT,CAdoB,GAgBb,SAASF,EAAgBnB,GAC9BA,EAAMuC,YAAcnB,EACpBpB,EAAMwC,cACR,CAEO,SAASC,EAAYhH,EAA8BiH,GACzB,MAA3B,EAAAC,QAAQC,iBACR,EAAAD,QAAQE,sBAEV,IAAIC,EAAQ,EAAAH,QAAQI,sBAAsB,EAAAJ,QAAQK,iBAAiB,GAAGC,GAAI,EAAAN,QAAQK,iBAAiB,GAAGpL,IAAK,EAAA+K,QAAQK,iBAAiB,GAAGC,GAAI,EAAAN,QAAQK,iBAAiB,GAAGpL,KACnKsL,EAAQ,EAAAP,QAAQK,iBAAiB,GAAGC,GAAK,EAAAN,QAAQK,iBAAiB,GAAGC,GACrE,EAAAN,QAAQK,iBAAiB,GAAGC,GAAK,EAAAN,QAAQK,iBAAiB,GAAGC,KAC/DC,GAAS,IAEM,EAAAP,QAAQQ,YAAYL,EAAO,EAAAH,QAAQK,iBAAiB,GAAGI,SAAU,EAAAT,QAAQK,iBAAiB,GAAGI,UAK9G,IAAIC,EAAqF,GAA5EhM,KAAKiM,IAAI,EAAAX,QAAQK,iBAAiB,GAAGC,GAAK,EAAAN,QAAQK,iBAAiB,GAAGC,IAAY5L,KAAKK,IAAI,EAAAwF,YAAYqG,iBAAiB,EAAAZ,QAAQK,iBAAiB,GAAGpL,MAC7J4L,EAAQnM,KAAKiM,IAAI,EAAAX,QAAQK,iBAAiB,GAAGpL,IAAM,EAAA+K,QAAQK,iBAAiB,GAAGpL,KAC/E6L,EAAcpM,KAAKqM,KAAKL,EAAQA,EAAQG,EAAQA,GAEhDG,EAAgB,EAChBC,EAAc,EAAAjB,QAAQkB,cAAc,GAAK,EAAIJ,EAOjD,IAAK,IAAMnD,KALPsD,EAAc,EAAAjB,QAAQkB,cAAc,GAAK,IAE3CF,EAAgBtM,KAAKwD,IAAI,GAAI+I,EAAc,EAAAjB,QAAQkB,cAAc,GAAK,GAAM,MAC5E,EAAAlB,QAAQmB,YAAYrI,EAAe,GAAIkI,IAEvB,EAAAhB,QAAQoB,iBAAkB,CAE1C,IAAIC,EAAW,EAAArB,QAAQoB,iBAAiBzD,GACpC0D,GAAY,GACd,EAAArB,QAAQmB,YAAYrI,EAAeuI,EAAU,EAEjD,CACA,OAAO,CACX,CAEO,SAASC,EAAeC,EACAC,EACAC,G,eAFA,IAAAF,IAAAA,GAAA,QACA,IAAAC,IAAAA,GAAA,QACA,IAAAC,IAAAA,GAAA,GACsB,MAA/CC,KAAK5I,cAAc6I,yBACrBD,KAAKE,WAAaF,KAAK5I,cAAc6I,yBAAyBE,kBAE9DH,KAAKE,WAAa,EAGpB,IAAIE,GAAa,EAYjB,GAXIJ,KAAKK,OAAOC,QAAUN,KAAKK,OAAOE,WAAWC,cAC/CR,KAAKK,OAAOC,MAAQN,KAAKK,OAAOE,WAAWC,YAC3CJ,GAAa,GAEXJ,KAAKK,OAAOI,SAAWT,KAAKK,OAAOE,WAAWG,eAChDV,KAAKK,OAAOI,OAAST,KAAKK,OAAOE,WAAWG,aAC5CN,GAAa,GAEXA,GAA+B,MAAjBJ,KAAKW,UACrBX,KAAKW,SAASC,YAEZZ,KAAKK,OAAOC,MAAQ,GAAKN,KAAKK,OAAOI,OAAS,GAAlD,CAaA,GAVIL,IACFJ,KAAKa,YAAc,MAErB,EAAAC,KAAKC,iBAAmB,EAAAD,KAAKE,aAC7B,EAAAC,eAAeX,MAAQN,KAAK5I,cAAckJ,MAAQN,KAAKK,OAAOC,MAC9D,EAAAW,eAAeR,OAAST,KAAK5I,cAAcqJ,OAAST,KAAKK,OAAOI,OAChE,EAAAK,KAAKI,YAAc,EACnB,EAAAJ,KAAKK,aAAe,EACpB,EAAAL,KAAKE,aAAe,EACpB,EAAA1I,oBAAoB8I,YAAY,IAAIlP,MACX,MAArB8N,KAAKqB,cAGP,GAFA,EAAA/I,oBAAoBgJ,QAAQtB,KAAKqB,aAAaE,uBAC9C,EAAAjD,QAAQkD,sBAAsBxB,KAAKyB,uBACV,MAArBzB,KAAKqB,aAAsB,CAC7B,IAAMK,EAAS1B,KAAKqB,aAAaM,sBAGjC,GAFA3B,KAAK5I,cAAcwK,aAAeF,EAAOG,OACzC7B,KAAK5I,cAAcwD,WAAa8G,EAAOG,OACnC7B,KAAK5I,cAAc0K,OAAS,EAAA/J,SAASC,aAAa+J,mBAAoB,CACxE,IAAMC,EAAS,EAAAnJ,YAAYoJ,gBAAkC,GAAlBP,EAAOvI,SAAeuI,EAAOtI,WACxE4G,KAAK5I,cAAc8K,UAAYlC,KAAK5I,cAAcuF,IAAMqF,EAAO,GAC/DhC,KAAK5I,cAAc+K,SAAWnC,KAAK5I,cAAcgL,GAAKJ,EAAO,EAC/D,MACK,GAAIhC,KAAK5I,cAAc0K,OAAS,EAAA/J,SAASC,aAAaqK,uBAAwB,CACjF,IAAMC,EAAe,EAAAzJ,YAAY0J,oBAAoB,EAAA1J,YAAY2J,UAAUd,EAAOvI,SAAUuI,EAAOtI,WAAY,EAAAd,oBAAoB2C,eAAgB,EAAA3C,oBAAoBC,WACvKyH,KAAK5I,cAAc8K,UAAYlC,KAAK5I,cAAcuF,IAAM2F,EAAaG,UACrEzC,KAAK5I,cAAc+K,SAAWnC,KAAK5I,cAAcgL,GAAKE,EAAaI,QACrE,CACI1C,KAAKqB,aAAasB,iBACpB,EAAAtJ,WAAWC,gBAAgBsJ,aAAa5C,KAAKqB,aAAaM,sBAAsBxI,SAAU6G,KAAKqB,aAAaM,sBAAsBvI,UAAW,EAAAC,WAAWwJ,UAAUzL,cAAcwD,WAAWD,MAC3LqF,KAAK8C,WAAW,MAChB9C,KAAK+C,sBAET,OAGA,EAAAzK,oBAAoB0K,cACpB,EAAA1E,QAAQkD,sBAAsBxB,KAAKyB,uBACnCzB,KAAKiD,wBAMP,GAJAjD,KAAK5I,cAAc8L,QAEnBlD,KAAK5I,cAAc+L,qBAAqBnD,KAAK5I,cAAckJ,MAAON,KAAK5I,cAAcqJ,QACrFT,KAAK5I,cAAcgM,aAAapD,KAAK5I,cAAc6I,yBAA0B,KAC1B,MAA/CD,KAAK5I,cAAciM,yBACrB,GAAIrD,KAAK5I,cAAciM,yBAAyBlD,oBAAsBH,KAAK5I,cAAc6I,yBAAyBE,kBAChHH,KAAK5I,cAAckM,uBAAuB,WAG1C,GAA8C,MAA1CtD,KAAK5I,cAAcwD,WAAW/C,SAA4C,MAAzBmI,KAAK5I,cAAcmM,GAAY,CAC9EvD,KAAKwD,kBAAkBlD,QAAUN,KAAK5I,cAAckJ,OAASN,KAAKwD,kBAAkB/C,SAAWT,KAAK5I,cAAcqJ,SACpHT,KAAKwD,kBAAkBlD,MAAQN,KAAK5I,cAAckJ,MAClDN,KAAKwD,kBAAkB/C,OAAST,KAAK5I,cAAcqJ,QAErD,IAAIgD,EAAazD,KAAK5I,cAAcsM,OACpC1D,KAAK2D,UAAUC,UAAU,EAAG,EAAG5D,KAAK5I,cAAckJ,MAAON,KAAK5I,cAAcqJ,QAC5ET,KAAK5I,cAAcsM,OAAS1D,KAAK2D,UACjC3D,KAAK5I,cAAcgM,aAAapD,KAAK5I,cAAciM,yBAA0B,KAC7ErD,KAAK5I,cAAcsM,OAASD,EAC5BzD,KAAK5I,cAAcsM,OAAOG,OAC1B7D,KAAK5I,cAAcsM,OAAOI,YAAc9D,KAAK5I,cAAcwD,WAAW/C,QAAU,IAChFmI,KAAK5I,cAAcsM,OAAOK,UAAU/D,KAAKwD,kBAAmB,EAAG,GAC/DxD,KAAK5I,cAAcsM,OAAOM,SAC5B,MAEEhE,KAAK5I,cAAcgM,aAAapD,KAAK5I,cAAciM,yBAA0BrD,KAAK5I,cAAcwD,WAAW/C,SAIjH,GAAyB,MAArBmI,KAAKiE,aACPjE,KAAKiE,aAAaC,OAAOlE,KAAK5I,mBAE3B,CACC0I,GACF7G,EAAQ+G,KAAK5I,cAAe,CAAES,QAAS,IAAMJ,MAAO,YAEtD,EAAA0M,WAAWC,UAAUpE,KAAK5I,e,IAC1B,IAAmB,eAAA4I,KAAKqE,cAAY,8BAAE,CAAjC,IAAMC,EAAI,QACbA,EAAKtL,KAAKgH,KAAK5I,cACjB,C,kGAEA,GADA,EAAA+M,WAAWI,UAAUvE,KAAK5I,eACrBlF,KAAKmG,MAAQ2H,KAAKwE,eAAkB,IAAK,CAC5C,IAAIC,EAAYzE,KAAK0E,6BAA6B1E,KAAK2E,gBAAgBnJ,EAAGwE,KAAK2E,gBAAgBpJ,GAC/FyE,KAAK4E,iBAAiBH,EAAUjJ,EAAGiJ,EAAUlJ,EAAGyE,KAAK2E,gBAAgBnJ,EAAGwE,KAAK2E,gBAAgBpJ,GAC7FyE,KAAKwE,eAAiB,IAAItS,KAAK,KAAM,EAAG,EAC1C,CACI8N,KAAK6E,YACP7E,KAAK8E,eAAe9E,KAAK5I,cAE7B,CAEA,IAAK,IAAM2N,KAAY/E,KAAK5I,cAAc4N,2BACpCD,EAASE,qBAAqBC,8BAA8BC,SAAWJ,EAASE,qBAAqBC,8BAA8BE,cAAgBL,EAASE,qBAAqBC,8BAA8BG,eACjNrF,KAAK5I,cAAcgM,aAAa2B,EAAU,KAG9C/E,KAAKsF,cAAgB,EAAAC,eAAeC,YAAYC,0BAA0BzF,KAAK5I,cAAcwD,WAAWzB,SAAU6G,KAAK5I,cAAcwD,WAAWxB,WAChJ4G,KAAK0F,mBACL,EAAApH,QAAQF,YAAY4B,KAAK5I,cAAe,GAEpC2I,IACFC,KAAK2F,oBAAsBjK,EAAiBsE,KAAK5I,eACjD0F,EAAgBkD,KAAK2F,qBACrB3F,KAAK2F,oBAAoBC,cAAqC,QAArB,IAAApJ,MAAMC,uBAAe,eAAEmJ,cAChE5F,KAAK2F,oBAAoB3M,KAAKgH,KAAK5I,cAAe,EAAG,EAAAM,MAAMmO,SAAS,IAAK,IAAK,IAAK,OAGjFhG,GACF1I,EAAY6I,KAAK5I,cAAe,CAAES,QAAS,IAAMJ,MAAO,YAG1D,IAAMqO,EAAY9F,KAAK5I,cAAc2O,YAC/BC,EAAWhG,KAAK5I,cAAc6O,WAC9BC,EAAWlG,KAAK5I,cAAc+O,iBAChC,EAAApO,SAASqO,cAAcC,sBACzBrG,KAAKsG,gBAAgBtG,KAAK5I,eAG5B,IAAMmP,GAAkB,EAAAC,UAAUC,iBAClCzG,KAAK5I,cAAcsP,wBACnB1G,KAAK2G,aACL3G,KAAK4G,cACL,EAAAJ,UAAUK,gBACV,EAAAL,UAAUM,aAAa9G,KAAK5I,eAC5B,EAAA0J,KAAKiG,0BACA,EAAAC,WAAWC,eACdjH,KAAKkH,oBAAmB,GAE1BlH,KAAK5I,cAAc+P,UAAUrB,GAC7B9F,KAAK5I,cAAcgQ,SAASpB,GAC5BhG,KAAK5I,cAAciQ,eAAenB,GAClC,IAAM7N,EAAMnG,KAAKmG,MACXiP,EAAKjP,EAAM2H,KAAKuH,YAClBD,EAAK,MACPtH,KAAKuH,YAAclP,EACnB2H,KAAK4G,YAAc,EACnB,EAAA3F,eAAeuG,kBAAoB,EACnC,EAAAvG,eAAewG,gBAAkB,GAE/BzH,KAAK0H,iBACsB,MAAxB1H,KAAK2H,iBAA8B3H,KAAK2H,gBAAgBC,eAAgBrB,IAC3EvG,KAAK6H,qBAAqB7H,KAAK8H,gBAAiB9H,KAAK2H,gBAAgBrH,MAAON,KAAK2H,gBAAgBlH,OAAQT,KAAK2H,gBAAgBI,QAC9H,EAAAzP,oBAAoB0P,aAElB,EAAA1P,oBAAoB2P,oBACtB,EAAA3P,oBAAoB4P,cAAe,EACnC,EAAA5P,oBAAoB6P,iBAAkB,EACtCnI,KAAK0H,gBAAiB,GAnJ1B,CAsJF,CAEO,SAASU,EAAahR,EAA8BS,EAAiBwQ,EAAkBC,QAAA,IAAAA,IAAAA,GAAA,GAC1F,IACI3U,EAAO,EAAA2E,oBAAoBC,UAAU3E,iBACzC,GAAuC,MAAnC,EAAA4I,MAAM+L,2BAAqC5U,IAAS,EAAA6I,MAAMgM,cAAe,CAClC,MAAnC,EAAAhM,MAAM+L,4BACN,EAAA/L,MAAM+L,0BAA0BrF,QAChC,EAAA1G,MAAM+L,0BAA4B,MAEtC,EAAA/L,MAAMgM,cAAgB7U,EACtB,IAAI8U,EAAY,EAAA5P,YAAY6P,wBAAwB,EAAApQ,oBAAoBqQ,YACpEC,EAAM,EAAAC,SAASC,YAAaL,EAAY,KAAiB,EAAVzV,KAAKC,KACpD8V,EAAc,OACd,EAAAC,GAAGC,OAAOtV,GAAM,IAChB,EAAA6I,MAAM0M,WAAW,GAAK,GACtBH,EAAc,MAEd,EAAAvM,MAAM0M,WAAW,GAAK,GACtBH,EAAc,KAGlB,EAAAvM,MAAM2M,eAAiBJ,EACvB,IAAIK,EAAQ,EAAA9Q,oBAAoB+Q,YAAY,IAAInX,KAAKyB,EAAM,EAAG,EAAG,GAAI,EAAG,IAEpEiB,EAAI,EACJ0U,EAAQ,EACRC,EAAS,EACb,EAAA/M,MAAM+L,0BAA4B,IAAI,EAAAiB,eACtC,EAAAhN,MAAM+L,0BAA0BkB,mBAAkB,GAClD,IAAK,IAAIC,EAAI,EAAGA,EAAI,GAAIA,IAAK,CAEzB,IADA,IAAIC,EAAgB,EAAAnN,MAAM0M,WAAWQ,GAC5BlR,EAAI,EAAGA,EAAImR,EAAenR,IAAK,CACpC,IAAIoR,EAAW,EAAAtL,QAAQuL,oBAAoB,MAAOT,GAC9CU,EAAc,EAAAC,GAAGC,MAAMJ,EAAShL,GAAIgL,EAASrW,IAAKkV,GACtD7T,EAAIkV,EAAYtO,EACP,GAALhD,GAAe,GAALkR,IACZH,EAAS3U,GAEX,IAAI0L,EAAQ,KACP9H,IACD8H,EAAQ,KAEZ,IAAI2J,EAAKrV,EACT,EAAA4H,MAAM+L,0BAA0B2B,QAAQ,EAAA9O,SAAS+O,qBAAqB,EAAA/O,SAASC,OAAOrI,KAAKK,IAAK4W,EAAKjX,KAAKC,GAAK,EAAK,KAAMqN,EAAOtN,KAAKI,IAAK6W,EAAKjX,KAAKC,GAAK,EAAK,MAAO2V,GAAM,EAAAxN,SAAS+O,qBAAqB,EAAA/O,SAASC,OAAOrI,KAAKK,IAAK4W,EAAKjX,KAAKC,GAAK,EAAK,MAAOqN,EAAOtN,KAAKI,IAAK6W,EAAKjX,KAAKC,GAAK,EAAK,MAAO2V,KACvSN,GAAqB,GAAL9P,GAAe,GAALkR,GAC5B,EAAAlN,MAAM+L,0BAA0B2B,QAAQ,EAAA9O,SAAS+O,qBAAqB,EAAA/O,SAASC,OAAOrI,KAAKK,IAAK4W,EAAKjX,KAAKC,GAAK,EAAK,KAAM,EAAGD,KAAKI,IAAK6W,EAAKjX,KAAKC,GAAK,EAAK,MAAO2V,GAAM,EAAAxN,SAAS+O,qBAAqB,EAAA/O,SAASC,OAAOrI,KAAKK,IAAKiW,EAAQtW,KAAKC,GAAK,EAAK,KAAM,EAAGD,KAAKI,IAAKkW,EAAQtW,KAAKC,GAAK,EAAK,MAAO2V,IAG1SQ,GAAS,EACTE,EAAQ1U,CACZ,CACAA,GAAK,EAAA4H,MAAM0M,WAAWQ,EAC1B,CACIpB,GACF,EAAA9L,MAAM+L,0BAA0B2B,QAAQ,EAAA9O,SAAS+O,qBAAqB,EAAA/O,SAASC,OAAOrI,KAAKK,IAAKkW,EAASvW,KAAKC,GAAK,EAAK,KAAM,EAAGD,KAAKI,IAAKmW,EAASvW,KAAKC,GAAK,EAAK,MAAO2V,GAAM,EAAAxN,SAAS+O,qBAAqB,EAAA/O,SAASC,OAAOrI,KAAKK,IAAK4W,EAAKjX,KAAKC,GAAK,EAAK,KAAM,EAAGD,KAAKI,IAAK6W,EAAKjX,KAAKC,GAAK,EAAK,MAAO2V,GAEhT,CAEA,OADA,EAAApM,MAAM+L,0BAA0B6B,UAAUhT,EAAeS,EAASwQ,IAC3D,CACX,CAEO,SAASgC,IACR,EAAAtS,SAASC,aAAasS,kCAAoCtK,KAAKuK,kBAC/D,EAAAhF,eAAeiF,YAAYxK,KAAK5I,eAEhC,EAAAW,SAASC,aAAayS,iCACkB,MAApC,EAAApR,WAAWqR,wBACX,EAAArR,WAAWqR,sBAAwB,EAAAnF,eAAelK,OAC9C,iBACAsP,WAAW9H,UAAU+H,eAAe,gBACpC,GACA,GACA,IAGR,EAAAvR,WAAWqR,sBAAsB1R,KAAKgH,KAAK5I,eAAe,EAAO,OAAO,IAExE,EAAAW,SAASC,aAAa6S,yBACtB,EAAArO,MAAMsO,iBAAiB9K,KAAK5I,cAAe,EAAG,EAAAW,SAASC,aAAa+S,yBAChE,EAAAhT,SAASC,aAAagT,4BACtB,EAAAxO,MAAMyO,qBAAqBjL,KAAK5I,cAAe,EAAG,EAAAW,SAASC,aAAa+S,0BAG5E,EAAAhT,SAASC,aAAakT,yBACtB,EAAA1O,MAAM2O,iBAAiBnL,KAAK5I,cAAe,EAAG,EAAAW,SAASC,aAAaoT,yBAChE,EAAArT,SAASC,aAAaqT,4BACtB,EAAA7O,MAAM8O,qBAAqBtL,KAAK5I,cAAe,EAAG,EAAAW,SAASC,aAAaoT,0BAG5E,EAAArT,SAASC,aAAauT,qBACtB,EAAA/O,MAAMgP,cAAcxL,KAAK5I,cAAe,EAAG,EAAAW,SAASC,aAAayT,sBAEjE,EAAA1T,SAASC,aAAa0T,yBACtB,EAAAlP,MAAMmP,kBAAkB3L,KAAK5I,cAAe,EAAG,EAAAW,SAASC,aAAayT,sBAErE,EAAA1T,SAASC,aAAa4T,2BACtB,EAAApP,MAAMqP,oBAAoB7L,KAAK5I,cAAe,EAAG,EAAAW,SAASC,aAAa8T,4BAEvE,EAAA/T,SAASC,aAAa+T,qBACtB,EAAAvP,MAAM4L,aAAapI,KAAK5I,cAAe,EAAG,EAAAW,SAASC,aAAagU,qBAC5D,EAAAjU,SAASC,aAAaiU,gCACtB,EAAAzP,MAAM0P,iBAAiBlM,KAAK5I,cAAe,EAAG,EAAAW,SAASC,aAAagU,sBAGxE,EAAAjU,SAASC,aAAamU,iBACtB,EAAA3P,MAAM4P,mBAAmBpM,KAAK5I,cAAe,EAAG,EAAAW,SAASC,aAAaqU,2BAClE,EAAAtU,SAASC,aAAasU,8BACtB,EAAA9P,MAAM+P,uBAAuBvM,KAAK5I,cAAe,EAAG,EAAAW,SAASC,aAAaqU,4BAG9E,EAAAtU,SAASC,aAAawU,mCACoB,MAAtC,EAAAnT,WAAWoT,0BACX,EAAApT,WAAWoT,wBAA0B,EAAAlH,eAAelK,OAChD,iBACAsP,WAAW9H,UAAU+H,eAAe,uBACpC,GACA,GACA,IAGR,EAAAvR,WAAWoT,wBAAwBzT,KAAKgH,KAAK5I,cAAe,EAAAW,SAASC,aAAa0U,iCAAkC1M,KAAKsF,eAAe,IAExI,EAAAvN,SAASC,aAAa2U,+BACtB,EAAApH,eAAeqH,uBAAuB5M,KAAK5I,cAAe,EAAGyV,OAAOC,aAE5E,C,cCrZMC,EAAkB,MAClBC,EAAuB,IAAOD,EAE9BE,EAAkB,GAClBC,EAA4B,IAAOD,EAElC,SAASE,GAAOC,EAAuB9R,EAA4B+R,EAAqCC,GAA/G,WAEEF,EAAMG,eAAeC,MAAK,sD,oDAI1B,IAAMC,GAAe,QAAIJ,GACnBrb,GAAyB,QAAIsb,GAE7BI,GAAc,SAAsB,WACxC,MAAO,CACLvV,YAAamD,EAASzJ,MAAMC,YAAc,EAAA4D,IAC1CuC,aAAcqD,EAASzJ,MAAME,aAAe,EAAA2D,IAEhD,IAEMiB,EAAW,IAAI,EAAAC,MACrBD,EAASE,UAAU,CAAC,QACpBF,EAASG,mBAAmB,KAAeC,aAC3CJ,EAASK,WAAW,KAAmBC,KACvCN,EAASO,cAAc,IAEvB,IAAMyW,GAAc,SAAwB,WAC1C,MAAO,CACLlY,MAA2B,GAApBkB,EAASwC,SAAgB,EAAAzD,IAChCC,OAAQgB,EAASyC,UAAY,EAAA1D,IAEjC,IAEA,SAASkY,EAAqBC,GAC5B,IAAM3U,EAAWtD,EAAuB+X,EAAY9b,MAAM4D,MAAOkY,EAAY9b,MAAM8D,OAAQ+X,EAAY7b,MAAMsG,YAAauV,EAAY7b,MAAMoG,aAAc4V,GAC1J,OAAO3U,CACT,CAGA,SAAS4U,EAAiBC,GAIxB,IAAMC,EAAUP,EAAa5b,MAAS4b,EAAa5b,MAAQmb,EAAwBhb,EAAuBH,MAA+B,GAAvBmb,EAC5GiB,EAAUD,EAAiC,GAAvBhB,EAEtBa,EAAOG,EACPE,EAASN,EAAqB,IAAI1b,KAAK2b,IAAOhb,OAElD,MAAQqb,EAASH,EAAS,EAAArY,KAASmY,EAAOI,EACxCJ,GAAQX,EACRgB,EAASN,EAAqB,IAAI1b,KAAK2b,IAAOhb,OAEhD,IAAMsb,EAASN,GAAQI,EAAU,KAAOJ,EACxC,MAAQK,EAASH,EAAS,EAAArY,KAASmY,EAAOI,EACxCJ,GAAQX,EACRgB,EAASN,EAAqB,IAAI1b,KAAK2b,IAAOhb,OAEhD,IAAMub,EAAUP,GAAQI,EAAU,KAAOJ,EAEzC,MAAO,CACL,OAAsB,OAAXM,GAA+B,OAAZC,EAAoBpb,KAAKwD,IAAI2X,EAAQC,GAAWD,EAC9E,QAAuB,OAAXA,GAA+B,OAAZC,EAAoBpb,KAAKyD,IAAI0X,EAAQC,GAAWA,EAEnF,CAGA,MAAO,CAAEN,iBAAgB,EAAEF,qBAAoB,EAAEjX,SAAQ,EAAEgX,YAAW,EACxE,C,mNC7EMU,GAAa,CAAEC,GAAI,gBACnBC,GAAa,CACjBD,GAAI,iCACJE,MAAO,SAEHC,GAAa,CAAEH,GAAI,uBACnBI,GAAa,CACjBzS,IAAK,EACLqS,GAAI,wBAEAK,GAAa,CAAEL,GAAI,6BACnBM,GAAa,CAAEJ,MAAO,cACtBK,GAAa,CAAEC,MAAO,CAAC,MAAQ,YAC/BC,GAAa,CAAED,MAAO,CAAC,MAAQ,YAC/BE,GAAa,CACjBR,MAAO,QACPF,GAAI,iBAEAW,GAAc,CAAEX,GAAI,eACpBY,GAAc,CAAEZ,GAAI,gBACpBa,GAAc,CAAEb,GAAI,kBACpBc,GAAc,CAAEd,GAAI,qBACpBe,GAAc,CAAEf,GAAI,wBACpBgB,GAAc,CAAEhB,GAAI,iBACpBiB,GAAc,CAClBjB,GAAI,WACJE,MAAO,wBAEHgB,GAAc,CAAElB,GAAI,oBACpBmB,GAAc,CAClBxT,IAAK,EACLqS,GAAI,sBAEAoB,GAAc,CAAEpB,GAAI,kBACpBqB,GAAc,CAAErB,GAAI,eACpBsB,GAAc,CAAEtB,GAAI,gBACpBuB,GAAc,CAClB5T,IAAK,EACLqS,GAAI,cAEAwB,GAAc,CAAEtB,MAAO,iBCkhBvBuB,GAAW,oBACXC,GAAc,sBACdC,GAAyB,qBD1f/B,UAA4B,QAAiB,CAC3CC,OAAQ,eACRC,MAAO,CACLC,aAAc,CAAEC,QAAS,kBAE3BC,MAAK,SAACC,GAAN,I,MAAA,OCifIC,EAAiB,UAAG,EAAAC,aAAY,uBAKhCC,EAAYvT,OAAOwT,aAAaC,QAAQb,IACxCc,EAAe1T,OAAOwT,aAAaC,QAAQZ,IAC3Cc,EAA0F,UAApB,QAAnD,EAAA3T,OAAOwT,aAAaC,QAAQX,WAAuB,eAAEc,eACxEC,EAA6B,OAAdN,EACfO,EAAgB,OAATP,QAAS,IAATA,EAAAA,GAAa,EAAAQ,EAAA,KACrBF,GACH7T,OAAOwT,aAAaQ,QAAQpB,GAAUkB,GAExC,IAAIG,EAAa,EACbC,EAAqB,EACrBC,GAAe,EACfC,GAAc,EACdC,GAAc,EACdC,EAAoBvf,KAAKmG,MACzBqZ,EAAqB,KACrBC,EAA6B,KAE7BC,EAAkD,GAClDC,EAA+C,GAO7CzE,GAAQ,IAAA0E,gBAEd,IAAAC,wBAAuB3E,GAEvB,IAAM4E,GAAc,IAAAC,uBACd,GAA6B,UAA3BC,EAAS,YAAEC,EAAO,UAAEC,EAAE,KAMxBC,EAA+F,WAApB,QAAzD,MAAIC,gBAAgBnV,OAAO7B,SAASiX,QAAQC,IAAI,iBAAS,eAAEzB,eAC7E0B,IAAWJ,GAAmBvB,GAC9B4B,GAAmB,QAAID,GACvBE,GAAsB,QAA+B,IACrDC,GAAQ,QAAsB,MAC9BC,GAAe,SAAI,GACnBC,IAAc,SAAI,GAClBC,IAAc,QAAI,WAClBC,IAAe,QAAI,WACnBC,IAAc,QAAI,WAClBC,IAAM,QAAI,GACVrT,IAAc,SAAI,GAClBsT,IAAgB,SAAI,GACpBC,IAAe,SAAI,GACnBC,IAAuB,SAAI,GAC3BC,IAAU,SAAI,GACdC,IAAe,QAAIpB,EAAQtgB,OAC3B2hB,IAAqB,SAAI,GACzBzT,IAAmB,SAAI,GACvB0T,IAAU,SAAI,GACdC,IAAoB,SAAI,GACxBC,IAAiB,SAAI,GACrBC,IAAmB,QAAI9C,GAEvB+C,GAAiC,kBAAjBhD,EAA6C,SAAjBA,EAA0B,KACtEiD,IAAiB,QAAID,IAErBE,GAAmB,CAEvBC,aAAqD,QAAvC,sGAAuC,QAAI,IAGrDriB,IAAmB,QAAiB,CACxCI,cAAe,QACfD,YAAa,UAETmiB,IAAuB,QAAI,IACjCC,KAgBA,IAAMC,IAAqB,QAAmB,MACxC,GAAmEziB,EAAYC,IAA7EK,GAAsB,0BAAEC,GAAa,iBAAEO,GAAqB,yBAE9Dib,IAAe,QAAIvb,KAAKmG,OAExB,GAA6C8U,GAAOC,EAAOzb,GAAkB8b,GAAczb,IAAzF8b,GAAgB,oBAAEF,GAAoB,wBAGxCwG,IAAoB,QAAS,CAIjC5B,IAAK,WACH,IAAM3E,EAAOJ,GAAa5b,MACpBwiB,EAAUxG,EAAOrb,GACvB,OAAO,IAAIN,KAAKmiB,EAAUriB,GAAuBH,MACnD,EACAyiB,IAAK,SAACziB,GAEJ,IAAMgc,EAAOhc,EAAM0iB,UAEbC,EAAU3G,EAAO7b,GAAuBH,MAAQW,GACtDib,GAAa5b,MAAQ,IAAIK,KAAKsiB,GAASD,SACzC,IAKIE,GAAwB,EAAA1c,SAASC,aAEvC,SAAS0c,KAEP,EAAAlY,MAAMmY,mBAAqBjY,EAC3B,EAAAF,MAAM4L,aAAeA,EAKrB,EAAA/O,WAAWwJ,UAAUjD,iBAErB,IAAMgV,EAAsBhV,EAAe5B,KAAK,EAAA3E,WAAWwJ,WACrDgS,EAAiB,WACrBD,EACE/U,GAAYhO,MACZgO,GAAYhO,MACZkO,GAAiBlO,MAErB,EAIA,EAAAwH,WAAWwJ,UAAU6C,iBAAmB2E,EAAgBrM,KAAK,EAAA3E,WAAWwJ,WAKxE,EAAAxJ,WAAWwJ,UAAUjD,eAAiBiV,EAEtC,IAAMC,EAAgC,EAAAxW,QAAQkD,sBACxCuT,EAAe,CACnB,EACA,KACA,KACA,KACA,IACA,IACA,EACA,EACA,EACA,MAEF,SAASC,EAAyBC,GAChCH,EAA8BG,GAC9B,IAAK,IAAIzc,EAAI,EAAGA,GAAK,KAAmB6D,KAAM7D,IAC5C,EAAA8F,QAAQkB,cAAchH,GAAKuc,EAAavc,EAE5C,CACA,EAAA8F,QAAQkD,sBAAwBwT,EAChC,EAAA1W,QAAQF,YAAcA,EAGtB,IAAMpE,EAAS,GACf,EAAAX,WAAWwJ,UAAUqS,YAAqB,EAATlb,EAEnC,EAEA,SAAU,WACRoT,EAAMG,eAAeC,MAAK,sD,8CACxB,EAAA2H,uBAAuB/Y,SAAQ,SAAAgZ,GAAQ,OAAAzC,EAAoB0C,KAAKD,EAAzB,IAGvCvC,EAAahhB,OAAQ,EAEfyjB,EAAUxH,GAAiB,GAAGM,QAChCkH,IACF7H,GAAa5b,MAAQyjB,GAEvBC,YAAW,WAAM,OAAAC,KAAchI,MAAK,WAAM,OAAAsF,GAAYjhB,OAAQ,CAApB,GAAzB,GAAoD,KAErEub,EAAMqI,aAAa,CAAC,oBAAoB,IACxCrI,EAAMqI,aAAa,CAAC,iBAAkB,EAAA/d,MAAMmO,SAAS,IAAK,IAAK,IAAK,OACpEuH,EAAMqI,aAAa,CAAC,gBAAiB,EAAA/d,MAAMmO,SAAS,IAAK,IAAK,EAAG,OACjEuH,EAAMqI,aAAa,CAAC,qBAAqB,IACzCC,GAAgBvC,GAActhB,OAC9B8jB,GAAoBxC,GAActhB,OAASgO,GAAYhO,OACvD+jB,GAAexC,GAAavhB,OAC5BgkB,GAAqBrC,GAAmB3hB,OACxCikB,GAAkBnkB,GAAiBE,OACnCub,EAAM2I,cAAa,GACnB3I,EAAM4I,aAAa,MAEnBtB,KAQAuB,KAEAC,aAAY,WACV,GAAI5C,GAAQzhB,MAAO,CACjB,IAAMgc,EAAOT,EAAM+I,YACnB1I,GAAa5b,MAAQgc,EAAK0G,SAC5B,CACA,IAAM5G,EAAcC,GAAqBR,EAAM+I,aAC/CC,GAAoBzI,EAAY9a,OAClC,GAAG,KAEHsK,OAAOkZ,iBAAiB,SAAS,SAACC,GAC5B,CAAC,MAAO,UAAUC,SAASD,EAAMra,MAAQua,GAAe3kB,QAC1D2kB,GAAe3kB,OAAQ,EAE3B,IAEAsL,OAAOkZ,iBAAiB,oBAAoB,WACT,WAA7BI,SAASC,gBACXC,KAEAC,IAEJ,I,YAEJ,IAEA,IAAMC,IAAQ,SAAS,WAAM,OAAAhE,EAAahhB,OAASihB,GAAYjhB,KAAlC,IAGvBilB,IAAY,SAAS,WAAM,OAACD,GAAMhlB,KAAP,IAG3BklB,IAAuB,SAAS,WAAM,OAAAplB,GAAiBE,MAAMC,YAAc,CAArC,IAEtCklB,IAAW,SAAS,WAAM,WAAI9kB,KAAKub,GAAa5b,MAAtB,IAG1BolB,IAAY,SAAS,WAAM,OAAA/E,EAAUrgB,KAAV,IAE3BqlB,IAAS,SAAS,WAAM,OAAAD,GAAUplB,OAASmgB,CAAnB,IAExBmF,IAAa,SAAS,WAAM,OAAA/E,EAAGvgB,KAAH,IAG5BulB,IAAU,SAAS,WACvB,MAAO,CACL,iBAAkBrE,GAAYlhB,MAC9B,kBAAmBmhB,GAAanhB,MAChC,uBAAwBwlB,GAAcxlB,MAAQ,MAAQ,OAE1D,IASMwlB,IAAgB,QAAS,CAC7B7E,IAAG,WACD,MAAuB,SAAhBI,EAAM/gB,KACf,EACAyiB,IAAG,SAACgD,GACFC,GAAY,OACd,IAGIf,IAAiB,QAAS,CAC9BhE,IAAG,WACD,MAAuB,UAAhBI,EAAM/gB,KACf,EACAyiB,IAAG,SAACziB,GAEF,GADA0lB,GAAY,SACP1lB,GAIH,SAAS,WACP,IAAM2lB,EAAQf,SAASgB,cAAc,eACrCD,EAAMnB,iBAAiB,QAAQ,SAACqB,GAC9BpG,GAAe,EACfK,EAA6Bzf,KAAKmG,MAClCmZ,GAAc,CAChB,IAEAgG,EAAMnB,iBAAiB,SAAS,SAACqB,GAC/BpG,GAAe,EACf,IAAMjZ,EAAMnG,KAAKmG,MACkB,OAA/BsZ,IACFN,GAAuBhZ,EAAMsZ,EAC7BA,EAA6B,KAEjC,GACF,QApBU,CACV,IAAM6F,EAAQf,SAASgB,cAAc,eACrCD,EAAMG,OACR,CAmBF,IAOF,SAASC,KACPlF,EAAiB7gB,OAAQ,CAC3B,CAEA,SAAS0lB,GAAYM,GACfjF,EAAM/gB,QAAUgmB,GAClBjF,EAAM/gB,MAAQ,MACd,SAAS,YACP,IAAAimB,oBACF,KAEAlF,EAAM/gB,MAAQgmB,CAElB,CAEA,SAASE,GAAmBhmB,EAAsBD,GAEhD,OAAO,QAAgBC,EAAcD,EAAaiiB,GACpD,CAEA,SAASiE,GAAuBC,GAC9BtmB,GAAiBE,MAAQ,CAAEE,aAAckmB,EAAQC,OAAO,GAAIpmB,YAAammB,EAAQC,OAAO,IACxFH,GAAmBE,EAAQC,OAAO,GAAID,EAAQC,OAAO,IAAI1K,MAAK,SAAA/S,GAC5DwZ,GAAqBpiB,MAAQ4I,CAC/B,IAAG0d,OAAM,SAAAC,GACPjE,GAAmBtiB,MAAQ,mCAC7B,GACF,CAEA,SAASwmB,GAA6BJ,GACpCD,GAAuBC,GACvBrG,EAA4ByD,KAAK4C,EAAQC,OAC3C,CAEA,SAAehE,K,4GACgB,OAA7B,EAAAD,GAA6B,GAAM8D,GAAmBpmB,GAAiBE,MAAME,aAAcJ,GAAiBE,MAAMC,c,cAAlH,EAAqBD,MAAQ,S,WAG/B,SAASymB,GAAe7d,GACtB,OAAO,QAAuBA,EAAMsZ,GACtC,CAEA,SAASwE,GAAsBjd,GAC7B3J,GAAiBE,MAAQyJ,EACzBuW,EAAyBwD,KAAK,CAAC/Z,EAASxJ,YAAawJ,EAASvJ,cAChE,CAEA,SAAekkB,K,sHACb,OAAInC,GAAejiB,MACjB,IAGe,GAAM2mB,MAAM,UAAGhI,EAAc,YAAIS,GAAQ,CACxDwH,OAAQ,MAERC,QAAS,CAAE,cAAgD,QAA/B,0CAA+B,QAAI,O,OAEjD,OALVC,EAAW,SAKD,GAAMA,EAASC,Q,OAE/B,OAFMC,EAAU,SACVC,EAA6B,MAApBH,EAASI,aAAiDC,IAAf,QAAhB,EAAAH,EAAQF,gBAAQ,eAAEM,WACxDH,EACF,KAGFN,MAAM,UAAGhI,GAAkB,CACzBiI,OAAQ,MACRC,QAAS,CACP,eAAgB,mBAEhB,cAAgD,QAA/B,0CAA+B,QAAI,IAEtDQ,KAAMC,KAAKC,UAAU,CAEnBH,UAAWhI,EAEXoI,+BAAgCzH,EAEhC0H,4BAA6BzH,EAE7B0H,YAAa,EAAGC,aAAc,EAAGC,cAAe,EAEhDC,aAAcnI,EAAaoI,aAAcnI,M,YAK/C,SAASoF,KACP/E,EAA2B,GAC3BD,EAA8B,GAC9BR,EAAa,EACbC,EAAqB,EACrB,IAAMhZ,EAAMnG,KAAKmG,MACjBoZ,EAAoBpZ,EACpBqZ,EAAqB2F,GAAcxlB,MAAQwG,EAAM,KACjDsZ,EAA6BL,EAAejZ,EAAM,IACpD,CAEA,SAAese,K,2FACb,OAAI7C,GAAejiB,QAIbwG,EAAMnG,KAAKmG,MACXuhB,EAAYvC,GAAcxlB,OAAgC,OAAvB6f,EAA+BrZ,EAAMqZ,EAAqBN,EAC7FyI,EAAavI,GAA+C,OAA/BK,EAAuCtZ,EAAMsZ,EAA6BN,EAE7GmH,MAAM,UAAGhI,EAAc,YAAIS,GAAQ,CACjCwH,OAAQ,QACRC,QAAS,CACP,eAAgB,mBAEhB,cAAgD,QAA/B,0CAA+B,QAAI,IAEtDQ,KAAMC,KAAKC,UAAU,CAEnBC,+BAAgCzH,EAEhC0H,4BAA6BzH,EAE7BiI,kBAAmBzhB,EAAMoZ,EAEzBsI,mBAAoBH,EAEpBI,oBAAqBH,EAErBH,aAAcnI,EAAaoI,aAAcnI,IAE3CyI,WAAW,IACVzM,MAAK,WACNoJ,IACF,KA/BE,G,OAkCJ,SAAepB,K,2BAAe0E,SAAO,W,mDAiBnC,OAhBMrM,EAAOT,EAAM+I,YAEbpjB,EAASpB,GAAiBE,MAAMC,YAAc,EAAA4D,IAC9CykB,EAASxoB,GAAiBE,MAAME,aAAe,EAAA2D,IAE/CwD,EAAW0U,GAAqBC,GAChCuM,EAAQlhB,EAASpG,MACjBunB,EAAWpD,GAAUplB,MAAQ,GAAK,EAAA6D,IAAM,GAAK,EAAAA,IAC7C4kB,EAAajlB,EACjBglB,EACAD,EACArnB,EACAonB,EACAtM,GAGK,CAAP,EAAOT,EAAMmN,cAAc,CACzB9kB,MAAO6kB,EAAW7kB,MAClBE,OAAQ2kB,EAAW3kB,OACnB6kB,QAAS,IACTC,SAAS,I,OAKb,SAAS3E,GAAkBxa,GACzBmZ,GAAYiG,gBAAgBpf,EAASxJ,aACrC2iB,GAAYkG,gBAAgBrf,EAASvJ,aACvC,CAEA,SAAS2jB,GAAgBkF,GACvBxN,EAAMqI,aAAa,CAAC,gBAAiBmF,GACvC,CAEA,SAASjF,GAAoBiF,GAC3BxN,EAAMqI,aAAa,CAAC,oBAAqBmF,GAC3C,CAEA,SAAShF,GAAegF,GACtBxN,EAAMqI,aAAa,CAAC,eAAgBmF,GAEtC,CAEA,SAASxE,GAAoBlI,GAC3B,IAAMrW,EAAUzB,EAAoB8X,GAC9B2M,EAAY,IAAgB,IAAVhjB,EAClBJ,EAAQ,EAAAC,MAAMmO,SAAS,IAAKgV,EAAW,EAAGA,GAChDzN,EAAMqI,aAAa,CAAC,gBAAiBhe,GACvC,CAEA,SAASoe,GAAqB+E,GAC5BxN,EAAMqI,aAAa,CAAC,2BAA4BmF,IAChDxN,EAAMqI,aAAa,CAAC,0BAA2BmF,GACjD,CDjbA,OCmbA,QAAMjpB,IAAkB,SAAC2J,GACvB5I,QAAQC,IAAI,2BAA4B2I,GACxC4Y,KACA4B,GAAkBxa,GAClBka,KACA,EAAAnc,WAAWwJ,UAAUjD,gBACvB,KAIA,QAAM0T,IAAS,SAACwH,GACd1N,EAAM2I,aAAa+E,EACrB,KAEA,QAAM3H,IAAe,SAACyH,GACpBlF,GAAgBkF,GAChBjF,GAAoBiF,GAAQ/a,GAAYhO,MAC1C,KACA,QAAMuhB,GAAcwC,KACpB,QAAMpC,GAAoBqC,KAC1B,QAAMhW,IAAa,SAAC+a,GAClBjF,GAAoBiF,GAAQzH,GAActhB,MAC5C,KAEA,QAAMmlB,IAAU,SAAC+D,GACf3N,EAAM4N,QAAQD,EAChB,KAEA,QAAMnH,IAAkB,SAACqH,GACvB9d,OAAOwT,aAAaQ,QAAQlB,GAAwBiL,OAAOD,GAC7D,KAEA,QAAM5D,IAAe,SAACuD,GACpB,IAAMviB,EAAMnG,KAAKmG,MACbuiB,EACFlJ,EAAqBrZ,EACW,OAAvBqZ,IACTN,GAAe/Y,EAAMqZ,EACrBA,EAAqB,KAEzB,KAEA,QAAM8E,IAAgB,SAACoE,GACjBA,IACFrJ,GAAc,EAElB,KAEA,QAAMwF,IAAsB,SAACoE,GAAsB,OAAA5e,GAAA,KAEnD,QAAMmW,GAAkB,SAACkI,GAClBA,IACHnH,GAAQ5hB,OAAQ,EAEpB,KAEA,QAAM4hB,IAAS,SAAC2H,GACTA,GACE1I,EAAiB7gB,OAAkC,OAAzBiiB,GAAejiB,QAC5C6hB,GAAkB7hB,OAAQ,EAGhC,KAEA,QAAMiiB,IAAgB,SAACD,GACN,OAAXA,GACF1W,OAAOwT,aAAaQ,QAAQnB,GAAakL,OAAOrH,GAEpD,IDvfO,SAACwH,EAAUC,GAChB,IAAMC,GAAgC,QAAkB,sBAClDC,GAA+B,QAAkB,qBAEjDC,GAA0B,QAAkB,gBAK5CC,GAAyB,QAAkB,eAC3CC,GAAgC,QAAkB,sBAClDC,GAA6B,QAAkB,mBAC/CC,GAA+B,QAAkB,qBACjDC,GAA0B,QAAkB,gBAE5CC,GAA8B,QAAkB,oBAChDC,GAA2B,QAAkB,iBAU7CC,GAAqC,QAAkB,2BAM7D,OAAQ,WAAc,QAAa,KAAkB,CACnD3N,GAAI,MACJQ,OAAO,QAAgBsI,GAAQvlB,QAC9B,CACDwe,SAAS,SAAS,WAAM,QACtB,QAAoB,MAAOhC,GAAY,EACrC,QAAakN,EAA+B,CAAE,gBAAiBF,EAAKjL,cAAgB,KAAM,EAAG,CAAC,mBAC9F,QAAa,KAAsB,CACjC,cAAesC,EAAiB7gB,MAChCqqB,SAAU,GACVrkB,QAAS,MACTiX,OAAO,QAAgBsI,GAAQvlB,OAC/Byc,GAAI,kBACH,CACD+B,SAAS,SAAS,WAAM,QACtB,UAAiB,WAAc,QAAoB,MAAO,CACxD/B,GAAI,gBACJQ,OAAO,QAAgBsI,GAAQvlB,QAC9B,EACD,QAAa2pB,EAA8B,CACzClN,GAAI,sBACJ6N,QAASvE,GACTwE,SAAS,QAAUxE,GAAmB,CAAC,UACvCyE,KAAM,QACNC,SAAU,MAEZhB,EAAO,MAAQA,EAAO,KAAM,QAAoB,MAAO,CAAEhN,GAAI,sBAAwB,EACnF,QAAoB,IAAK,KAAM,oBAC/B,QAAoB,IAAK,CAAEE,MAAO,aAAe,uBAC/C,KACJ,QAAoB,MAAO,KAAM,EAC/B,QAAa,KAAkB,CAC7BA,MAAO,qBACP2N,QAASvE,GACTngB,MAAOsb,GAAYlhB,MACnB0qB,QAASpF,GAAWtlB,MAAQ,UAAY,UACxC2qB,KAAM,UACNC,QAAS,WACTC,QAAS,MACR,CACDrM,SAAS,SAAS,WAAM,OAAAiL,EAAO,MAAQA,EAAO,IAAM,EAClD,QAAiB,kBADK,IAGxBqB,EAAG,GACF,EAAG,CAAC,QAAS,eAElB,QAAoB,MAAOpO,GAAY,CACrC+M,EAAO,MAAQA,EAAO,KAAM,QAAiB,2CAC7CA,EAAO,MAAQA,EAAO,KAAM,QAAoB,IAAK,CACnDsB,KAAM,wCACNC,OAAQ,SACRC,IAAK,uBACJ,uBAAwB,IAC3BxB,EAAO,MAAQA,EAAO,KAAM,QAAiB,UAC7CA,EAAO,MAAQA,EAAO,KAAM,QAAoB,IAAK,CACnDsB,KAAM,2CACNC,OAAQ,SACRC,IAAK,uBACJ,uBAAwB,IAC3BxB,EAAO,MAAQA,EAAO,KAAM,QAAiB,QAC7C,QAAoB,MAAO7M,GAAY,EACrC,QAAagN,EAAyB,CAAE,YAAa,eAGxD,IAAK,CACN,CAAC,KAA0B7D,MAnDP,IAsDxB+E,EAAG,GACF,EAAG,CAAC,cAAe,WACtB,QAAa,KAAqB,CAChCI,WAAYtJ,GAAQ5hB,MACpB,sBAAuBypB,EAAO,KAAOA,EAAO,GAAK,SAAC0B,GAAgB,OAAC,GAAUnrB,MAAQmrB,CAAnB,IACjE,CACD3M,SAAS,SAAS,WAAM,OACrBoD,GAAa,QACT,WAAc,QAAoB,MAAO/E,GAAY,EACpD,QAAa,KAAmB,CAAEF,MAAO,yBAA2B,CAClE6B,SAAS,SAAS,WAAM,QACtB,QAAoB,MAAO1B,GAAY,EACrC,QAAa6M,EAA8B,CACzCgB,KAAM,KACNhO,MAAO,OACP/W,MAAOsb,GAAYlhB,MACnBwqB,KAAM,QACNF,QAASb,EAAO,KAAOA,EAAO,GAAK,SAAC0B,GAAgB,OAACvJ,GAAQ5hB,OAAS4hB,GAAQ5hB,KAA1B,GACpDuqB,QAASd,EAAO,KAAOA,EAAO,IAAK,SAAU,SAAC0B,GAAgB,OAACvJ,GAAQ5hB,OAAS4hB,GAAQ5hB,KAA1B,GAAkC,CAAC,WACjGyqB,SAAU,IACV,mBAAoB,SACnB,KAAM,EAAG,CAAC,aAEf,QAAoB,MAAO1N,GAAY,CACrC0M,EAAO,MAAQA,EAAO,KAAM,QAAoB,KAAM,CACpDxM,MAAO,CAAC,MAAQ,WAChBN,MAAO,QACN,eAAgB,KACnB,QAAoB,KAAM,KAAM,EAC9B,QAAoB,KAAM,KAAM,CAC9B8M,EAAO,MAAQA,EAAO,KAAM,QAAiB,iCAC7C,QAAaE,EAA8B,CACzChN,MAAO,cACP6N,KAAM,eACNvN,MAAO,CAAC,MAAQ,aAElBwM,EAAO,MAAQA,EAAO,KAAM,WAC5BA,EAAO,MAAQA,EAAO,KAAM,QAAoB,SAAU,KAAM,EAC9D,QAAoB,OAAQ,CAAExM,MAAO,CAAC,MAAQ,YAAc,kBAC1D,IACJwM,EAAO,MAAQA,EAAO,KAAM,QAAiB,SAE/C,QAAoB,KAAM,KAAM,CAC9BA,EAAO,MAAQA,EAAO,KAAM,QAAiB,gBAC7C,QAAoB,SAAU,KAAM,EAClC,SAAgB,QAAoB,OAAQzM,GAAY,gBAAiB,KAAM,CAC7E,CAAC,OAAS,QAAOuD,OAEnB,SAAgB,QAAoB,OAAQrD,GAAY,kBAAmB,KAAM,CAC/E,CAAC,MAAQ,QAAOqD,QAGpBkJ,EAAO,MAAQA,EAAO,KAAM,QAAiB,kFAC7C,QAAaE,EAA8B,CACzChN,MAAO,cACP6N,KAAM,OACNvN,MAAO,CAAC,MAAQ,aAElBwM,EAAO,MAAQA,EAAO,KAAM,QAAiB,yBAE/CA,EAAO,MAAQA,EAAO,KAAM,QAAoB,KAAM,KAAM,2CAA4C,KACxG,QAAoB,KAAM,KAAM,CAC9BA,EAAO,MAAQA,EAAO,KAAM,QAAiB,uBAC7C,QAAaE,EAA8B,CACzChN,MAAO,cACP6N,KAAM,YACNvN,MAAO,CAAC,MAAQ,aAElBwM,EAAO,MAAQA,EAAO,KAAM,QAAiB,WAC7C,QAAaE,EAA8B,CACzChN,MAAO,cACP6N,KAAM,QACNvN,MAAO,CAAC,MAAQ,aAElBwM,EAAO,MAAQA,EAAO,KAAM,WAC5BA,EAAO,MAAQA,EAAO,KAAM,QAAoB,SAAU,KAAM,EAC9D,QAAoB,OAAQ,CAAExM,MAAO,CAAC,MAAQ,YAAc,kBAC1D,IACJwM,EAAO,MAAQA,EAAO,KAAM,QAAiB,cAInD,QAAa,KAAuB,CAClCyB,WAAYnJ,GAAiB/hB,MAC7B,sBAAuBypB,EAAO,KAAOA,EAAO,GAAK,SAAC0B,GAAgB,OAAC,GAAmBnrB,MAAQmrB,CAA5B,GAClEC,MAAO,qCACPV,QAAS,UACT,eAAgB,IACf,KAAM,EAAG,CAAC,eA9ES,IAgFxBI,EAAG,QAGP,QAAoB,IAAI,GAvFN,IAyFxBA,EAAG,GACF,EAAG,CAAC,gBACP,QAAa,KAAa,CAAEjjB,KAAM,QAAU,CAC1C2W,SAAS,SAAS,WAAM,QACtB,SAAgB,QAAoB,MAAOrB,GAAYsM,EAAO,MAAQA,EAAO,IAAM,EACjF,QAAoB,MAAO,CAAE9M,MAAO,aAAe,EACjD,QAAoB,MAAO,CAAEA,MAAO,aACpC,QAAoB,IAAK,KAAM,eAC7B,KACF,KAAM,CACR,CAAC,KAAQsI,GAAUjlB,SAPC,IAUxB8qB,EAAG,KAEL,QAAoB,MAAO1N,GAAa,EACtC,QAAoB,MAAOC,GAAa,EACtC,QAAawM,EAAwB,CACnCqB,WAAY1F,GAAcxlB,MAC1B,sBAAuBypB,EAAO,KAAOA,EAAO,GAAK,SAAC0B,GAAgB,OAAC,GAAgBnrB,MAAQmrB,CAAzB,GAClE,UAAW,YACXvlB,MAAOwb,GAAYphB,MACnB,eAAgBwlB,GAAcxlB,MAAQ,YAAc,aACpD,mBAAoB,SACnB,KAAM,EAAG,CAAC,aAAc,QAAS,kBACpC,QAAa6pB,EAAwB,CACnCqB,WAAYvG,GAAe3kB,MAC3B,sBAAuBypB,EAAO,KAAOA,EAAO,GAAK,SAAC0B,GAAgB,OAAC,GAAiBnrB,MAAQmrB,CAA1B,GAClE,UAAW,QACXvlB,MAAOwb,GAAYphB,MACnB,eAAgB,cAChB,mBAAoB,SACnB,KAAM,EAAG,CAAC,aAAc,aAE7B,QAAoB,MAAOsd,GAAa,EACtC,QAAauM,EAAwB,CACnCqB,WAAY1J,GAAqBxhB,MACjC,sBAAuBypB,EAAO,KAAOA,EAAO,GAAK,SAAC0B,GAAgB,OAAC,GAAuBnrB,MAAQmrB,CAAhC,GAClE,UAAW,eACXvlB,MAAOwb,GAAYphB,MACnB,eAAgB,kBAChB,mBAAoB,SACnB,KAAM,EAAG,CAAC,aAAc,WAC3B,QAAa,KAAqB,CAChCkrB,WAAY1J,GAAqBxhB,MACjC,sBAAuBypB,EAAO,MAAQA,EAAO,IAAM,SAAC0B,GAAgB,OAAC,GAAuBnrB,MAAQmrB,CAAhC,GACpE,YAAa,cACbE,WAAY,sBACX,CACD7M,SAAS,SAAS,WAAM,QACtB,QAAa,KAAmB,KAAM,CACpCA,SAAS,SAAS,WAAM,QACtB,QAAoB,MAAOjB,GAAa,EACtC,QAAaoM,EAA8B,CACzC1M,MAAO,CAAC,OAAS,UAAU,UAAU,QACrCuN,KAAM,QACNG,KAAM,KACNL,QAASb,EAAO,KAAOA,EAAO,GAAK,SAAC0B,GAAgB,OAAC3J,GAAqBxhB,OAAQ,CAA9B,GACpDuqB,QAASd,EAAO,KAAOA,EAAO,IAAK,SAAU,SAAC0B,GAAgB,OAAC3J,GAAqBxhB,OAAQ,CAA9B,GAAsC,CAAC,WACrGyqB,SAAU,IACV7kB,MAAO,aAGX,QAAoB,MAAO4X,GAAa,EACtC,QAAasM,EAA+B,CAC1CrN,GAAI,WACJkO,KAAM,OACND,QAAS,UACTY,UAAW,IACX1lB,MAAOsb,GAAYlhB,MACnBurB,cAAe9B,EAAO,KAAOA,EAAO,GAAK,SAAC0B,GAAgB,OAACrrB,GAAiBE,MAAQ,CAACE,aAAcirB,EAAOK,UAAWvrB,YAAakrB,EAAOM,SAA/E,IACzD,KAAM,EAAG,CAAC,WACb,QAAa1B,EAA4B,CACvCpN,OAAO,QAAgB,CAAC,oBACxB+O,MAAO,GACP,cAAe,KACf,eAAgBxK,GAAYlhB,MAC5B,kBAAmBymB,GACnBkF,cAAenF,GACfoF,QAASnC,EAAO,MAAQA,EAAO,IAAM,SAAC0B,GAAgB,OAAC7I,GAAmBtiB,MAAQmrB,CAA5B,IACrD,KAAM,EAAG,CAAC,oBAEf,QAAanB,EAA8B,CACzC,cAAelqB,GAAiBE,MAChC,sBAAuB0mB,IACtB,KAAM,EAAG,CAAC,gBAlCS,IAoCxBoE,EAAG,IAtCiB,IAyCxBA,EAAG,GACF,EAAG,CAAC,gBACP,QAAoB,OAAQ,CAC1BL,SAAU,IACVhO,GAAI,oBACJE,MAAO,cACP2N,QAASb,EAAO,MAAQA,EAAO,IAAM,SAAC0B,GAAgB,OAAC3J,GAAqBxhB,OAAM,CAA5B,GACtDuqB,QAASd,EAAO,MAAQA,EAAO,KAAM,SAAU,SAAC0B,GAAgB,OAAC3J,GAAqBxhB,OAAM,CAA5B,GAAmC,CAAC,YACnG,sBAAuB,QAA+C,IAA9BoiB,GAAqBpiB,MAAcoiB,GAAqBpiB,MAAQ,2BAA4B,OAEzI,QAAoB,MAAOyd,GAAa,EACtC,QAAoB,MAAOC,GAAa,EACtC,QAAoB,MAAOC,GAAa,EACtC,QAAagM,EAA8B,CACzCgB,KAAM,KACNhO,MAAO,gBACP/W,MAAOsb,GAAYlhB,MACnBwqB,KAAM9I,GAAa1hB,MAAQ,eAAiB,OAC5CsqB,QAASb,EAAO,MAAQA,EAAO,IAAM,SAAC0B,GAAgB,OAACzJ,GAAa1hB,OAAS0hB,GAAa1hB,KAApC,GACtDuqB,QAASd,EAAO,MAAQA,EAAO,KAAM,SAAU,SAAC0B,GAAgB,OAACzJ,GAAa1hB,OAAS0hB,GAAa1hB,KAApC,GAA4C,CAAC,WAC7GyqB,SAAU,KACT,KAAM,EAAG,CAAC,QAAS,WAEvB/I,GAAkB,QACd,WAAc,QAAoB,MAAO9D,GAAa,EACrD,QAAa,KAAuB,CAClChY,MAAOsb,GAAYlhB,MACnBkrB,WAAY3J,GAAavhB,MACzB,sBAAuBypB,EAAO,MAAQA,EAAO,IAAM,SAAC0B,GAAgB,OAAC,GAAenrB,MAAQmrB,CAAxB,GACpEZ,QAASd,EAAO,MAAQA,EAAO,KAAM,SAAU,SAAC0B,GAAgB,OAAC5J,GAAavhB,OAASuhB,GAAavhB,KAApC,GAA4C,CAAC,WAC7GorB,MAAO,WACP,eAAgB,IACf,KAAM,EAAG,CAAC,QAAS,gBACtB,QAAa,KAAuB,CAClCxlB,MAAOsb,GAAYlhB,MACnBkrB,WAAY5J,GAActhB,MAC1B,sBAAuBypB,EAAO,MAAQA,EAAO,IAAM,SAAC0B,GAAgB,OAAC,GAAgBnrB,MAAQmrB,CAAzB,GACpEZ,QAASd,EAAO,MAAQA,EAAO,KAAM,SAAU,SAAC0B,GAAgB,OAAC7J,GAActhB,OAASshB,GAActhB,KAAtC,GAA8C,CAAC,WAC/GorB,MAAO,WACP,eAAgB,IACf,KAAM,EAAG,CAAC,QAAS,gBACtB,QAAa,KAAuB,CAClCxlB,MAAOsb,GAAYlhB,MACnBkrB,WAAYld,GAAYhO,MACxB,sBAAuBypB,EAAO,MAAQA,EAAO,IAAM,SAAC0B,GAAgB,OAAC,GAAcnrB,MAAQmrB,CAAvB,GACpEZ,QAASd,EAAO,MAAQA,EAAO,KAAM,SAAU,SAAC0B,GAAgB,OAACnd,GAAYhO,OAASgO,GAAYhO,KAAlC,GAA0C,CAAC,WAC3GorB,MAAO,cACP,eAAgB,IACf,KAAM,EAAG,CAAC,QAAS,gBACtB,QAAa,KAAuB,CAClCxlB,MAAOsb,GAAYlhB,MACnBkrB,WAAYhd,GAAiBlO,MAC7B,sBAAuBypB,EAAO,MAAQA,EAAO,IAAM,SAAC0B,GAAgB,OAAC,GAAmBnrB,MAAQmrB,CAA5B,GACpEZ,QAASd,EAAO,MAAQA,EAAO,KAAM,SAAU,SAAC0B,GAAgB,OAACjd,GAAiBlO,OAASkO,GAAiBlO,KAA5C,GAAoD,CAAC,WACrHorB,MAAO,gBACP,eAAgB,IACf,KAAM,EAAG,CAAC,QAAS,gBACtB,QAAa,KAAuB,CAClCxlB,MAAOsb,GAAYlhB,MACnBkrB,WAAYvJ,GAAmB3hB,MAC/B,sBAAuBypB,EAAO,MAAQA,EAAO,IAAM,SAAC0B,GAAgB,OAAC,GAAqBnrB,MAAQmrB,CAA9B,GACpEZ,QAASd,EAAO,MAAQA,EAAO,KAAM,SAAU,SAAC0B,GAAgB,OAACxJ,GAAmB3hB,OAAS2hB,GAAmB3hB,KAAhD,GAAwD,CAAC,WACzHorB,MAAO,iBACP,eAAgB,IACf,KAAM,EAAG,CAAC,QAAS,mBAExB,QAAoB,IAAI,UAIlC,QAAoB,MAAOvN,GAAa,EACtC,QAAoB,MAAOC,GAAa,EACtC,QAAa,KAAsB,CACjCoN,WAAYpJ,GAAe9hB,MAC3B,sBAAuBypB,EAAO,MAAQA,EAAO,IAAM,SAAC0B,GAAgB,OAAC,GAAiBnrB,MAAQmrB,CAA1B,GACpEU,UAAW,SACX,oBAAqB,YACrBpiB,SAAU,UACV4B,OAAQ,aACRygB,OAAO,EACP7O,OAAO,QAAgBsI,GAAQvlB,QAC9B,CACD6rB,WAAW,SAAS,SAAC,G,IAACvN,EAAK,QAAM,QAC/B,QAAa,MAAmB,QAAYA,EAAO,CACjD3B,MAAO,WACPlO,MAAO,cACPoc,QAAS,KACTJ,SAAU,IACVF,SAAS,QAAUjM,EAAMgM,QAAS,CAAC,YACjC,CACF9L,SAAS,SAAS,WAAM,QACtB,QAAayL,EAAyB,CACpCtN,MAAO,YACPoP,KAAMxJ,GAAkBviB,MACxBgsB,KAAM,GACN,mBAAmB,QAAO3L,GAC1B,gBAAiB,GACjB4L,UAAU,QAAO7rB,KAChB,KAAM,EAAG,CAAC,OAAQ,kBAAmB,cACrC,QAAOigB,IAAcgF,GAAOrlB,OAU3B,QAAoB,IAAI,KATvB,WAAc,QAAa,KAAmB,CAC7CoK,IAAK,EACLuS,MAAO,YACN,CACD6B,SAAS,SAAS,WAAM,OAAAiL,EAAO,MAAQA,EAAO,IAAM,EAClD,QAAiB,6BADK,IAGxBqB,EAAG,KAjBa,IAqBxBA,EAAG,GACF,KAAM,CAAC,YA9BqB,IAgCjCtM,SAAS,SAAS,WAAM,QACtB,QAAa,KAAmB,CAC9B0N,IAAK,UACLzB,SAAU,IACVhc,MAAO,cACP6c,UAAW,KACV,CACD9M,SAAS,SAAS,WAAM,QACtB,QAAa,KAAmB,CAC9BiM,SAAU,IACV9N,MAAO,mBACP2N,QAASb,EAAO,MAAQA,EAAO,IAAM,SAAC0B,GAAgB,OAACrJ,GAAe9hB,OAAM,CAAtB,GACtDuqB,QAASd,EAAO,MAAQA,EAAO,KAAM,SAAU,SAAC0B,GAAgB,OAACrJ,GAAe9hB,OAAM,CAAtB,GAA8B,CAAC,WAC/F4F,MAAOsb,GAAYlhB,MACnB2qB,KAAM,MACL,CACDnM,SAAS,SAAS,WAAM,OAAAiL,EAAO,MAAQA,EAAO,IAAM,EAClD,QAAiB,cADK,IAGxBqB,EAAG,GACF,EAAG,CAAC,WACP,QAAaZ,EAA6B,CACxCO,SAAU,IACVS,WAAY3I,GAAkBviB,MAC9B,sBAAuBypB,EAAO,MAAQA,EAAO,IAAM,SAAC0B,GAAgB,OAAC,GAAoBnrB,MAAQmrB,CAA7B,GACpE,iBAAiB,GAChB,CACD3M,SAAS,SAAS,WAAM,QACtB,QAAoB,SAAU,CAC5B7B,MAAO,cACP2N,QAASb,EAAO,MAAQA,EAAO,IAAM,WAAO7N,GAAa5b,MAAQK,KAAKmG,KAAK,GAC3EqB,KAAM,UACN,aAAc,mBACb,OANmB,IAQxBijB,EAAG,GACF,EAAG,CAAC,eA7Be,IA+BxBA,EAAG,GACF,KAvCmB,IAyCxBA,EAAG,GACF,EAAG,CAAC,aAAc,aAEvB,QAAaX,EAA0B,CACrC1I,QAASA,GAAQzhB,MACjB,mBAAoBypB,EAAO,MAAQA,EAAO,IAAM,SAAC0B,GAAgB,OAAC,GAAUnrB,MAAQmrB,CAAnB,GACjE5P,OAAO,QAAOA,GACd3V,MAAOsb,GAAYlhB,MACnBmsB,YAAa,IACbC,WAAW,QAAO7L,GAClB8L,SAAU,IACV,YAAa,GACbC,QAAS7C,EAAO,MAAQA,EAAO,IAAM,WAAK7N,GAAa5b,MAAQK,KAAKmG,KAAK,IACxE,KAAM,EAAG,CAAC,UAAW,QAAS,QAAS,eAC1C,QAAoB,MAAOuX,GAAa,EACtC,QAAa8L,EAAwB,CACnC,UAAW,0BACX0C,WAAY9C,EAAO,MAAQA,EAAO,IAAM,WAAM,OAAA7H,GAAQ5hB,OAAQ,CAAhB,GAC9C4F,MAAOsb,GAAYlhB,MACnB,cAAekhB,GAAYlhB,MAC3B,eAAgB,yBAChB,mBAAoB,SACpB,iBAAkB,MAClB,gBAAiBqlB,GAAOrlB,MACxBwsB,OAAQ,SACP,KAAM,EAAG,CAAC,QAAS,cAAe,kBACrC,QAAa3C,EAAwB,CACnC,UAAW,WACX0C,WAAY9C,EAAO,MAAQA,EAAO,IAAM,WAAM,OAAA5H,GAAkB7hB,OAAQ,CAA1B,GAC9C4F,MAAOsb,GAAYlhB,MACnB,cAAekhB,GAAYlhB,MAC3B,eAAgB,0BAChB,mBAAoB,SACpB,iBAAkB,MAClB,gBAAiBqlB,GAAOrlB,MACxBwsB,OAAQ,SACP,KAAM,EAAG,CAAC,QAAS,cAAe,mBAErCpH,GAAUplB,OAIR,QAAoB,IAAI,KAHvB,WAAc,QAAoB,MAAOge,GAAa,EACrD,QAAa4L,SAIrB,QAAa,KAAqB,CAChCnN,GAAI,kBACJyO,WAAYvG,GAAe3kB,MAC3B,sBAAuBypB,EAAO,MAAQA,EAAO,IAAM,SAAC0B,GAAgB,OAAC,GAAiBnrB,MAAQmrB,CAA1B,GACpEE,WAAY,qBACZoB,WAAY,IACX,CACDjO,SAAS,SAAS,WAAM,QACtB,QAAoB,MAAOP,GAAa,EACtC,QAAa0L,EAA8B,CACzClN,GAAI,mBACJE,MAAO,aACP6N,KAAM,QACNG,KAAM,KACNL,QAASb,EAAO,MAAQA,EAAO,IAAM,SAAC0B,GAAgB,OAACxG,GAAe3kB,OAAQ,CAAxB,GACtDuqB,QAASd,EAAO,MAAQA,EAAO,KAAM,SAAU,SAAC0B,GAAgB,OAACxG,GAAe3kB,OAAQ,CAAxB,GAAgC,CAAC,WACjGyqB,SAAU,MAEZhB,EAAO,MAAQA,EAAO,KAAM,QAAoB,QAAS,CACvDiD,SAAU,GACVjQ,GAAI,cACH,EACD,QAAoB,SAAU,CAC5BkQ,IAAK,2CACLC,KAAM,gBAEN,MAnBgB,IAsBxB9B,EAAG,GACF,EAAG,CAAC,gBACP,QAAa,KAAqB,CAChCgB,MAAO,QACPZ,WAAYrJ,GAAkB7hB,MAC9B,sBAAuBypB,EAAO,MAAQA,EAAO,IAAM,SAAC0B,GAAgB,OAAC,GAAoBnrB,MAAQmrB,CAA7B,GACpE,YAAa,QACb1O,GAAI,wBACH,CACD+B,SAAS,SAAS,WAAM,QACtB,QAAa,KAAmB,KAAM,CACpCA,SAAS,SAAS,WAAM,QACtB,QAAa,KAAwB,KAAM,CACzCA,SAAS,SAAS,WAAM,OAAAiL,EAAO,MAAQA,EAAO,IAAM,EAClD,QAAiB,qCACjB,QAAoB,SAAU,KAAM,cAAe,IACnD,QAAiB,yJAHK,IAKxBqB,EAAG,KAEL,QAAa,KAA2B,CAAEnO,MAAO,QAAU,CACzD6B,SAAS,SAAS,WAAM,QACtB,QAAa,OACb,QAAa,KAAkB,CAC7B5Y,MAAO,UACPmlB,KAAM,gDACNC,OAAQ,SACRC,IAAK,uBACJ,CACDzM,SAAS,SAAS,WAAM,OAAAiL,EAAO,MAAQA,EAAO,IAAM,EAClD,QAAiB,qBADK,IAGxBqB,EAAG,KAEL,QAAa,KAAkB,CAC7BllB,MAAO,UACP0kB,QAASb,EAAO,MAAQA,EAAO,IAAM,WAC7CxH,GAAejiB,OAAQ,EACvB6hB,GAAkB7hB,OAAQ,CAC5B,IACW,CACDwe,SAAS,SAAS,WAAM,OAAAiL,EAAO,MAAQA,EAAO,IAAM,EAClD,QAAiB,cADK,IAGxBqB,EAAG,KAEL,QAAa,KAAkB,CAC7BllB,MAAO,QACP0kB,QAASb,EAAO,MAAQA,EAAO,IAAM,WAC7CxH,GAAejiB,OAAQ,EACvB6hB,GAAkB7hB,OAAQ,CAC5B,IACW,CACDwe,SAAS,SAAS,WAAM,OAAAiL,EAAO,MAAQA,EAAO,IAAM,EAClD,QAAiB,YADK,IAGxBqB,EAAG,IAnCiB,IAsCxBA,EAAG,IAhDiB,IAmDxBA,EAAG,IArDiB,IAwDxBA,EAAG,GACF,EAAG,CAAC,gBACP,QAAa,KAAqB,CAChC7N,OAAO,QAAgBsI,GAAQvlB,OAC/B2c,MAAO,eACPF,GAAI,oBACJ,eAAgB,GAChBoQ,WAAY,GACZ,qBAAsB,GACtBxC,SAAU,GACV5b,MAAO,OACPqd,OAAO,EACPriB,SAAU,SACVyhB,WAAY1F,GAAcxlB,MAC1B,sBAAuBypB,EAAO,MAAQA,EAAO,IAAM,SAAC0B,GAAgB,OAAC,GAAgBnrB,MAAQmrB,CAAzB,GACpEE,WAAY,4BACX,CACD7M,SAAS,SAAS,WAAM,QACtB,QAAa,KAAmB,CAAE5P,OAAQ,QAAU,CAClD4P,SAAS,SAAS,WAAM,QACtB,QAAa,KAAmB,CAC9B0M,WAAY7J,GAAIrhB,MAChB,sBAAuBypB,EAAO,MAAQA,EAAO,IAAM,SAAC0B,GAAgB,OAAC,GAAMnrB,MAAQmrB,CAAf,GACpEvc,OAAQ,OACRhJ,MAAOsb,GAAYlhB,MACnB,eAAgBkhB,GAAYlhB,MAC5Byc,GAAI,OACJqQ,MAAO,IACN,CACDtO,SAAS,SAAS,WAAM,QACtB,QAAa,KAAkB,CAC7B7B,MAAO,YACP8N,SAAU,KACT,CACDjM,SAAS,SAAS,WAAM,OAAAiL,EAAO,MAAQA,EAAO,IAAM,EAClD,QAAoB,KAAM,KAAM,eAAgB,IAD1B,IAGxBqB,EAAG,KAEL,QAAa,KAAkB,CAC7BnO,MAAO,YACP8N,SAAU,KACT,CACDjM,SAAS,SAAS,WAAM,OAAAiL,EAAO,MAAQA,EAAO,IAAM,EAClD,QAAoB,KAAM,KAAM,aAAc,IADxB,IAGxBqB,EAAG,IAjBiB,IAoBxBA,EAAG,GACF,EAAG,CAAC,aAAc,QAAS,kBAC9B,QAAanB,EAA8B,CACzClN,GAAI,kBACJE,MAAO,eACP6N,KAAM,QACNG,KAAM,KACNL,QAASb,EAAO,MAAQA,EAAO,IAAM,SAAC0B,GAAgB,OAAC3F,GAAcxlB,OAAQ,CAAvB,GACtDuqB,QAASd,EAAO,MAAQA,EAAO,KAAM,SAAU,SAAC0B,GAAgB,OAAC3F,GAAcxlB,OAAQ,CAAvB,GAA+B,CAAC,WAChGyqB,SAAU,OAEZ,QAAa,MAAqB,CAChCS,WAAY7J,GAAIrhB,MAChB,sBAAuBypB,EAAO,MAAQA,EAAO,IAAM,SAAC0B,GAAgB,OAAC,GAAMnrB,MAAQmrB,CAAf,GACpE1O,GAAI,YACJE,MAAO,gCACN,CACD6B,SAAS,SAAS,WAAM,QACtB,QAAa,KAA0B,KAAM,CAC3CA,SAAS,SAAS,WAAM,QACtB,QAAa,KAAmB,CAAE7B,MAAO,sCAAwC,CAC/E6B,SAAS,SAAS,WAAM,QACtB,QAAa,KAAwB,CAAE7B,MAAO,qCAAuC,CACnF6B,SAAS,SAAS,WAAM,OACtBiL,EAAO,MAAQA,EAAO,KAAM,QAAoB,KAAM,KAAM,8BAA+B,IAC3FA,EAAO,MAAQA,EAAO,KAAM,QAAoB,IAAK,KAAM,kJAAmJ,IAC9MA,EAAO,MAAQA,EAAO,KAAM,QAAoB,IAAK,KAAM,yVAA0V,IACrZA,EAAO,MAAQA,EAAO,KAAM,QAAoB,IAAK,KAAM,yIAA0I,IACrMA,EAAO,MAAQA,EAAO,KAAM,QAAoB,KAAM,KAAM,yCAA0C,IACtGA,EAAO,MAAQA,EAAO,KAAM,QAAoB,IAAK,KAAM,gOAAiO,IAC5RA,EAAO,MAAQA,EAAO,KAAM,QAAoB,IAAK,KAAM,4EAA6E,KACxI,QAAoB,KAAM,KAAM,EAC9B,QAAoB,KAAM,KAAM,CAC9BA,EAAO,MAAQA,EAAO,KAAM,QAAiB,YAC7C,QAAaE,EAA8B,CACzChN,MAAO,cACP6N,KAAM,iBAERf,EAAO,MAAQA,EAAO,KAAM,QAAiB,wGAE/CA,EAAO,MAAQA,EAAO,KAAM,QAAoB,KAAM,KAAM,8HAA+H,IAC3LA,EAAO,MAAQA,EAAO,KAAM,QAAoB,KAAM,KAAM,EAC1D,QAAiB,SACjB,QAAoB,OAAQ,CAAExM,MAAO,CAAC,MAAQ,wBAA0B,gBACxE,QAAiB,uKACf,IACJwM,EAAO,MAAQA,EAAO,KAAM,QAAoB,KAAM,KAAM,EAC1D,QAAiB,sFACjB,QAAoB,OAAQ,CAAExM,MAAO,CAAC,MAAQ,wBAA0B,aACxE,QAAiB,QACf,MAENwM,EAAO,MAAQA,EAAO,KAAM,QAAoB,KAAM,KAAM,wCAAyC,IACrGA,EAAO,MAAQA,EAAO,KAAM,QAAoB,IAAK,KAAM,yFAA0F,IACrJA,EAAO,MAAQA,EAAO,KAAM,QAAoB,KAAM,KAAM,EAC1D,QAAoB,KAAM,KAAM,6FAChC,QAAoB,KAAM,KAAM,4EAChC,QAAoB,KAAM,KAAM,sIAChC,QAAoB,KAAM,KAAM,uEAChC,QAAoB,KAAM,KAAM,wHAC9B,IACJA,EAAO,MAAQA,EAAO,KAAM,QAAoB,KAAM,KAAM,kDAAmD,IAC/GA,EAAO,MAAQA,EAAO,KAAM,QAAoB,IAAK,KAAM,iTAAkT,IAC7WA,EAAO,MAAQA,EAAO,KAAM,QAAoB,IAAK,KAAM,EACzD,QAAoB,SAAU,KAAM,8CACpC,QAAiB,yUACjB,QAAoB,OAAQ,CAAExM,MAAO,CAAC,MAAQ,wBAA0B,aACxE,QAAiB,oEACf,KACJ,QAAoB,IAAK,KAAM,CAC7BwM,EAAO,MAAQA,EAAO,KAAM,QAAiB,aAC7C,QAAaE,EAA8B,CACzChN,MAAO,cACP6N,KAAM,QACNvN,MAAO,CAAC,MAAQ,aAElBwM,EAAO,MAAQA,EAAO,KAAM,QAAiB,+IAE/CA,EAAO,MAAQA,EAAO,KAAM,QAAoB,KAAM,KAAM,qCAAsC,IAClGA,EAAO,MAAQA,EAAO,KAAM,QAAoB,IAAK,KAAM,EACzD,QAAiB,gDACjB,QAAoB,SAAU,KAAM,EAClC,QAAoB,IAAK,CACvBsB,KAAM,iEACNC,OAAQ,SACRC,IAAK,uBACJ,6CAEL,QAAiB,gBACf,IACJxB,EAAO,MAAQA,EAAO,KAAM,QAAoB,KAAM,KAAM,2CAA4C,IACxGA,EAAO,OAASA,EAAO,MAAO,QAAoB,IAAK,KAAM,sSAAuS,KACpW,QAAa,KAAqB,CAAE9M,MAAO,eArErB,IAuExBmO,EAAG,IAzEiB,IA4ExBA,EAAG,IA9EiB,IAiFxBA,EAAG,KAEL,QAAa,KAA0B,KAAM,CAC3CtM,SAAS,SAAS,WAAM,QACtB,QAAa,KAAmB,CAAE7B,MAAO,sCAAwC,CAC/E6B,SAAS,SAAS,WAAM,QACtB,QAAa,KAAwB,CAAE7B,MAAO,qCAAuC,CACnF6B,SAAS,SAAS,WAAM,QACtB,QAAa,KAAwB,KAAM,CACzCA,SAAS,SAAS,WAAM,QACtB,QAAa,KAAkB,CAAEuO,MAAO,UAAY,CAClDvO,SAAS,SAAS,WAAM,QACtB,QAAa,KAAkB,CAAEwO,KAAM,KAAO,CAC5CxO,SAAS,SAAS,WAAM,QACtB,QAAa,KAAmB,CAC9B4M,MAAO,GACP6B,SAAU,IACT,CACDzO,SAAS,SAAS,WAAM,OAAAiL,EAAO,OAASA,EAAO,KAAO,EACpD,QAAiB,UADK,IAGxBqB,EAAG,IARiB,IAWxBA,EAAG,KAEL,QAAa,KAAkB,CAC7BkC,KAAM,IACNrQ,MAAO,QACN,CACD6B,SAAS,SAAS,WAAM,QACtB,QAAoB,SAAU,MAAM,SAAiB,QAAO2B,GAAe,eAAiB,gBAAiB,IAC7G,QAAiB,KAAM,SAAiB,QAAOA,GAAe,IAAM,MAAQ,IAAK,IACjF,QAAoB,SAAU,MAAM,SAAiB,QAAOA,GAAe,IAAM,WAAY,IAC7F,QAAiB,KAAM,SAAiB,QAAOA,GAAe,IAAM,QAAS,GAC7EsJ,EAAO,OAASA,EAAO,MAAO,QAAoB,KAAM,KAAM,MAAO,IAL/C,IAOxBqB,EAAG,IA1BiB,IA6BxBA,EAAG,KAEL,QAAa,KAAkB,CAAEiC,MAAO,UAAY,CAClDvO,SAAS,SAAS,WAAM,QACtB,QAAa,KAAkB,CAAEwO,KAAM,KAAO,CAC5CxO,SAAS,SAAS,WAAM,QACtB,QAAa,KAAmB,CAC9B4M,MAAO,GACP6B,SAAU,IACT,CACDzO,SAAS,SAAS,WAAM,OAAAiL,EAAO,OAASA,EAAO,KAAO,EACpD,QAAiB,WADK,IAGxBqB,EAAG,IARiB,IAWxBA,EAAG,KAEL,QAAa,KAAkB,CAC7BkC,KAAM,IACNrQ,MAAO,QACN,CACD6B,SAAS,SAAS,WAAM,QACtB,QAAoB,SAAU,MAAM,SAAiB,QAAO2B,GAAe,mBAAqB,qBAAsB,IACtH,QAAiB,KAAM,SAAiB,QAAOA,GAAe,IAAM,MAAQ,IAAK,IACjF,QAAoB,SAAU,MAAM,SAAiB,QAAOA,GAAe,IAAM,OAAQ,IACzF,QAAiB,KAAM,SAAiB,QAAOA,GAAe,IAAM,QAAS,GAC7EsJ,EAAO,OAASA,EAAO,MAAO,QAAoB,KAAM,KAAM,MAAO,IAL/C,IAOxBqB,EAAG,IA1BiB,IA6BxBA,EAAG,KAEL,QAAa,KAAkB,KAAM,CACnCtM,SAAS,SAAS,WAAM,QACtB,QAAa,KAAkB,CAAEwO,KAAM,MAAQ,CAC7CxO,SAAS,SAAS,WAAM,OACtBiL,EAAO,OAASA,EAAO,MAAO,QAAoB,MAAO,CAAE9M,MAAO,WAAa,EAC7E,QAAoB,KAAM,KAAM,aAChC,QAAoB,KAAM,KAAM,EAC9B,QAAoB,IAAK,CACvBoO,KAAM,wCACNC,OAAQ,SACRC,IAAK,uBACJ,aACH,QAAiB,8BAEnB,QAAiB,iBACjB,QAAoB,OACpB,QAAiB,qBACjB,QAAoB,OACpB,QAAiB,gBACjB,QAAoB,OACpB,QAAiB,oBACjB,QAAoB,OACpB,QAAiB,mBACjB,QAAoB,OACpB,QAAiB,oBACjB,QAAoB,OACpB,QAAiB,4BACjB,QAAoB,OACpB,QAAoB,OACpB,QAAoB,KAAM,KAAM,8BAChC,QAAiB,oBACjB,QAAoB,OACpB,QAAiB,qBACjB,QAAoB,OACpB,QAAiB,iBACjB,QAAoB,QAClB,KACJ,QAAa,KAAqB,CAAEtO,MAAO,eAlCrB,IAoCxBmO,EAAG,IAtCiB,IAyCxBA,EAAG,KAEL,QAAa,KAAkB,KAAM,CACnCtM,SAAS,SAAS,WAAM,QACtB,QAAa,KAAkB,KAAM,CACnCA,SAAS,SAAS,WAAM,QACtB,QAAa4L,GADS,IAGxBU,EAAG,IALiB,IAQxBA,EAAG,IAtHiB,IAyHxBA,EAAG,IA3HiB,IA8HxBA,EAAG,IAhIiB,IAmIxBA,EAAG,IArIiB,IAwIxBA,EAAG,IA9NiB,IAiOxBA,EAAG,GACF,EAAG,CAAC,eAjRe,IAmRxBA,EAAG,IArRiB,IAwRxBA,EAAG,GACF,EAAG,CAAC,QAAS,iBAx0BI,IA20BxBA,EAAG,GACF,EAAG,CAAC,SACT,CACA,IE9+CMoC,GAAc,GAEpB,M,6CCQA,UAAe,SAAc,CAE3BC,MAAO,CACLC,WAAY,MACZC,QAAO,KACPC,KAAM,CACJC,IAAG,OAGPC,OAAQ,CACNA,OAAQ,KACRC,SAAU,KACVC,SAAU,CAAEC,GAAE,OAEhBC,MAAO,CACLC,aAAc,U,eC3BZ,GAAa,CAAC,MAAO,MAAO,OAAQ,SAe1C,UAA4B,QAAiB,CAC3CxP,OAAQ,aACRC,OAAoB,QAAa,CAC/BwP,SAAU,CAAElB,KAAMmB,QAASvP,SAAS,GACpC7Z,IAAK,CAAE6Z,QAAS,GAChB5Z,IAAK,CAAE4Z,QAAS,MAChBwP,KAAM,CAAExP,QAAS,GACjByP,MAAO,CAAErB,KAAMmB,QAASvP,SAAS,GACjC0P,QAAS,CAAE1P,QAAS,GACpB2P,KAAM,CAAEvB,KAAMmB,QAASvP,SAAS,IAC/B,CACD,WAAc,CAAEA,QAAS,GACzB,eAAkB,CAAC,IAErB4P,MAAO,CAAC,qBACR3P,MAAK,SAACC,GCPR,IAAM1e,GAAQ,QAAY,EAAD,cACnBquB,GAAc,QAAIruB,EAAMA,OAExBsuB,GAAU,SAAI,GACdC,GAAQ,UAYRjQ,EAAQ,EAUd,SAASkQ,EAAIxuB,GACX,OAAIse,EAAM4P,QAAU,EACXluB,EAAMyuB,WAAWC,SAASpQ,EAAM4P,QAAS,KAE9C5P,EAAM6P,KACDnuB,EAAMyuB,WAAWC,SAAS,EAAG,KAE/B1uB,CACT,CAEA,IAAM2uB,EAAa,SAAC3uB,GAClB,MAAqB,kBAAVA,EACFA,EAEY,oBAAVA,EACFA,IAEFA,EAAM0kB,SAAS,KAAOkK,WAAW5uB,GAAS6uB,SAAS7uB,EAC5D,EAEM8uB,GAAW,QAAIH,EAAWrQ,EAAM3Z,MAChCoqB,GAAW,QAAIJ,EAAWrQ,EAAM1Z,MAChCoqB,GAAY,QAAIL,EAAWrQ,EAAM0P,OAEvC,SAASiB,EAASxK,GACZA,EAAMuG,SACRqD,EAAYruB,MAAQ6uB,SAAUpK,EAAMuG,OAA4BhrB,OAEpE,CAEA,SAASkvB,IACPZ,EAAQtuB,OAAQ,CAClB,CAEA,SAAS+F,EAAM/F,EAAOmvB,GACpB,OAAOhuB,KAAK4E,MAAM/F,EAAQmvB,GAAaA,CACzC,CAEA,IAAMC,GAAU,SAAS,WACvB,QAAIf,EAAYruB,MAAQ8uB,EAAS9uB,UAG7BquB,EAAYruB,MAAQ+uB,EAAS/uB,MAInC,IAEA,SAASqvB,EAAWrvB,GAClB,OAAKse,EAAM2P,OAGPjuB,EAAQ8uB,EAAS9uB,MACnBA,EAAQ8uB,EAAS9uB,MACRA,EAAQ+uB,EAAS/uB,QAC1BA,EAAQ+uB,EAAS/uB,OAEdA,EAAQgvB,EAAUhvB,QAAW,IAChCA,EAAQ+F,EAAM/F,EAAOgvB,EAAUhvB,QAE1BA,GAVEA,CAWX,CDkCA,OC/BA,SAAM,WAAM,OAAAse,EAAM3Z,GAAN,IAAW,SAAC2qB,GACtBR,EAAS9uB,MAAQ2uB,EAAWW,GAC5BjB,EAAYruB,MAAQqvB,EAAWhB,EAAYruB,MAC7C,KAEA,SAAM,WAAM,OAAAse,EAAM1Z,GAAN,IAAW,SAAC0qB,GACtBP,EAAS/uB,MAAQ2uB,EAAWW,GAC5BjB,EAAYruB,MAAQqvB,EAAWhB,EAAYruB,MAC7C,KAEA,SAAM,WAAM,OAAAse,EAAM0P,IAAN,IAAY,SAACsB,GACvBN,EAAUhvB,MAAQ2uB,EAAWW,EAC/B,KAEA,QAAMtvB,GAAO,SAACsvB,GACZjB,EAAYruB,MAAQqvB,EAAWC,EACjC,KAGA,QAAMf,GAAO,SAACvuB,GACRA,GACFA,EAAMuvB,OAEV,KAEA,QAAMlB,GAAa,SAACmB,EAAUC,GAC5B,IAAIL,EAAQpvB,MAIZ,OAAIse,EAAM2P,OACRI,EAAYruB,MAAQqvB,EAAWG,QAC/BxvB,EAAMA,MAAQquB,EAAYruB,aAG5BquB,EAAYruB,MAAQyvB,GARlBzvB,EAAMA,MAAQquB,EAAYruB,KAU9B,IDNO,SAACwpB,EAAUC,GAChB,OAAS6E,EAAQtuB,OAAUse,EAAMwP,WAO5B,WAAc,QAAoB,QAAS,CAC1C1jB,IAAK,EACLwiB,KAAM,SACNjoB,IAAKmqB,EAAS9uB,MACd4E,IAAKmqB,EAAS/uB,MACdguB,KAAMgB,EAAUhvB,MAChBA,MAAOquB,EAAYruB,MACnB0vB,SAAUT,EACVU,OAAQT,EACRU,QAAS,QACT1D,IAAKqC,EACL5R,MAAO,cACN,KAAM,GAAI,OAlBZ,WAAc,QAAoB,OAAQ,CACzCvS,IAAK,EACLkgB,QAASb,EAAO,KAAOA,EAAO,GAAK,SAAC0B,GAAgB,OAACmD,EAAQtuB,OAASsuB,EAAQtuB,KAA1B,GACpDksB,IAAK,UACLvP,MAAO,iBACN,QAAiB6R,EAAIH,EAAYruB,QAAS,KAcnD,CACA,IEpKM,GAAc,GAEpB,MCJA,IAAM,GAAa,CAAE2c,MAAO,kBACtB,GAAa,CAAEA,MAAO,YACtB,GAAa,CAAEA,MAAO,uBACtB,GAAa,CAAEA,MAAO,oBACtB,GAAa,CACjBvS,IAAK,EACLuS,MAAO,aAEH,GAAa,CAAEA,MAAO,uBACtB,GAAa,CACjBvS,IAAK,EACLuS,MAAO,cAgBT,UAA4B,QAAiB,CAC3C0B,OAAQ,iBACRC,OAAoB,QAAa,CAC/BuR,MAAO,CAAEjD,KAAMmB,QAASvP,SAAS,GACjCsR,QAAS,CAAElD,KAAMmB,QAASvP,SAAS,GACnCuR,aAAc,CAAEnD,KAAMmB,QAASvP,SAAS,IACvC,CACD,WAAc,CAACA,QAAS,IAAIne,KAAK,4BACjC,eAAkB,CAAC,IAErB+tB,MAAO,CAAC,qBACR3P,MAAK,SAACC,GC+HR,IAAMJ,EAAQ,EAORyN,GAAO,QAAY,EAAD,cAElBjqB,GAAO,QAAIiqB,EAAK/rB,MAAMgwB,eACtBhuB,GAAQ,QAAI+pB,EAAK/rB,MAAMiwB,WAAW,GAClC/tB,GAAM,QAAI6pB,EAAK/rB,MAAMkwB,WACrB9tB,GAAO,QAAI2pB,EAAK/rB,MAAMmwB,YACtB7tB,GAAS,QAAIypB,EAAK/rB,MAAMowB,cACxB5tB,GAAS,QAAIupB,EAAK/rB,MAAMqwB,cAKxBC,GAAO,QAAS,CACpB3P,IAAK,WAAM,OAAAve,EAAKpC,MAAQ,EAAb,EACXyiB,IAAK,SAACziB,GACJ,GAAIA,EACF,IAAK,IAAI2G,EAAI,EAAGA,EAAI,GAAIA,IACtB4pB,EAAU,aAGZ,IAAS5pB,EAAI,EAAGA,EAAI,GAAIA,IACtB6pB,EAAU,OAGhB,IAKIxmB,EAAS,CACblI,KAAMA,EACNE,MAAOA,EACPE,IAAKA,EACLE,KAAMA,EACNE,OAAQA,EACRE,OAAQA,GAKJiuB,GAAS,SAAS,WAAM,OAC5B3uB,KAAM,CAAE6C,IAAK,EAAGC,IAAK8rB,KACrB1uB,MAAO,CAAE2C,IAAK,EAAGC,IAAK,IACtB1C,IAAK,CAAEyC,IAAK,EAAGC,IAAK+rB,EAAa3uB,EAAMhC,MAAO8B,EAAK9B,QACnDoC,KAAM,CAAEuC,IAAK,EAAGC,IAAK,IACrBtC,OAAQ,CAAEqC,IAAK,EAAGC,IAAK,IACvBpC,OAAQ,CAAEmC,IAAK,EAAGC,IAAK,IANK,IASxBgsB,EAAgB,CAAC,SAAU,SAAU,OAAQ,MAAO,QAAS,QAEnE,SAASC,EAAYC,EAAYN,GAC/B,IAAMO,EAAQN,EAAOzwB,MAAM8wB,GAAMlsB,IAC3BD,EAAM8rB,EAAOzwB,MAAM8wB,GAAMnsB,IAE/B,GAAI6rB,EACF,GAAIxmB,EAAO8mB,GAAM9wB,MAAQ+wB,EACvB/mB,EAAO8mB,GAAM9wB,YACR,CACLgK,EAAO8mB,GAAM9wB,MAAQ2E,EACrB,IAAMqsB,EAAWJ,EAAMA,EAAMK,QAAQH,GAAQ,GACzCE,EACFH,EAAYG,EAAUR,GACJ,SAATM,GAAmBxS,EAAMwR,UAElCQ,EAAKtwB,OAASswB,EAAKtwB,MAEvB,MAEA,GAAIgK,EAAO8mB,GAAM9wB,MAAQ2E,EACvBqF,EAAO8mB,GAAM9wB,YACR,CACLgK,EAAO8mB,GAAM9wB,MAAQ+wB,EACrB,IAAMG,EAAWN,EAAMA,EAAMK,QAAQH,GAAQ,GACzCI,EACFL,EAAYK,EAAUV,GACJ,SAATM,GAAmBxS,EAAMwR,UAElCQ,EAAKtwB,OAASswB,EAAKtwB,MAEvB,CAIW,SAAT8wB,IACF1uB,EAAKpC,MAAQoC,EAAKpC,MAAQ,GAE9B,CAEA,IAAMmxB,GAAc,QAAS,CAC3BxQ,IAAG,WACD,GAAIrC,EAAMwR,QAAS,CACjB,IAAMsB,EAAIhvB,EAAKpC,MAAQ,GACvB,OAAa,IAANoxB,EAAU,GAAKA,CACxB,CACE,OAAOhvB,EAAKpC,KAEhB,EACAyiB,IAAG,SAACziB,GACEse,EAAMwR,QAEN1tB,EAAKpC,MADO,KAAVA,EACWswB,EAAKtwB,MAAQ,EAAI,GAEjBswB,EAAKtwB,MAAQA,EAAQA,EAAQ,GAG5CoC,EAAKpC,MAAQA,CAEjB,IAGF,SAASwwB,EAAUxwB,GACjB6wB,EAAY7wB,GAAO,EACrB,CAEA,SAASuwB,EAAUvwB,GACjB6wB,EAAY7wB,GAAO,EACrB,CAEA,SAAS2wB,EAAa3uB,EAAeF,GACnC,OAAO,IAAIzB,KAAKyB,EAAME,EAAO,GAAGkuB,SAClC,CAGA,SAASmB,EAAQtF,GAEf,OAAOA,EAAKuF,aACd,CAEA,SAASnD,EAAK1oB,GACZ,OAAOA,EAAEgpB,WAAWC,SAAS,EAAG,IAClC,CD1GA,OC6GA,QAAM,CAAC5sB,EAAME,EAAOE,EAAKE,EAAME,EAAQE,IAAS,WAC9CupB,EAAK/rB,MAAQ,IAAIK,KAAKyB,EAAK9B,MAAOgC,EAAMhC,MAAM,EAAGkC,EAAIlC,MAAOoC,EAAKpC,MAAOsC,EAAOtC,MAAOwC,EAAOxC,MAC/F,KAGA,QAAM,CAAC8B,EAAME,EAAOE,EAAKE,EAAME,EAAQE,IAAS,WAC1B,IAAhBR,EAAMhC,OAAekC,EAAIlC,MAAQ2wB,EAAa3uB,EAAMhC,MAAO8B,EAAK9B,SAClEkC,EAAIlC,MAAQ2wB,EAAa3uB,EAAMhC,MAAO8B,EAAK9B,OAE/C,KAGA,QAAM+rB,GAAM,WACVjqB,EAAK9B,MAAQ+rB,EAAK/rB,MAAMgwB,cACxBhuB,EAAMhC,MAAQ+rB,EAAK/rB,MAAMiwB,WAAW,EACpC/tB,EAAIlC,MAAQ+rB,EAAK/rB,MAAMkwB,UACvB9tB,EAAKpC,MAAQ+rB,EAAK/rB,MAAMmwB,WACxB7tB,EAAOtC,MAAQ+rB,EAAK/rB,MAAMowB,aAC1B5tB,EAAOxC,MAAQ+rB,EAAK/rB,MAAMqwB,YAC5B,IDhIO,SAAC7G,EAAUC,GAGhB,OAAQ,WAAc,QAAoB,MAAO,GAAY,EAC3D,QAAoB,MAAO,GAAY,EACrC,QAAoB,MAAO,GAAY,EACrC,QAAoB,SAAU,CAC5BhN,GAAI,eACJE,MAAO,iBACP2N,QAASb,EAAO,KAAOA,EAAO,GAAK,SAAC0B,GAAgB,OAACqF,EAAU,OAAX,IACnD,CACD/G,EAAO,MAAQA,EAAO,KAAM,QAAoB,OAAQ,CAAE9M,MAAO,qBAAuB,MAAO,KAC/F,QAAa,KAAmB,KAAM,CACpC6B,SAAS,SAAS,WAAM,OAAAiL,EAAO,MAAQA,EAAO,IAAM,EAClD,QAAiB,gBADK,IAGxBqB,EAAG,OAGP,QAAayG,GAAY,CACvBzD,SAAUxP,EAAMyR,aAChBtT,GAAI,YACJE,MAAO,gCACPhY,IAAK8rB,EAAOzwB,MAAM8B,KAAK6C,IACvBC,IAAK6rB,EAAOzwB,MAAM8B,KAAK8C,IACvBsmB,WAAYppB,EAAK9B,MACjB,sBAAuBypB,EAAO,KAAOA,EAAO,GAAK,SAAC0B,GAAgB,OAAC,EAAOnrB,MAAQmrB,CAAhB,IACjE,KAAM,EAAG,CAAC,WAAY,MAAO,MAAO,gBACvC,QAAoB,SAAU,CAC5B1O,GAAI,eACJE,MAAO,iBACP2N,QAASb,EAAO,KAAOA,EAAO,GAAK,SAAC0B,GAAgB,OAACoF,EAAU,OAAX,IACnD,EACD,QAAa,KAAmB,KAAM,CACpC/R,SAAS,SAAS,WAAM,OAAAiL,EAAO,MAAQA,EAAO,IAAM,EAClD,QAAiB,kBADK,IAGxBqB,EAAG,MAGPrB,EAAO,MAAQA,EAAO,KAAM,QAAoB,OAAQ,KAAM,MAAO,IACrEA,EAAO,MAAQA,EAAO,KAAM,QAAoB,OAAQ,KAAM,KAAM,IACpEA,EAAO,MAAQA,EAAO,KAAM,QAAoB,OAAQ,KAAM,MAAO,KACrE,QAAoB,SAAU,CAC5BhN,GAAI,gBACJE,MAAO,iBACP2N,QAASb,EAAO,KAAOA,EAAO,GAAK,SAAC0B,GAAgB,OAACqF,EAAU,QAAX,IACnD,CACD/G,EAAO,MAAQA,EAAO,KAAM,QAAoB,OAAQ,CAAE9M,MAAO,qBAAuB,MAAO,KAC/F,QAAa,KAAmB,KAAM,CACpC6B,SAAS,SAAS,WAAM,OAAAiL,EAAO,MAAQA,EAAO,IAAM,EAClD,QAAiB,gBADK,IAGxBqB,EAAG,OAGP,QAAayG,GAAY,CACvBzD,SAAUxP,EAAMyR,aAChBtT,GAAI,aACJE,MAAO,gCACPhY,IAAK8rB,EAAOzwB,MAAMgC,MAAM2C,IACxBC,IAAK6rB,EAAOzwB,MAAMgC,MAAM4C,IACxBupB,KAAM,GACNjD,WAAYlpB,EAAMhC,MAClB,sBAAuBypB,EAAO,KAAOA,EAAO,GAAK,SAAC0B,GAAgB,OAAC,EAAQnrB,MAAQmrB,CAAjB,IACjE,KAAM,EAAG,CAAC,WAAY,MAAO,MAAO,gBACvC,QAAoB,SAAU,CAC5B1O,GAAI,gBACJE,MAAO,iBACP2N,QAASb,EAAO,KAAOA,EAAO,GAAK,SAAC0B,GAAgB,OAACoF,EAAU,QAAX,IACnD,EACD,QAAa,KAAmB,KAAM,CACpC/R,SAAS,SAAS,WAAM,OAAAiL,EAAO,MAAQA,EAAO,IAAM,EAClD,QAAiB,kBADK,IAGxBqB,EAAG,MAGPrB,EAAO,MAAQA,EAAO,KAAM,QAAoB,OAAQ,KAAM,MAAO,IACrEA,EAAO,MAAQA,EAAO,KAAM,QAAoB,OAAQ,KAAM,KAAM,KACpE,QAAYD,EAAKgI,OAAQ,gBAAiB,CAAC,GAAG,WAAM,OAClD/H,EAAO,MAAQA,EAAO,KAAM,QAAoB,OAAQ,KAAM,MAAO,IADnB,KAGpD,QAAoB,SAAU,CAC5BhN,GAAI,cACJE,MAAO,iBACP2N,QAASb,EAAO,KAAOA,EAAO,GAAK,SAAC0B,GAAgB,OAACqF,EAAU,MAAX,IACnD,CACD/G,EAAO,MAAQA,EAAO,KAAM,QAAoB,OAAQ,CAAE9M,MAAO,qBAAuB,OAAQ,KAChG,QAAa,KAAmB,KAAM,CACpC6B,SAAS,SAAS,WAAM,OAAAiL,EAAO,MAAQA,EAAO,IAAM,EAClD,QAAiB,gBADK,IAGxBqB,EAAG,OAGP,QAAayG,GAAY,CACvBzD,SAAUxP,EAAMyR,aAChBtT,GAAI,WACJE,MAAO,gCACPhY,IAAK8rB,EAAOzwB,MAAMkC,IAAIyC,IACtBC,IAAK6rB,EAAOzwB,MAAMkC,IAAI0C,IACtBupB,KAAM,GACNjD,WAAYhpB,EAAIlC,MAChB,sBAAuBypB,EAAO,KAAOA,EAAO,GAAK,SAAC0B,GAAgB,OAAC,EAAMnrB,MAAQmrB,CAAf,IACjE,KAAM,EAAG,CAAC,WAAY,MAAO,MAAO,gBACvC,QAAoB,SAAU,CAC5B1O,GAAI,cACJE,MAAO,iBACP2N,QAASb,EAAO,KAAOA,EAAO,GAAK,SAAC0B,GAAgB,OAACoF,EAAU,MAAX,IACnD,EACD,QAAa,KAAmB,KAAM,CACpC/R,SAAS,SAAS,WAAM,OAAAiL,EAAO,MAAQA,EAAO,IAAM,EAClD,QAAiB,kBADK,IAGxBqB,EAAG,OAGP,QAAYtB,EAAKgI,OAAQ,aAAc,CAAC,GAAG,WAAM,OAC/C/H,EAAO,MAAQA,EAAO,KAAM,QAAoB,OAAQ,KAAM,MAAO,IADtB,KAGjD,QAAoB,OAAQ,GAAY,EACtC,QAAYD,EAAKgI,OAAQ,mBAE3B/H,EAAO,MAAQA,EAAO,KAAM,QAAoB,OAAQ,KAAM,MAAO,KACrE,QAAoB,SAAU,CAC5BhN,GAAI,eACJE,MAAO,iBACP2N,QAASb,EAAO,KAAOA,EAAO,GAAK,SAAC0B,GAAgB,OAACqF,EAAU,OAAX,IACnD,CACD/G,EAAO,MAAQA,EAAO,KAAM,QAAoB,OAAQ,CAAE9M,MAAO,qBAAuB,MAAO,KAC/F,QAAa,KAAmB,KAAM,CACpC6B,SAAS,SAAS,WAAM,OAAAiL,EAAO,MAAQA,EAAO,IAAM,EAClD,QAAiB,gBADK,IAGxBqB,EAAG,OAGP,QAAayG,GAAY,CACvBzD,SAAUxP,EAAMyR,aAChBtT,GAAI,YACJE,MAAO,gCACPhY,IAAK8rB,EAAOzwB,MAAMoC,KAAKuC,IACvBC,IAAK6rB,EAAOzwB,MAAMoC,KAAKwC,IACvBupB,KAAM,GACNjD,WAAYiG,EAAYnxB,MACxB,sBAAuBypB,EAAO,MAAQA,EAAO,IAAM,SAAC0B,GAAgB,OAAC,EAAcnrB,MAAQmrB,CAAvB,IACnE,KAAM,EAAG,CAAC,WAAY,MAAO,MAAO,gBACvC,QAAoB,SAAU,CAC5B1O,GAAI,eACJE,MAAO,iBACP2N,QAASb,EAAO,MAAQA,EAAO,IAAM,SAAC0B,GAAgB,OAACoF,EAAU,OAAX,IACrD,EACD,QAAa,KAAmB,KAAM,CACpC/R,SAAS,SAAS,WAAM,OAAAiL,EAAO,MAAQA,EAAO,IAAM,EAClD,QAAiB,kBADK,IAGxBqB,EAAG,MAGPrB,EAAO,MAAQA,EAAO,KAAM,QAAoB,OAAQ,KAAM,MAAO,IACrEA,EAAO,MAAQA,EAAO,KAAM,QAAoB,OAAQ,KAAM,KAAM,IACpEA,EAAO,MAAQA,EAAO,KAAM,QAAoB,OAAQ,KAAM,MAAO,KACrE,QAAoB,SAAU,CAC5BhN,GAAI,iBACJE,MAAO,iBACP2N,QAASb,EAAO,MAAQA,EAAO,IAAM,SAAC0B,GAAgB,OAACqF,EAAU,SAAX,IACrD,CACD/G,EAAO,MAAQA,EAAO,KAAM,QAAoB,OAAQ,CAAE9M,MAAO,qBAAuB,OAAQ,KAChG,QAAa,KAAmB,KAAM,CACpC6B,SAAS,SAAS,WAAM,OAAAiL,EAAO,MAAQA,EAAO,IAAM,EAClD,QAAiB,gBADK,IAGxBqB,EAAG,OAGP,QAAayG,GAAY,CACvBzD,SAAUxP,EAAMyR,aAChBtT,GAAI,cACJE,MAAO,gCACPhY,IAAK8rB,EAAOzwB,MAAMsC,OAAOqC,IACzBC,IAAK6rB,EAAOzwB,MAAMsC,OAAOsC,IACzBupB,KAAM,GACNjD,WAAY5oB,EAAOtC,MACnB,sBAAuBypB,EAAO,MAAQA,EAAO,IAAM,SAAC0B,GAAgB,OAAC,EAASnrB,MAAQmrB,CAAlB,IACnE,KAAM,EAAG,CAAC,WAAY,MAAO,MAAO,gBACvC,QAAoB,SAAU,CAC5B1O,GAAI,iBACJE,MAAO,iBACP2N,QAASb,EAAO,MAAQA,EAAO,IAAM,SAAC0B,GAAgB,OAACoF,EAAU,SAAX,IACrD,EACD,QAAa,KAAmB,KAAM,CACpC/R,SAAS,SAAS,WAAM,OAAAiL,EAAO,MAAQA,EAAO,IAAM,EAClD,QAAiB,kBADK,IAGxBqB,EAAG,MAGPrB,EAAO,MAAQA,EAAO,KAAM,QAAoB,OAAQ,KAAM,MAAO,IACrEA,EAAO,MAAQA,EAAO,KAAM,QAAoB,OAAQ,KAAM,KAAM,IACpEA,EAAO,MAAQA,EAAO,KAAM,QAAoB,OAAQ,KAAM,MAAO,KACrE,QAAoB,SAAU,CAC5BhN,GAAI,iBACJE,MAAO,iBACP2N,QAASb,EAAO,MAAQA,EAAO,IAAM,SAAC0B,GAAgB,OAACqF,EAAU,SAAX,IACrD,CACD/G,EAAO,MAAQA,EAAO,KAAM,QAAoB,OAAQ,CAAE9M,MAAO,qBAAuB,OAAQ,KAChG,QAAa,KAAmB,KAAM,CACpC6B,SAAS,SAAS,WAAM,OAAAiL,EAAO,MAAQA,EAAO,IAAM,EAClD,QAAiB,gBADK,IAGxBqB,EAAG,OAGP,QAAayG,GAAY,CACvBzD,SAAUxP,EAAMyR,aAChBtT,GAAI,cACJE,MAAO,gCACPhY,IAAK8rB,EAAOzwB,MAAMwC,OAAOmC,IACzBC,IAAK6rB,EAAOzwB,MAAMwC,OAAOoC,IACzBupB,KAAM,GACNjD,WAAY1oB,EAAOxC,MACnB,sBAAuBypB,EAAO,MAAQA,EAAO,IAAM,SAAC0B,GAAgB,OAAC,EAASnrB,MAAQmrB,CAAlB,IACnE,KAAM,EAAG,CAAC,WAAY,MAAO,MAAO,gBACvC,QAAoB,SAAU,CAC5B1O,GAAI,iBACJE,MAAO,iBACP2N,QAASb,EAAO,MAAQA,EAAO,IAAM,SAAC0B,GAAgB,OAACoF,EAAU,SAAX,IACrD,EACD,QAAa,KAAmB,KAAM,CACpC/R,SAAS,SAAS,WAAM,OAAAiL,EAAO,MAAQA,EAAO,IAAM,EAClD,QAAiB,kBADK,IAGxBqB,EAAG,QAIRxM,EAAa,UACT,WAAc,QAAoB,MAAO,GAAY,EACpD,QAAoB,SAAU,CAC5BzW,KAAM,SACN8U,OAAO,QAAgB,CAAC,mBAAoB,eAAgB,CAAE,mBAAoB2T,EAAKtwB,SACvFsqB,QAASb,EAAO,MAAQA,EAAO,IAAM,SAAC0B,GAAgB,OAACmF,EAAKtwB,OAAQ,CAAd,GACtD,aAAc,UACb,KAAM,IACT,QAAoB,SAAU,CAC5B6H,KAAM,SACN8U,OAAO,QAAgB,CAAC,mBAAoB,eAAgB,CAAE,oBAAqB2T,EAAKtwB,SACxFsqB,QAASb,EAAO,MAAQA,EAAO,IAAM,SAAC0B,GAAgB,OAACmF,EAAKtwB,OAAQ,CAAd,GACtD,aAAc,UACb,KAAM,OAEX,QAAoB,IAAI,MAE9B,QAAoB,MAAO,GAAY,EACrC,QAAYwpB,EAAKgI,OAAQ,aAE1BlT,EAAW,QACP,WAAc,QAAoB,MAAO,GAAY,EACpD,QAAoB,OAAQ,KAAM,WAAY,QAAiBxc,EAAK9B,OAAS,KAAM,QAAiBmuB,EAAKnsB,EAAMhC,QAAU,KAAM,QAAiBmuB,EAAKjsB,EAAIlC,QAAU,KAAM,QAAiBmuB,EAAK/rB,EAAKpC,QAAU,KAAM,QAAiBmuB,EAAK7rB,EAAOtC,QAAU,KAAM,QAAiBmuB,EAAK3rB,EAAOxC,QAAS,IACvS,QAAoB,OAAQ,KAAM,SAAU,QAAiBqxB,EAAQtF,EAAK/rB,QAAS,OAErF,QAAoB,IAAI,IAEhC,CACA,IE5cM,GAAc,GAEpB,M,eCaA,UAA4B,QAAiB,CAC3Cqe,OAAQ,iBACRC,MAAO,CACLmI,eAAgB,CAAEmG,KAAM6E,SAAUjT,QAAS,SAACkT,GAAwB,cACpExG,WAAY,CAAE0B,KAAMmB,QAASvP,SAAS,GACtCmT,SAAU,CAAE/E,KAAMmB,QAASvP,SAAS,GACpC0C,YAAa,CAAE1C,QAAS,SACxBkN,MAAO,CAAEkB,KAAMmB,QAASvP,SAAS,GACjCoP,MAAO,CAAEpP,QAAS,QAClBoT,WAAY,CAAEpT,QAAS,MACvBqT,QAAS,CAAErT,QAAS,UAEtB4P,MAAO,CAAC,QAAS,eAAgB,qBACjC3P,MAAK,SAACC,EAAc,G,IAAQoT,EAAM,OCiC9BxT,EAAQ,EAWRyT,EAAO,EAMPC,GAAa,QAAI1T,EAAM4M,YAAc5M,EAAMqT,UAC3CM,GAAa,QAAmB,MAChCC,GAAgB,QAAoC,MACpD5P,GAAqB,QAAmB,MACxC6P,GAAsB,SAAI,GAC1BC,GAAW,SAAI,GACfC,GAAe,SAAI,GACnBC,GAAc,QAA6B,MAE3CC,GAAY,SAAS,WACzB,MAAO,CACL,iBAAkBjU,EAAM4C,YACxB,aAAc5C,EAAMuT,QACpB,yBAA0BG,EAAWhyB,MAASse,EAAMoN,MAAQ,kBAAoB,qBAAwB,MACxG,kBAAmBsG,EAAWhyB,MAAQ,MAAQ,OAElD,IAEA,SAASwyB,EAAS/f,GAChB,MAAoB,kBAATA,EACFA,GAEF,QAAqBA,EAC9B,CAEA,SAASggB,IACP,IAAM/R,EAASuR,EAAWjyB,MACX,OAAX0gB,GAAmBA,EAAOlV,OAAS,GAIvC8S,EAAMmI,eAAe/F,GAAQ/E,MAAK,SAAA+W,GACnB,OAATA,GAA0C,IAAzBA,EAAKC,SAASnnB,OACjCgb,EAA6BkM,EAAKC,SAAS,IACzB,OAATD,GAA0C,IAAzBA,EAAKC,SAASnnB,QACxC8W,EAAmBtiB,MAAQ,gCAC3B+xB,EAAK,QAASzP,EAAmBtiB,QAEjCkyB,EAAclyB,MAAQ0yB,CAE1B,GACF,CAEA,SAASE,IACP,IAAMrE,EAAQ+D,EAAYtyB,MAC1BuuB,EAAMgB,OACR,CAEA,SAASsD,IACP,IAAMtE,EAAQ+D,EAAYtyB,MAC1BuuB,EAAMuE,MACR,CAEA,SAASC,IACHf,EAAWhyB,OACbyyB,IACAL,EAASpyB,OAAQ,EACjB4yB,KAEAZ,EAAWhyB,OAAQ,CAEvB,CAOA,SAASgzB,EAAcC,GACrBZ,EAAaryB,MAAQizB,CACvB,CAEA,SAASzM,EAA6BJ,GACpCyM,IACAK,IACAC,IACApB,EAAK,eAAgB3L,EACvB,CAEA,SAAS+M,IACPjB,EAAclyB,MAAQ,KACtBiyB,EAAWjyB,MAAQ,KACnBsiB,EAAmBtiB,MAAQ,IAC7B,CAEA,SAASkzB,IACPf,EAAoBnyB,OAAQ,EAC5B0jB,YAAW,WACTyO,EAAoBnyB,OAAQ,CAC9B,GAAG,IACL,CD1BA,OC4BA,SAAM,WAAM,OAAAse,EAAM4M,UAAN,IAAkB,SAAClrB,GAAqBgyB,EAAWhyB,MAAQA,CAAO,KAE9E,QAAMgyB,GAAY,SAAChyB,GAAmB,OAAA+xB,EAAK,oBAAqB/xB,EAA1B,KAEtC,QAAMiyB,GAAY,SAASxf,GACrB6P,EAAmBtiB,QACrBsiB,EAAmBtiB,MAAQ,QAExByS,GAAyB,kBAATA,GAAqC,IAAhBA,EAAKjH,UAC7C0mB,EAAclyB,MAAQ,MAEpByS,GAAwB,kBAATA,GACjB+T,EAA6B/T,EAEjC,ID1CO,SAAC+W,EAAUC,GAChB,IAAME,GAA+B,QAAkB,qBAGvD,OAAQ,WAAc,QAAoB,MAAO,CAC/ChN,MAAO,8BACPM,OAAO,QAAgBsV,EAAUvyB,QAChC,EACD,SAAgB,QAAa,KAAuB,CAClD2c,OAAO,QAAgB,CAAC,0BAA2BwV,EAAoBnyB,MAAQ,kBAAoB,GAAIwpB,EAAKkC,MAAQ,gCAAkC,KACtJR,WAAY+G,EAAWjyB,MACvB,sBAAuBypB,EAAO,KAAOA,EAAO,GAAK,SAAC0B,GAAgB,OAAC,EAAanrB,MAAQmrB,CAAtB,GAClEiI,MAAOlB,EAAclyB,MAAQkyB,EAAclyB,MAAM2yB,SAAW,GAC5D,aAAcH,EACd,WAAYhJ,EAAKqI,QACjBzG,MAAO,oBACPV,QAASlB,EAAKkC,MAAQ,UAAY,UAClC,eAAgB,GAChB2H,KAAM,GACNztB,MAAO4jB,EAAKtI,YACZoS,QAAS,WAAO,EAChBC,UAAW,EACT,QAAUd,EAA+B,CAAC,UAC1ChJ,EAAO,KAAOA,EAAO,IAAK,SAAU,SAAC0B,GAAgB,OAAC+G,EAAclyB,MAAQ,IAAvB,GAA8B,CAAC,SACpFypB,EAAO,KAAOA,EAAO,IAAK,SAAe,WAAO,GAAG,CAAC,WAEtD,iBAAkBnH,EAAmBtiB,MACrC,iBAAkB4yB,EAClB,mBAAoBnJ,EAAO,KAAOA,EAAO,GAAK,SAAC0B,GAAgB,OAAC6H,EAAc7H,EAAf,GAC/DyE,QAAS,cACT1D,IAAKoG,EACLkB,KAAMpB,EAASpyB,MACf,gBAAiBypB,EAAO,KAAOA,EAAO,GAAK,SAAC0B,GAAgB,OAACiH,EAASpyB,MAAQmrB,CAAlB,IAC3D,CACDsI,QAAQ,SAAS,WAAM,QACrB,QAAa9J,EAA8B,CACzChN,MAAO,wBACP6N,KAAM,mBACNG,KAAMqH,EAAWhyB,MAAQ,KAAOwpB,EAAKoI,WACrChsB,MAAO,OACP0kB,QAASyI,GACR,KAAM,EAAG,CAAC,SAPQ,IASvBjI,EAAG,GACF,EAAG,CAAC,QAAS,aAAc,QAAS,WAAY,UAAW,QAAS,iBAAkB,SAAU,CACjG,CAAC,KAAQkH,EAAWhyB,UAEtB,SAAgB,QAAa2pB,EAA8B,CACzDhN,MAAO,wBACP6N,KAAM,mBACNG,KAAMqH,EAAWhyB,MAAQ,KAAOwpB,EAAKoI,WACrChsB,MAAO,OACP0kB,SAAS,QAAeyI,EAAc,CAAC,aACtC,KAAM,EAAG,CAAC,SAAU,CACrB,CAAC,MAASf,EAAWhyB,QAAUwpB,EAAKmI,aAErC,EACL,CACA,IExMM,GAAc,GAEpB,M,eCLM,GAAa,CCFnB,MAQ2DlV,GAAG,8BDFxD,GAAa,CCNnB,MAoB0CA,GAAG,yBDVvC,GAAa,CCsBLA,GAAG,uBDrBX,GAAa,CCyBVA,GAAG,6BDxBN,GAAa,CC0BRA,GAAG,kBDzBR,GAAa,CC2BHE,MAAM,cDzBf,SAAStK,GAAOmX,EAAUC,EAAYiK,EAAYC,EAAYC,EAAWC,G,QAExEhK,GAAyB,QAAkB,eAGjD,OAAQ,WCnBR,QA+DM,OA/DDpN,GAAG,+BAAgCQ,OAD1C,QACiDsI,EAAAA,UDsB5C,CCnBWuO,EAAAA,QAAUC,EAAAA,cAAiBC,EAAAA,kBDqBlC,WCrBL,QAEM,OANV,MAI4DvX,GAAG,wBAAyB,QAAK,+BAAEwX,EAAAA,MAAM,QAAR,IDyBlF,ECxBH,QAAmD,MAA1CruB,MAAOA,EAAAA,MAAO+kB,KAAK,MD4BvB,CCjCb,kBAKyC,WAAS,qBALlD,QAKyC,cAAS,IALlD,KDsCa,EAAG,CAAC,cCtCjB,gBAQgBmJ,EAAAA,QAAUC,EAAAA,eAAiBG,EAAAA,iBDkClC,WClCL,QA0BM,MA1BN,GA0BM,EAzBJ,QASe,GARZ,UAASC,EAAAA,SAAW,WAAa,YACjC,WAAQ,+BAAEA,EAAAA,UAAYA,EAAAA,QAAd,GACRvuB,MAAOA,EAAAA,MACP,cAAaA,EAAAA,MACd,eAAa,aACb,mBAAiB,MACjB,iBAAe,MACf,UAAQ,MDmCH,KAAM,EAAG,CAAC,UAAW,QAAS,iBChCzBkuB,EAAAA,QAAUC,EAAAA,eDkCb,WClCT,QAaM,MAbN,GAaM,EAZJ,QAUc,GATX,WAAQ,+BAAEK,EAAAA,aAAeA,EAAAA,WAAjB,GACR,UAASA,EAAAA,YAAc,qBAAuB,sBAC9CxuB,MAAOA,EAAAA,MACP,cAAaA,EAAAA,MACd,eAAa,kBACb,mBAAiB,MACjB,iBAAe,MACf,UAAQ,MDmCC,KAAM,EAAG,CAAC,UAAW,QAAS,iBChCzC,QAA+E,OAA/E,IAA+E,QAA7CwuB,EAAAA,YAAc,UAAY,WAAf,OAhCrD,mCAoCI,QAyBM,MAzBN,GAyBM,EAvBJ,QAIM,MAJN,GAIM,GD8BH,SAAW,ICjCZ,QAEM,WAzCd,QAuC2BC,EAAAA,OAvC3B,SAuCoBC,GDkCV,OAAQ,WClCV,QAEM,OAFN,QAEM,CAFqBlqB,IAAKkqB,EAvCxC,YAuCqD9uB,EAAAA,QAAQ8uB,GAAG,CAAG3X,MAAM,SAAM,EACrE,QAAwD,OAAxD,IAAwD,QAA3B4X,EAAAA,YAAYD,IAAG,IDsCzC,GACL,IAAI,SCnCN,QAgBW,MAfTpI,IAAI,SACJ,kBA9CR,WA+CiBlsB,EAAAA,MA/CjB,qDA+CiBA,EAAK,OA/CtB,GAgDS4E,IAAQ,QAAHA,EAAAA,EAAAA,WAAG,QAAIyvB,EAAAA,MAAMA,EAAAA,MAAM7oB,OAAS,GACjC7G,IAAQ,QAAHA,EAAAA,EAAAA,WAAG,QAAI0vB,EAAAA,MAAM,GAClB,aAAY,GACbzuB,MAAM,QACN,cAAY,QACZ,mBAAiB,QACjB,cAAY,OACZ,aAAW,IACVooB,KAAMA,EAAAA,KACN,eAAYwG,EAAAA,iBAAkB,SAC9BC,MAAOD,EAAAA,gBAAkBE,EAAAA,WAAQvN,GDuCjC,KAAM,EAAG,CAAC,aAAc,MAAO,MAAO,OAAQ,aAAc,aAEhE,EACL,CE/FA,kBAOE,WAAYwN,QAAA,IAAAA,IAAAA,EAAA,IACVxmB,KAAKwmB,KAAOA,EACZxmB,KAAKymB,QAAUzzB,KAAKL,IAAI6zB,EAC1B,CA0EF,OAxEU,YAAA7zB,IAAR,SAAY6I,GAEV,OAAU,IAANA,EACK,EAEQ,IAAbwE,KAAKwmB,KACAxzB,KAAK0zB,MAAMlrB,GAEH,GAAbwE,KAAKwmB,KACAxzB,KAAK2zB,KAAKnrB,GAEfwE,KAAKwmB,MAAQxzB,KAAK4zB,EACb5zB,KAAKL,IAAI6I,GAEXxI,KAAKL,IAAI6I,GAAKwE,KAAKymB,OAC5B,EAGO,YAAAI,SAAP,SAAgBpwB,EAAayvB,QAAA,IAAAA,IAAAA,GAAA,GAC3B,IAAMY,EAAY,IAAKC,MAAMtwB,EAAM,GAAIuwB,KAAK,GAAGtuB,KAAI,SAACikB,EAAGnkB,GAAM,OAACA,EAAE,CAAH,IACvDyuB,EAAWH,EAAUpuB,KAAI,SAAC7G,GAAU,OAACA,CAAD,IAAQq1B,UAC5CC,EAAMF,EAASG,OAAO,CAAC,IAAIA,OAAON,GACxC,OAAIZ,EACKiB,EAEAnnB,KAAKqnB,gBAAgBF,EAEhC,EAGQ,YAAAG,iBAAR,SAAyCz1B,GAAzC,WAEE,GAAIk1B,MAAMQ,QAAQ11B,GAChB,OAAOA,EAAM6G,KAAI,SAACmE,GAAM,SAAKyqB,iBAAiBzqB,EAAtB,IAE1B,IACI2qB,EADEC,EAAWz0B,KAAKiM,IAAIpN,GAQ1B,OAJE21B,EADEC,EAAW,EACPz0B,KAAKgI,KAAKnJ,GAASmB,KAAK00B,IAAI1nB,KAAKwmB,KAAMiB,GAAYznB,KAAKwmB,KAExD30B,EAED21B,CACT,EAEU,YAAAG,UAAV,SAAoC91B,GAApC,WAEE,GAAIk1B,MAAMQ,QAAQ11B,GAChB,OAAOA,EAAM6G,KAAI,SAACmE,GAAM,SAAK8qB,UAAU9qB,EAAf,IAG1B,IACI2qB,EADEC,EAAWz0B,KAAKiM,IAAIpN,GAQ1B,OAJE21B,EADEC,EAAW,EACPz0B,KAAKgI,KAAKnJ,IAAUmO,KAAKrN,IAAI80B,GAAY,GAEzC51B,EAED21B,CACT,EAGO,YAAAH,gBAAP,SAAuCx1B,GACrC,OAAOmO,KAAKsnB,iBAAiBz1B,EAC/B,EAEO,YAAA+1B,cAAP,SAAqC/1B,GACnC,OAAOmO,KAAK2nB,UAAU91B,EACxB,EAEF,EApFA,GAuFO,SAASg2B,GAAcC,GAC5B,IAAMC,EAAOD,EAAMpvB,KAAI,SAAC7G,GAAU,OAACA,CAAD,IAAQq1B,UAC1C,OAAOa,EAAKX,OAAO,CAAC,IAAIA,OAAOU,EACjC,CAGO,SAASE,GAASC,EAAeC,EAAc3wB,GAEpD,IADA,IAAMiwB,EAAgB,GACbhvB,EAAIyvB,EAAOzvB,GAAK0vB,EAAM1vB,GAAKjB,EAClCiwB,EAAInS,KAAK7c,GAEX,OAAOgvB,CACT,CAEO,SAASW,GAAaF,EAAeC,EAAc3wB,GACxD,IAAMuwB,EAAQE,GAASC,EAAOC,EAAM3wB,GACpC,OAAOswB,GAAcC,EACvB,CDjCA,IAAMM,GAAS,IAAIC,GAAwB,IAE3C,UAAe,QAAgB,CAC7B3uB,KAAM,kBAEN4uB,WAAY,CACV,WAAYC,GAAA,GAGdtI,MAAO,CAAC,oBAAqB,SAAU,SAEvC9P,MAAO,CAEL4M,WAAY,CACV0B,KAAMtiB,OACNkU,QAAS,GAEXmY,SAAU,CACR/J,KAAMtiB,OACNkU,QAAS,GAEXoY,OAAQ,CACNhK,KAAMmB,QACNvP,SAAS,GAGX5Z,IAAK,CACHgoB,KAAMtiB,OACNkU,QAAS,MAGX7Z,IAAK,CACHioB,KAAMtiB,OACNkU,QAAS,MAGX5Y,MAAO,CACLgnB,KAAMvD,OACN7K,QAAS,SAEXqY,YAAa,CACXjK,KAAMmB,QACNvP,SAAS,GAGXsV,OAAQ,CACNlH,KAAMmB,QACNvP,SAAS,GAEXuV,aAAc,CACZnH,KAAMmB,QACNvP,SAAS,GAEXwV,gBAAiB,CACfpH,KAAMmB,QACNvP,SAAS,GAEX0V,eAAgB,CACdtH,KAAMmB,QACNvP,SAAS,IAKbsY,QAAO,WAAP,WAGQC,EAAYnS,SAASoS,eAAe,6BAC1C,GAAID,EAAW,CAEb,IAAMxI,EAAQwI,EAAUnR,cAAc,yBACtC,GAAI2I,EAAO,CAET,IAAM3f,EAAS2f,EAAM1f,aAErBkoB,EAAU9Z,MAAMga,YAAY,oBAAqB,UAAGroB,EAAM,MAC5D,CACF,CAIA,IAAMsoB,EAAiB,IAAIC,gBAAe,SAACC,G,YACzC,IAAqB,eAAAA,GAAO,8BAAE,CAAd,QAAX,IAEGC,EAAQzS,SAASgB,cAAc,mBAC/B,EAAYhB,SAASoS,eAAe,gCAC1C,GAAI,EAAW,CACb,IAAMzI,EAAQ,EAAU3I,cAAc,wBAChC0R,EAAgB1S,SAASgB,cAAc,mBAEvC2R,EAAM3S,SAASgB,cAAc,8BACnC,GAAIyR,GAAS,EAAW,CACtB,IAAMG,EAAIH,EAAMI,YAChB,EAAUxa,MAAMga,YAAY,gBAAiB,UAAGO,EAAC,MACnD,CACIF,GAAiB/I,GAASgJ,GAC5BA,EAAIta,MAAMga,YAAY,oBAAqB,UAAG1I,EAAM1f,aAAY,OAG9D,EAAKilB,QAAU,EACjB,EAAU4D,UAAUjtB,IAAI,SAExB,EAAUitB,UAAUC,OAAO,QAE/B,CASF,C,kGACF,IACAT,EAAeU,QAAQhT,SAASoS,eAAe,gCAEjD,EAIAa,KAAI,WACF,MAAO,CAELA,KAAM,CAAC,IAAK,IAAK,KACjBC,OAAQvB,GACRlC,MAAOkC,GAAOvB,SAAS7mB,KAAKwoB,UAAUxsB,QAAO,SAAAa,GAAK,OAAAA,EAAI,CAAJ,IAClD+sB,QAASzB,GAAa,EAAGn1B,KAAK00B,IAAI,GAAG1nB,KAAKwoB,UAAW,GAAG9vB,KAAI,SAACytB,GAAQ,OAAAiC,GAAOR,cAAczB,EAArB,IACrEE,iBAAiB,EAErB,EAEAwD,QAAS,CAGPzD,YAAW,SAACv0B,GACV,GAAc,IAAVA,EAAa,MAAO,QACxB,IAAMi4B,EAAM9pB,KAAKimB,aAAe,EAAI,EACpC,OAAQ6D,EAAM1B,GAAOf,gBAAgBx1B,IAAQyuB,WAAa,GAC5D,EAEAjpB,QAAO,SAAC8uB,G,QACA3vB,EAAa,QAAP,EAAAwJ,KAAKxJ,WAAE,QAAKwJ,KAAKkmB,MAAM,GAC7BzvB,EAAa,QAAP,EAAAuJ,KAAKvJ,WAAE,QAAKuJ,KAAKkmB,MAAMlmB,KAAKkmB,MAAM7oB,OAAS,GACjD0sB,GAAO5D,EAAM3vB,IAAQC,EAAMD,GAAO,IACxC,MAAO,CACLsY,MAAO,CACLiZ,KAAMgC,EAAM,KAGlB,GAIFC,SAAU,CAER5S,QAAO,WACL,MAAO,CACL,UAAWpX,KAAKvI,MAEpB,EAEAuuB,SAAU,CACRxT,IAAG,WAED,OADA9f,QAAQC,IAAI,oBAAoBqN,KAAKyoB,QAC9BzoB,KAAKyoB,MACd,EACAnU,IAAG,SAAC6R,GACFzzB,QAAQC,IAAI,oBAAoBwzB,GAChCnmB,KAAK8lB,MAAM,SAAUK,EACvB,GAIFI,MAAK,WAAL,WACQA,EAAgC,CAAC,EAOvC,OANAvmB,KAAKkmB,MAAM9pB,SAAQ,SAACvK,GAClB,IAAMi4B,EAAM,EAAK7D,aAAe,EAAI,EACpCM,EAAM10B,GAAmB,IAAVA,EAAc,IAAMi4B,EAAM1B,GAAOf,gBAAgBx1B,IAAQyuB,UAC1E,IAGOiG,CACT,EAEA1G,KAAI,WACF,IAAMsG,EAAMnzB,KAAKiM,IAAIe,KAAKnO,QAAU,EAAI,EAAI,GAC5C,OAAOs0B,CACT,EAEAt0B,MAAO,CACL2gB,IAAG,WACD,OAAOxf,KAAKiM,IAAImpB,GAAOR,cAAc5nB,KAAK+c,YAC5C,EAEAzI,IAAG,SAAC6R,GACF,IAAMlnB,EAAMmpB,GAAOf,gBAAgBlB,GAC7BnrB,EAAOgF,KAAKimB,aAAe,EAAI,EACrCjmB,KAAK8lB,MAAM,oBAAqB9qB,EAAOiE,EACzC,GAGFgnB,YAAa,CACXzT,IAAG,WACD,OAAOxS,KAAK+c,WAAa,CAC3B,EACAzI,IAAG,SAAC2V,GACF,IAAM9D,EAAMiC,GAAOf,gBAAgBrnB,KAAKnO,OACxCmO,KAAK8lB,MAAM,oBAAqBmE,GAAM9D,EAAMA,EAC9C,M,eEtRN,MAAM,IAA2B,QAAgB,GAAQ,CAAC,CAAC,SAASjiB,MAEpE,MCHO,SAASgmB,GAAmB9c,EAAuBsU,QAAA,IAAAA,IAAAA,GAAA,GACxDhvB,QAAQC,IAAI,sBACZ,IAAMw3B,GAAY,QAAI,GAChBC,GAAc,SAAI,GAElBtP,EAAO,WAAQsP,EAAYv4B,OAAQ,CAAM,EAEzC8lB,EAAQ,WAAQyS,EAAYv4B,OAAQ,CAAO,EAE3Cw4B,EAAa,WAAQD,EAAYv4B,OAASu4B,EAAYv4B,KAAO,EAGnE,SAASy4B,EAASC,GAChBJ,EAAUt4B,MAAQ04B,CACpB,CAgCA,OA7BAnd,EAAMG,eAAeC,MAAK,YACxB,QAAM2c,GAAW,SAACK,GAChBpd,EAAM4I,aAAawU,EACrB,KAEA,QAAMJ,GAAa,SAACK,GAClBrd,EAAM2I,aAAa0U,EACrB,IACArd,EAAM4I,aAAamU,EAAUt4B,OAC7Bub,EAAM2I,aAAaqU,EAAYv4B,MACjC,IAGI6vB,KACF,QAAMyI,GAAW,SAACK,GAChB93B,QAAQC,IAAI,uBAAwB63B,EACtC,KACA,QAAMJ,GAAa,SAACK,GAClB/3B,QAAQC,IAAI,oBAAqB83B,EACnC,KAUK,CACL3P,KAAI,EACJnD,MAAK,EACL0S,WAAU,EACVC,SAAQ,EACRF,YAAW,EACXD,UAAS,EAGb,CC1DA,IAAM,GAAa,CAAE7b,GAAI,iBACnB,GAAa,CAAEA,GAAI,iBACnB,GAAa,CACjBrS,IAAK,EACLqS,GAAI,wBAEA,GAAa,CACjBrS,IAAK,EACLqS,GAAI,cCoTAoc,GAAW,EDzRjB,UAA4B,QAAiB,CAC3Cxa,OAAQ,eACRC,OAAoB,QAAa,CAC/B/C,MAAO,CAAC,EACR3V,MAAO,CAAE4Y,QAAS,SAClB6N,SAAU,CAAE7N,QAAS,KACrB2N,YAAa,CAAE3N,QAAS,GACxB4N,UAAW,CAAEQ,KAAMmB,QAASvP,SAAS,GACrCsa,SAAU,CAAElM,KAAMmB,QAASvP,SAAS,GACpCua,UAAW,CAAEva,QAAS,KACrB,CACD,SAAW,SAAEoO,KAAMmB,SAAY,CAACvP,SAAS,EAAOwa,UAAU,IAC1D,iBAAoB,CAAC,IAEvB5K,OAAoB,QAAa,CAAC,QAAS,kBAAmB,CAAC,mBAC/D3P,MAAK,SAACC,EAAc,G,IAAQoT,EAAM,OCmPlClsB,EAQE,EAWH,MAlBCymB,EAOE,EAWH,SAjBCF,EAME,EAWH,YAhBC5Q,EAKE,EAWH,MAfCud,EAIE,EAWH,SAdCC,EAGE,EAWH,UAbCE,EAEE,EAWH,cAZC7M,EACE,EAWH,UAGK3K,GAAU,QAAoB,EAAC,WAG/BsQ,EAAO,EAEPmH,GAAkB,SAAI,GACtBC,GAAY,SAAI,GAEhB,EAAuCd,GAAmB9c,GAAO,GAA/Dgd,EAAW,cAAED,EAAS,YAAEG,EAAQ,WAOxC,SAASxK,EAAMqG,GACb,OAAOnzB,KAAKwD,IAAIxD,KAAKyD,IAAI0vB,EAAKuE,IAAWxM,EAC3C,CARAoM,EAAStM,GAEToM,EAAYv4B,MAAQyhB,EAAQzhB,OAC5B,QAAMyhB,GAAS,SAACzW,GAAOutB,EAAYv4B,MAAQgL,CAAE,KAC7C,QAAMutB,GAAa,SAACvtB,GAAOyW,EAAQzhB,MAAQgL,CAAE,IAM7C,IAAMouB,GAAe,QAAS,CAC5BzY,IAAK,WACH,GAAIwY,EAAUn5B,MAAO,CACnB,IAAMmJ,EAAOhI,KAAKgI,KAAKmvB,EAAUt4B,OACjC,OAAOmJ,EAAOhI,KAAKwD,IAAI,GAAIwE,EAAOmvB,EAAUt4B,MAC9C,CACA,OAAOs4B,EAAUt4B,KACnB,EACAyiB,IAAK,SAASziB,GACZs4B,EAAUt4B,MAAQmB,KAAKgI,KAAKnJ,GAASiuB,EAAM9sB,KAAKiM,IAAIpN,GACtD,IAGF,SAASq5B,IACPD,EAAap5B,OAASo5B,EAAap5B,KACrC,CAOA,SAASs5B,IACP,IAAMnwB,EAAOhI,KAAKgI,KAAKiwB,EAAap5B,OAC9BoN,EAAMjM,KAAKiM,IAAIgsB,EAAap5B,OAC5B24B,EAAUvrB,EAAM2rB,EACtBK,EAAap5B,MAAQmJ,EAAO8kB,EAAM0K,EACpC,CACA,SAASY,IACP,IAAMpwB,EAAOhI,KAAKgI,KAAKiwB,EAAap5B,OAC9BoN,EAAMjM,KAAKiM,IAAIgsB,EAAap5B,OAC5B24B,EAAUvrB,EAAM2rB,EACtBK,EAAap5B,MAAQmJ,EAAO8kB,EAAM0K,EACpC,CAIA,SAASa,IACPL,EAAUn5B,OAAQ,EAClB,IAAMmJ,EAAOhI,KAAKgI,KAAKiwB,EAAap5B,OACpC,GAAImJ,EAAO,EACTiwB,EAAap5B,OAASmB,KAAKwD,IAAIy0B,EAAap5B,MAAO,OADrD,CAIA,IAAMoN,EAAMjM,KAAKiM,IAAIgsB,EAAap5B,OAC9By5B,EAASt4B,KAAKyB,MAAMzB,KAAK0zB,MAAMznB,IACnCqsB,GAAUtwB,EAAOhI,KAAK0zB,MAAMkE,GAC5BK,EAAap5B,MAAQmJ,EAAO8kB,EAAM9sB,KAAK00B,IAAI,GAAI10B,KAAKiM,IAAIqsB,IAJxD,CAKF,CAGA,SAASC,IACPP,EAAUn5B,OAAQ,EAClB,IAAMmJ,EAAOhI,KAAKgI,KAAKiwB,EAAap5B,OACpC,GAAImJ,EAAO,EACTiwB,EAAap5B,OAASmB,KAAKyD,IAAIw0B,EAAap5B,OAAO,OADrD,CAIA,IAAMoN,EAAMjM,KAAKiM,IAAIgsB,EAAap5B,OAC9By5B,EAASt4B,KAAKyB,MAAMzB,KAAK0zB,MAAMznB,IACnCqsB,GAAUtwB,EAAOhI,KAAK0zB,MAAMkE,GAC5BK,EAAap5B,MAAQmJ,EAAO8kB,EAAM9sB,KAAK00B,IAAI,GAAI10B,KAAKiM,IAAIqsB,IAJxD,CAKF,CAEQ,IAAApZ,GAAc,UAAY,UAC5BgF,GAAS,SAAU,WAAM,OAAAhF,IAAa,IAAAD,sBAAb,IAEzBuZ,GAAoB,SAAI,GAC9B,SAASC,IAEHV,EAAgBl5B,OAAS25B,EAAkB35B,MAC7Ck5B,EAAgBl5B,OAAQ,EAG1B25B,EAAkB35B,MAAQk5B,EAAgBl5B,KAC5C,CD3PA,OAAO,SAACwpB,EAAUC,GAChB,IAAMI,GAAyB,QAAkB,eAC3CgQ,GAA8B,QAAkB,oBAItD,OAAQ,WAAc,QAAoB,MAAO,GAAY,EAC3D,QAAoB,MAAO,GAAY,CACrCZ,IACK,WAAc,QAAapP,EAAwB,CAClDzf,IAAK,EACLqS,GAAI,gBACJ,UAAW,cACX8P,WAAY9C,EAAO,KAAOA,EAAO,GACnC,WACE+P,IACAjB,EAAYv4B,OAAQ,CACtB,GAEE4F,MAAOA,EACP,cAAeA,EACf,eAAgBwzB,EAAap5B,MAAQ,EAAI,iBAAmB,UAC5D,mBAAoB,MACpB,iBAAkB,MAClB85B,OAAQ,KACR,gBAAiBzU,EAAOrlB,OACvB,KAAM,EAAG,CAAC,eAAgB,mBAC7B,QAAoB,IAAI,GAC5Bi5B,IACK,WAAc,QAAapP,EAAwB,CAClDzf,IAAK,EACLqS,GAAI,gBACJ,UAAW,eACX8P,WAAY9C,EAAO,KAAOA,EAAO,GACnC,YACO,QAAO8O,GAGVmB,IAFAnB,EAAYv4B,OAAQ,CAIxB,GAEE4F,MAAOA,EACP,cAAeA,EACf,eAAgBwzB,EAAap5B,MAAQ,EAAI,SAAW,UACpD,mBAAoB,MACpB,iBAAkB,MAClB85B,OAAQ,KACR,gBAAiBzU,EAAOrlB,OACvB,KAAM,EAAG,CAAC,eAAgB,mBAC7B,QAAoB,IAAI,IAC5B,QAAa6pB,EAAwB,CACnC0C,WAAY9C,EAAO,KAAOA,EAAO,GAAK,WACpC4P,GACF,GACA,UAAWD,EAAap5B,MAAQ,EAAI,qBAAuB,sBAC3D4F,MAAOA,EACP,cAAeA,EACf,eAAgBwzB,EAAap5B,MAAQ,EAAI,oBAAsB,sBAC/D,mBAAoB,MACpB,iBAAkB,MAClB,gBAAiBqlB,EAAOrlB,MACxB,UAAW,MACV,KAAM,EAAG,CAAC,UAAW,eAAgB,kBACxC,QAAa6pB,EAAwB,CACnCpN,GAAI,kBACJ,WAAY,QAAO8b,GAAwB,QAAT,OAClChM,WAAY9C,EAAO,KAAOA,EAAO,GAC/B,WACE8O,EAAYv4B,QAAS,QAAOu4B,EAC9B,GAEF3yB,MAAOA,EACP,cAAeA,EACf,eAAgB,aAChB,mBAAoB,MACpB,iBAAkB,MAClBk0B,OAAQ,KACR,gBAAiBzU,EAAOrlB,OACvB,KAAM,EAAG,CAAC,UAAW,iBACtBi5B,GAmBE,QAAoB,IAAI,KAlBvB,WAAc,QAAapP,EAAwB,CAClDzf,IAAK,EACLqS,GAAI,YACJ,UAAW,cACX8P,WAAY9C,EAAO,KAAOA,EAAO,GACnC,WACE8P,IACAhB,EAAYv4B,OAAQ,CACtB,GAEE4F,MAAOA,EACP,cAAeA,EACf,eAAgB,oBAAamzB,EAAS,KACtC,mBAAoB,MACpB,iBAAkB,MAClBe,OAAQ,KACR,gBAAiBzU,EAAOrlB,OACvB,KAAM,EAAG,CAAC,eAAgB,kBAE/Bi5B,GAmBE,QAAoB,IAAI,KAlBvB,WAAc,QAAapP,EAAwB,CAClDzf,IAAK,EACLqS,GAAI,WACJ,UAAW,YACX8P,WAAY9C,EAAO,KAAOA,EAAO,GACnC,WACE6P,IACAf,EAAYv4B,OAAQ,CACtB,GAEE4F,MAAOA,EACP,cAAeA,EACf,eAAgB,mBAAYmzB,EAAS,KACrC,mBAAoB,MACpB,iBAAkB,MAClBe,OAAQ,KACR,gBAAiBzU,EAAOrlB,OACvB,KAAM,EAAG,CAAC,eAAgB,mBAEjC,QAAa6pB,EAAwB,CACnCpN,GAAI,QACJ,UAAW,SACX8P,WAAY9C,EAAO,KAAOA,EAAO,GAC/B,WACE2P,EAAap5B,MAAQ,IACrBu4B,EAAYv4B,OAAQ,EACpBm5B,EAAUn5B,OAAQ,EAClB+xB,EAAK,QACP,GAEFnsB,MAAOA,EACP,cAAeA,EACf,eAAgB,QAChB,mBAAoB,MACpB,iBAAkB,MAClBk0B,OAAQ,KACR,gBAAiBzU,EAAOrlB,OACvB,KAAM,EAAG,CAAC,iBACXosB,GA0DE,QAAoB,IAAI,KAzDvB,WAAc,QAAa,KAAqB,CAC/ChiB,IAAK,EACL8gB,WAAYgO,EAAgBl5B,MAC5B,sBAAuBypB,EAAO,MAAQA,EAAO,IAAM,SAAC0B,GAAgB,OAAC,EAAkBnrB,MAAQmrB,CAA3B,GACpEW,OAAO,EACPriB,SAAU,MACVswB,OAAQ,KACR,oBAAqB,YACrBlN,WAAY,GACZ,qBAAsB,GACtB,gBAAgB,GACf,CACDhB,WAAW,SAAS,SAAC,G,IAAEvN,EAAK,QAAO,QACjC,QAAauL,GAAwB,QAAY,CAC/CpN,GAAI,qBACJ8P,WAAY9C,EAAO,KAAOA,EAAO,GACnC,WACEyP,EAAgBl5B,OAASk5B,EAAgBl5B,KAC3C,GAEE,UAAWk5B,EAAgBl5B,MAAQ,QAAU,aAC7C4F,MAAOA,EACP,cAAeA,EACf,eAAgB,sBAChB,mBAAoB,MACpB,iBAAkB,MAClBk0B,OAAQ,KACR,gBAAiBzU,EAAOrlB,OACvBse,GAAQ,KAAM,GAAI,CAAC,UAAW,iBAhBA,IAkBnCE,SAAS,SAAS,WAAM,OACrB0a,EAAqB,QACjB,WAAc,QAAaW,EAA6B,CACvDzvB,IAAK,EACLuS,MAAO,2BACP,cAAeyc,EAAap5B,MAC5B,sBAAuBypB,EAAO,KAAOA,EAAO,GAAK,SAACzpB,GAC5Cm5B,EAAUn5B,OAAQ,EAClBo5B,EAAap5B,MAAQA,CACvB,GACJ42B,SAAS,QAAO2B,GAChByB,SAAUvQ,EAAO,KAAOA,EAAO,GAAK,SAAC0B,GAAgB,OAACoN,EAAYv4B,OAASmrB,CAAtB,GACrD,YAAahqB,KAAK0zB,MAAMxI,GACxBznB,IAAKzD,KAAK0zB,MAAMxI,GAAY,EAC5BzmB,MAAOA,EACPkuB,QAAQ,EACR,oBAAqB,GACrBmG,QAASxQ,EAAO,MAAQA,EAAO,IACvC,WACEyP,EAAgBl5B,OAAQ,CAC1B,IAES,KAAM,EAAG,CAAC,cAAe,SAAU,YAAa,UACnD,QAAoB,IAAI,GAvBN,IAyBxB8qB,EAAG,GACF,EAAG,CAAC,gBAEXsB,IACK,WAAc,QAAoB,MAAO,GAAY,EACpD,QAAavC,EAAwB,CACnCpN,GAAI,qBACJ8P,WAAY9C,EAAO,MAAQA,EAAO,IACpC,WACEyP,EAAgBl5B,OAASk5B,EAAgBl5B,MACzC25B,EAAkB35B,OAAQ,CAC5B,GAEE,UAAWk5B,EAAgBl5B,MAAQ,QAAU,aAC7C4F,MAAOA,EACP,cAAeA,EACf,eAAgB,gBAChB,mBAAoB,MACpB,iBAAkB,MAClBk0B,OAAQ,KACR,gBAAiBzU,EAAOrlB,OACvB,KAAM,EAAG,CAAC,UAAW,kBACxB,SAAgB,QAAa65B,EAA6B,CACxDld,MAAO,0BACP,cAAeyc,EAAap5B,MAC5B,sBAAuBypB,EAAO,MAAQA,EAAO,IAAM,SAACzpB,GACxCm5B,EAAUn5B,OAAQ,EAClBo5B,EAAap5B,MAAQA,CACvB,GACV42B,SAAS,QAAO2B,GAChByB,SAAUvQ,EAAO,MAAQA,EAAO,IAAM,SAAC0B,GAAgB,OAACoN,EAAYv4B,OAASmrB,CAAtB,GACvD,YAAahqB,KAAK0zB,MAAMxI,GACxBznB,IAAKzD,KAAK0zB,MAAMxI,GAAY,EAC5BzmB,MAAOA,EACPkuB,QAAQ,EACR,gBAAiB,GACjBmG,QAASxQ,EAAO,MAAQA,EAAO,IACjC,WACEyP,EAAgBl5B,OAAQ,CAC1B,IAEG,KAAM,EAAG,CAAC,cAAe,SAAU,YAAa,QAAS,CAC1D,CAAC,KAAQk5B,EAAgBl5B,OACzB,CAAC,KAA0B45B,SAG/B,QAAoB,IAAI,KAE9Bd,IACK,WAAc,QAAoB,MAAO,IAAY,QAAiB33B,KAAK4E,MAAMqzB,EAAap5B,QAAU,MAAO,SAAiB,QAAOu4B,GAAe,GAAK,YAAa,KACzK,QAAoB,IAAI,IAEhC,CACA,IEpZM,GAAc,GAEpB,MCJA,IAAM,GAAa,CAAE5b,MAAO,iBACtB,GAAa,CACjBvS,IAAK,EACLuS,MAAO,YAEH,GAAa,CAAEA,MAAO,iBACtB,GAAa,CACjBvS,IAAK,EACLuS,MAAO,YAEH,GAAa,CAAEA,MAAO,iBACtB,GAAa,CACjBvS,IAAK,EACLuS,MAAO,gBAEH,GAAa,CAAEA,MAAO,mBACtB,GAAa,CACjBvS,IAAK,EACLuS,MAAO,YAEH,GAAa,CAAEA,MAAO,iBAK5B,UAA4B,QAAiB,CAC3C0B,OAAQ,cACRC,MAAO,CACPyN,KAAM,CAAEa,KAAMvsB,KAAM24B,UAAU,GAC9BhN,KAAM,CAAEY,KAAMmB,QAASvP,SAAS,GAChC0b,SAAU,CAAEtN,KAAMmB,QAASvP,SAAS,EAAMwa,UAAU,GACpDmB,aAAc,CAAEvN,KAAMmB,QAASvP,SAAS,EAAMwa,UAAU,GACxDoB,cAAe,CAAExN,KAAMmB,QAASvP,SAAS,EAAOwa,UAAU,GAC1D/M,SAAU,CACRW,KAAMvD,OACN7K,QAASje,KAAKC,iBAAiBC,kBAAkBC,SACjDs4B,UAAU,IAGZva,MAAK,SAACC,GCjBR,IAAMJ,EAAQ,EAcd,SAASkQ,EAAI6L,EAAgB7uB,GAC3B,YAD2B,IAAAA,IAAAA,EAAA,GACpB6d,OAAOgR,GAAQ3L,SAASljB,EAAQ,IACzC,CAGA,IAAM8uB,GAAQ,SAAS,WACrB,GAAIhc,EAAM0N,KAAM,CACd,IAAM5pB,EAAOkc,EAAMyN,KAAKoE,WAAa,GACrC,OAAgB,IAAT/tB,EAAa,GAAKA,CAC3B,CACE,OAAOkc,EAAMyN,KAAKoE,UAEtB,IAGMnE,GAAO,SAAS,WACpB,OAAO1N,EAAMyN,KAAKoE,YAAc,GAAK,KAAO,IAC9C,IAEMoK,GAAsB,SAAS,WAEnC,IAAMv4B,EAAQsc,EAAMyN,KAAKyO,eAAe,UAAW,CAAEx4B,MAAO,UACtDE,EAAMoc,EAAMyN,KAAKmE,UACjBkB,EAAI9S,EAAMyN,KAAKoE,WAAa,GAC5B/tB,EAAa,IAANgvB,EAAU,GAAKA,EACtB9uB,EAASksB,EAAIlQ,EAAMyN,KAAKqE,cACxBpE,EAAO1N,EAAMyN,KAAKoE,YAAc,GAAK,KAAO,KAC5CsK,EAAMnc,EAAM2N,SAClB,MAAO,UAAGjqB,EAAK,YAAIE,EAAG,YAAIE,EAAI,YAAIE,EAAM,YAAI0pB,IAAU1N,EAAM6b,aAAe,WAAIM,GAAO,GACxF,IDWA,OAAO,SAACjR,EAAUC,GAChB,OAAQ,WAAc,QAAoB,MAAO,GAAY,CAC1DnL,EAAM4b,WAAa5b,EAAM8b,gBACrB,WAAc,QAAoB,MAAO,GAAY,EACpD,QAAoB,OAAQ,IAAY,QAAiB9b,EAAMyN,KAAKyO,eAAe,UAAW,CAAEx4B,MAAO,UAAa,KAAM,QAAiBwsB,EAAIlQ,EAAMyN,KAAKmE,YAAc,MAAO,QAAiB5R,EAAMyN,KAAKiE,eAAgB,OAE7N,QAAoB,IAAI,GAC1B1R,EAAM8b,eAIJ,QAAoB,IAAI,KAHvB,WAAc,QAAoB,MAAO,GAAY,EACpD,QAAoB,OAAQ,IAAY,QAAiB5L,EAAI8L,EAAMt6B,QAAU,KAAM,QAAiBwuB,EAAIlQ,EAAMyN,KAAKqE,eAAiB,KAAM,QAAiB5B,EAAIlQ,EAAMyN,KAAKsE,eAAiB,KAAM,QAAiB/R,EAAM0N,KAAOA,EAAKhsB,MAAQ,IAAK,MAGtPse,EAAM6b,eAAiB7b,EAAM8b,gBACzB,WAAc,QAAoB,MAAO,GAAY,EACpD,QAAoB,OAAQ,IAAY,QAAiB9b,EAAM2N,UAAW,OAE5E,QAAoB,IAAI,GAC3B3N,EAAmB,gBACf,WAAc,QAAoB,MAAO,GAAY,EACpD,QAAoB,OAAQ,IAAY,QAAiBic,EAAoBv6B,OAAQ,OAEvF,QAAoB,IAAI,IAEhC,CACA,IElGM,GAAc,GAEpB,M,0BCgCA,MAAQyK,IAAI,QACZ,MAAQA,IAAI,QACZ,MAAQA,IAAI,QACZ,MAAQA,IAAI,QACZ,MAAQA,IAAI,QACZ,MAAQA,IAAI,QACZ,MAAQA,IAAI,QACZ,MAAQA,IAAI,QACZ,MAAQA,IAAI,QACZ,MAAQA,IAAI,QACZ,MAAQA,IAAI,QACZ,MAAQA,IAAI,QACZ,MAAQA,IAAI,QACZ,MAAQA,IAAI,QACZ,MAAQA,IAAI,QACZ,MAAQA,IAAI,QACZ,MAAQA,IAAI,QAIZ,IAAMiwB,GAAS,SAACC,EAAiBC,GAAkC,OAAAD,EAAG1d,MAAM4d,WAAcD,EAAa,MAAI,SAAW,EAAnD,GAEnE,QAAUE,GAAc,CACtBvc,aAAc,kBAIbwc,IAAI,EAAAC,UACJD,IAAIE,IAGJC,UAIC,OAAQ,CAENC,YAAW,SAACR,EAAIC,EAASQ,EAAQC,GAC/BX,GAAOC,EAAIC,EACb,EAEAU,QAAO,SAACX,EAAIC,EAASQ,EAAQC,GAC3BX,GAAOC,EAAIC,EACb,IAIH5R,UAAU,qBAAsB,EAAAuS,cAChCvS,UAAU,oBAAqB,OAC/BA,UAAU,eAAgB,EAAAwS,aAC1BxS,UAAU,0BAA2B,EAAAyS,wBACrCzS,UAAU,qBAAsB,EAAA0S,mBAChC1S,UAAU,cAAe,EAAA2S,YACzB3S,UAAU,oBAAqB,EAAA4S,kBAC/B5S,UAAU,kBAAmB6S,IAC7B7S,UAAU,eAAgB8S,IAC1B9S,UAAU,mBAAoB+S,IAC9B/S,UAAU,gBAAiBgT,IAC3BhT,UAAU,mBAAoBiT,IAG9BC,MAAM,O,GCnGLC,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBlV,IAAjBmV,EACH,OAAOA,EAAaC,QAGrB,IAAIC,EAASL,EAAyBE,GAAY,CAGjDE,QAAS,CAAC,GAOX,OAHAE,EAAoBJ,GAAUK,KAAKF,EAAOD,QAASC,EAAQA,EAAOD,QAASH,GAGpEI,EAAOD,OACf,CAGAH,EAAoBvkB,EAAI4kB,E,MCzBxB,IAAIE,EAAW,GACfP,EAAoBQ,EAAI,CAACC,EAAQC,EAAUC,EAAIC,KAC9C,IAAGF,EAAH,CAMA,IAAIG,EAAevM,IACnB,IAAS/pB,EAAI,EAAGA,EAAIg2B,EAASnxB,OAAQ7E,IAAK,CAGzC,IAFA,IAAKm2B,EAAUC,EAAIC,GAAYL,EAASh2B,GACpCu2B,GAAY,EACPC,EAAI,EAAGA,EAAIL,EAAStxB,OAAQ2xB,MACpB,EAAXH,GAAsBC,GAAgBD,IAAa/yB,OAAOC,KAAKkyB,EAAoBQ,GAAGQ,OAAOhzB,GAASgyB,EAAoBQ,EAAExyB,GAAK0yB,EAASK,MAC9IL,EAASO,OAAOF,IAAK,IAErBD,GAAY,EACTF,EAAWC,IAAcA,EAAeD,IAG7C,GAAGE,EAAW,CACbP,EAASU,OAAO12B,IAAK,GACrB,IAAI22B,EAAIP,SACE5V,IAANmW,IAAiBT,EAASS,EAC/B,CACD,CACA,OAAOT,CAnBP,CAJCG,EAAWA,GAAY,EACvB,IAAI,IAAIr2B,EAAIg2B,EAASnxB,OAAQ7E,EAAI,GAAKg2B,EAASh2B,EAAI,GAAG,GAAKq2B,EAAUr2B,IAAKg2B,EAASh2B,GAAKg2B,EAASh2B,EAAI,GACrGg2B,EAASh2B,GAAK,CAACm2B,EAAUC,EAAIC,EAqBjB,C,WCzBdZ,EAAoB32B,EAAK+2B,IACxB,IAAIe,EAASf,GAAUA,EAAOgB,WAC7B,IAAOhB,EAAO,WACd,IAAM,EAEP,OADAJ,EAAoBr5B,EAAEw6B,EAAQ,CAAE56B,EAAG46B,IAC5BA,CAAM,C,WCLdnB,EAAoBr5B,EAAI,CAACw5B,EAASkB,KACjC,IAAI,IAAIrzB,KAAOqzB,EACXrB,EAAoBsB,EAAED,EAAYrzB,KAASgyB,EAAoBsB,EAAEnB,EAASnyB,IAC5EH,OAAO0zB,eAAepB,EAASnyB,EAAK,CAAEwzB,YAAY,EAAMjd,IAAK8c,EAAWrzB,IAE1E,C,WCNDgyB,EAAoByB,EAAI,WACvB,GAA0B,kBAAfC,WAAyB,OAAOA,WAC3C,IACC,OAAO3vB,MAAQ,IAAIsjB,SAAS,cAAb,EAChB,CAAE,MAAOsM,GACR,GAAsB,kBAAXzyB,OAAqB,OAAOA,MACxC,CACA,CAPuB,E,WCAxB8wB,EAAoBsB,EAAI,CAACM,EAAKC,IAAUh0B,OAAOgC,UAAUiyB,eAAexB,KAAKsB,EAAKC,E,WCClF7B,EAAoBkB,EAAKf,IACH,qBAAX4B,QAA0BA,OAAOC,aAC1Cn0B,OAAO0zB,eAAepB,EAAS4B,OAAOC,YAAa,CAAEp+B,MAAO,WAE7DiK,OAAO0zB,eAAepB,EAAS,aAAc,CAAEv8B,OAAO,GAAO,C,WCA9D,IAAIq+B,EAAkB,CACrB,IAAK,GAaNjC,EAAoBQ,EAAEO,EAAKmB,GAA0C,IAA7BD,EAAgBC,GAGxD,IAAIC,EAAuB,CAACC,EAA4B3G,KACvD,IAGIwE,EAAUiC,GAHTxB,EAAU2B,EAAaC,GAAW7G,EAGhBlxB,EAAI,EAC3B,GAAGm2B,EAAS6B,MAAMliB,GAAgC,IAAxB4hB,EAAgB5hB,KAAa,CACtD,IAAI4f,KAAYoC,EACZrC,EAAoBsB,EAAEe,EAAapC,KACrCD,EAAoBvkB,EAAEwkB,GAAYoC,EAAYpC,IAGhD,GAAGqC,EAAS,IAAI7B,EAAS6B,EAAQtC,EAClC,CAEA,IADGoC,GAA4BA,EAA2B3G,GACrDlxB,EAAIm2B,EAAStxB,OAAQ7E,IACzB23B,EAAUxB,EAASn2B,GAChBy1B,EAAoBsB,EAAEW,EAAiBC,IAAYD,EAAgBC,IACrED,EAAgBC,GAAS,KAE1BD,EAAgBC,GAAW,EAE5B,OAAOlC,EAAoBQ,EAAEC,EAAO,EAGjC+B,EAAqBC,KAAK,uCAAyCA,KAAK,wCAA0C,GACtHD,EAAmBr0B,QAAQg0B,EAAqBpyB,KAAK,KAAM,IAC3DyyB,EAAmBpb,KAAO+a,EAAqBpyB,KAAK,KAAMyyB,EAAmBpb,KAAKrX,KAAKyyB,G,KC7CvF,IAAIE,EAAsB1C,EAAoBQ,OAAEzV,EAAW,CAAC,MAAM,IAAOiV,EAAoB,QAC7F0C,EAAsB1C,EAAoBQ,EAAEkC,E","sources":["webpack://@cosmicds/planet-parade/./src/timezones.ts","webpack://@cosmicds/planet-parade/./src/utils.ts","webpack://@cosmicds/planet-parade/./src/horizon_sky.ts","webpack://@cosmicds/planet-parade/./src/text.ts","webpack://@cosmicds/planet-parade/./src/wwt-hacks.ts","webpack://@cosmicds/planet-parade/./src/useSun.ts","webpack://@cosmicds/planet-parade/./src/PlanetParade.vue?6c3a","webpack://@cosmicds/planet-parade/./src/PlanetParade.vue","webpack://@cosmicds/planet-parade/./src/PlanetParade.vue?1954","webpack://@cosmicds/planet-parade/./plugins/vuetify.ts","webpack://@cosmicds/planet-parade/./src/components/TapToInput.vue?d3b9","webpack://@cosmicds/planet-parade/./src/components/TapToInput.vue","webpack://@cosmicds/planet-parade/./src/components/TapToInput.vue?f02f","webpack://@cosmicds/planet-parade/./src/components/DateTimePicker.vue?0264","webpack://@cosmicds/planet-parade/./src/components/DateTimePicker.vue","webpack://@cosmicds/planet-parade/./src/components/DateTimePicker.vue?ef30","webpack://@cosmicds/planet-parade/./src/components/LocationSearch.vue?4f80","webpack://@cosmicds/planet-parade/./src/components/LocationSearch.vue","webpack://@cosmicds/planet-parade/./src/components/LocationSearch.vue?99f6","webpack://@cosmicds/planet-parade/./src/components/PlaybackControl.vue?62a4","webpack://@cosmicds/planet-parade/./src/components/PlaybackControl.vue","webpack://@cosmicds/planet-parade/./src/components/symlog.ts","webpack://@cosmicds/planet-parade/./src/components/PlaybackControl.vue?53b1","webpack://@cosmicds/planet-parade/./src/wwt_playback_control.ts","webpack://@cosmicds/planet-parade/./src/components/SpeedControl.vue?e115","webpack://@cosmicds/planet-parade/./src/components/SpeedControl.vue","webpack://@cosmicds/planet-parade/./src/components/SpeedControl.vue?9751","webpack://@cosmicds/planet-parade/./src/components/TimeDisplay.vue?8b16","webpack://@cosmicds/planet-parade/./src/components/TimeDisplay.vue","webpack://@cosmicds/planet-parade/./src/components/TimeDisplay.vue?2cde","webpack://@cosmicds/planet-parade/./src/main.ts","webpack://@cosmicds/planet-parade/webpack/bootstrap","webpack://@cosmicds/planet-parade/webpack/runtime/chunk loaded","webpack://@cosmicds/planet-parade/webpack/runtime/compat get default export","webpack://@cosmicds/planet-parade/webpack/runtime/define property getters","webpack://@cosmicds/planet-parade/webpack/runtime/global","webpack://@cosmicds/planet-parade/webpack/runtime/hasOwnProperty shorthand","webpack://@cosmicds/planet-parade/webpack/runtime/make namespace object","webpack://@cosmicds/planet-parade/webpack/runtime/jsonp chunk loading","webpack://@cosmicds/planet-parade/webpack/startup"],"sourcesContent":["import { Ref, computed} from 'vue';\nimport { getTimezoneOffset, formatInTimeZone } from \"date-fns-tz\";\nimport tzlookup from \"tz-lookup\";\nimport { LocationDeg } from './types';\n\n\nexport function useTimezone(selectedLocation: Ref<LocationDeg>) {\n  // selectedDate keeps track of the time the user has selected\n  \n  const selectedTimezone = computed(() => tzlookup(selectedLocation.value.latitudeDeg, selectedLocation.value.longitudeDeg));\n\n  // what we add to utc time to get the localized time\n  const selectedTimezoneOffset = computed(() => getTimezoneOffset(selectedTimezone.value));\n  const shortTimezone = computed(() => formatInTimeZone(new Date(), selectedTimezone.value, \"zzz\"));\n\n  const browserTimezone = Intl.DateTimeFormat().resolvedOptions().timeZone;\n  // this is added to (new Date()).getHours() to get UTC hours\n  const browserTimezoneOffset = new Date().getTimezoneOffset() * 60 * 1000; // in milliseconds\n  \n  console.log('Browser timezone:', browserTimezone);\n  console.log('Browser timezone offset:', browserTimezoneOffset);\n  console.log('Selected timezone:', selectedTimezone.value);\n  console.log('Selected timezone offset:', selectedTimezoneOffset.value);\n  \n  return {\n    selectedTimezone,\n    shortTimezone,\n    selectedTimezoneOffset,\n    browserTimezone,\n    browserTimezoneOffset,\n  };\n}\n","import { D2R, R2D } from \"@cosmicds/vue-toolkit\";\nimport { HorizontalRad, EquatorialRad } from \"./types\";\n\n// WWT does have all of this functionality built in\n// but it doesn't seem to be exposed\n// We should do that, but for now we just copy the web engine code\n// https://github.com/Carifio24/wwt-webgl-engine/blob/master/engine/wwtlib/Coordinates.cs\nexport function altAzToHADec(altRad: number, azRad: number, latRad: number): { ra: number; dec: number; } {\n  azRad = Math.PI - azRad;\n  if (azRad < 0) {\n    azRad += 2 * Math.PI;\n  }\n  let ra = Math.atan2(Math.sin(azRad), Math.cos(azRad) * Math.sin(latRad) + Math.tan(altRad) * Math.cos(latRad));\n  if (ra < 0) {\n    ra += 2 * Math.PI;\n  }\n  const dec = Math.asin(Math.sin(latRad) * Math.sin(altRad) - Math.cos(latRad) * Math.cos(altRad) * Math.cos(azRad));\n  return { ra, dec };\n}\n\nexport function getJulian(utc: Date): number {\n  let year = utc.getUTCFullYear();\n  let month = utc.getUTCMonth()+1;\n  const day = utc.getUTCDate();\n  const hour = utc.getUTCHours();\n  const minute = utc.getUTCMinutes();\n  const second = utc.getUTCSeconds() + utc.getUTCMilliseconds() / 1000.0;\n\n  if (month == 1 || month == 2)\n  {\n    year -= 1;\n    month += 12;\n  }\n\n  const a = Math.floor(year / 100);\n  const b = 2 - a + Math.floor(a / 4.0);\n  const c = Math.floor(365.25 * year);\n  const d = Math.floor(30.6001 * (month + 1));\n\n  // gives julian date: number of days since Jan 1, 4713 BC\n  const jd = b + c + d + 1720994.5 + day + (hour + minute / 60.00 + second / 3600.00) / 24.00;\n  return jd;\n}\n\nexport function mstFromUTC2(utc: Date, longRad: number): number {\n  const lng = longRad * R2D;\n\n  const modifiedJD = getJulian(utc)  - 2451545;\n\n  const julianCenturies = modifiedJD / 36525.0;\n  // this form wants julianDays - 2451545\n  let mst = 280.46061837 + 360.98564736629 * modifiedJD + 0.000387933 * julianCenturies * julianCenturies - julianCenturies * julianCenturies * julianCenturies / 38710000 + lng;\n\n  if (mst > 0.0) {\n    while (mst > 360.0) {\n      mst = mst - 360.0;\n    }\n  } else {\n    while (mst < 0.0) {\n      mst = mst + 360.0;\n    }\n  }\n\n  return mst;\n}\n\nexport function horizontalToEquatorial(altRad: number, azRad: number, latRad: number, longRad: number, utc: Date): EquatorialRad {\n  const st = mstFromUTC2(utc, longRad); // siderial time \n\n  const haDec = altAzToHADec(altRad, azRad, latRad); // get Hour Angle and Declination\n  \n  const ha = haDec.ra * R2D;\n\n  let ra = st + ha;\n  if (ra < 0) {\n    ra += 360;\n  }\n  if (ra > 360) {\n    ra -= 360;\n  }\n  // ra -= 180;\n  // console.log(`Alt: ${(altRad*R2D).toFixed(2)} Az: ${(azRad*R2D).toFixed(2)} Ra: ${ra.toFixed(2)} Dec: ${(haDec.dec*R2D).toFixed(2)}`)\n\n  return { raRad: D2R * ra, decRad: haDec.dec };\n}\n\nexport function equatorialToHorizontal(raRad: number, decRad: number, latRad: number, longRad: number, utc: Date): HorizontalRad {\n  let hourAngle = mstFromUTC2(utc, longRad) - R2D * raRad;\n  if (hourAngle < 0) {\n    hourAngle += 360;\n  }\n\n  const ha = D2R * hourAngle;\n  const dec = decRad;\n  const lat = latRad;\n  \n  const sinAlt = Math.sin(dec) * Math.sin(lat) + Math.cos(dec) * Math.cos(lat) * Math.cos(ha);\n  const altitude = Math.asin(sinAlt);\n  const cosAz = (Math.sin(dec) - Math.sin(altitude) * Math.sin(lat)) / (Math.cos(altitude) * Math.cos(lat));\n  let azimuth = Math.acos(cosAz);\n\n  azimuth = azimuth + (Math.PI * 80) % (Math.PI * 2);\n\n  if (Math.sin(ha) > 0) {\n    azimuth = 2 * Math.PI - azimuth;\n  }\n  return { altRad: altitude, azRad: azimuth };\n\n}\n\nexport function skyOpacityForSunAlt(sunAltRad: number) {\n  const civilTwilight = -6 * D2R;\n  const astronomicalTwilight = 3 * civilTwilight;\n  \n  return Math.min(Math.max((1 + Math.atan(Math.PI * sunAltRad / (-astronomicalTwilight))) / 2, 0), 1);\n}\n","// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-nocheck\n\n/* eslint-disable */\n\n\n// We need this import for WWT types that aren't exported\n// from the engine at the JS level\nimport * as wwtlib from \"@wwtelescope/engine\";\nimport {\n  Color,\n  Coordinates,\n  Matrix3d,\n  Place,\n  RenderContext,\n  Settings,\n  SpaceTimeController,\n  WWTControl,\n} from \"@wwtelescope/engine\";\nimport { Classification, SolarSystemObjects } from \"@wwtelescope/engine-types\";\nimport { HorizonSkyOptions } from \"./types\";\nimport { equatorialToHorizontal, horizontalToEquatorial, skyOpacityForSunAlt } from \"./utils\";\nimport { D2R, R2D } from \"@cosmicds/vue-toolkit\";\n\nconst sunPlace = new Place();\nsunPlace.set_names([\"Sun\"]);\nsunPlace.set_classification(Classification.solarSystem);\nsunPlace.set_target(SolarSystemObjects.sun);\nsunPlace.set_zoomLevel(20);\n\n\nexport const drawHorizon = (renderContext: RenderContext, options: HorizonSkyOptions) => {\n  const n = 6;\n  const delta = 2 * Math.PI / n;\n  const triangleList = new wwtlib.TriangleList();\n  const color = Color.load(options.color);\n  color.a = Math.round(255 * options.opacity ?? 1);\n  const settings = Settings.get_active();\n  const longitudeRad = settings.get_locationLng() * D2R;\n  const latitudeRad = settings.get_locationLat() * D2R;\n  const now = SpaceTimeController.get_now();\n  for (let i = 0; i < n; i++) {\n    let points: [number, number][] = [\n      [0, i * delta],\n      [-Math.PI / 2, i * delta],\n      [0, (i + 1) * delta]\n    ];\n    points = points.map((point) => {\n      const raDecRad = horizontalToEquatorial(...point, latitudeRad, longitudeRad, now);\n      return Coordinates.raDecTo3d(R2D * raDecRad.raRad / 15, R2D * raDecRad.decRad);\n    });\n    triangleList.addSubdividedTriangles(...points, color, new wwtlib.Dates(0, 1), 2);\n    \n  }\n  triangleList.draw(renderContext, 1, true);\n\n};\n\n\nexport const drawSky = (renderContext: RenderContext, options: HorizonSkyOptions) => {\n  const n = 6;\n  const delta = 2 * Math.PI / n;\n  const triangleList = new wwtlib.TriangleList();\n  const color = Color.load(options.color);\n  const settings = Settings.get_active();\n  const longitudeRad = settings.get_locationLng() * D2R;\n  const latitudeRad = settings.get_locationLat() * D2R;\n\n  const sunAltAz = equatorialToHorizontal(sunPlace.get_RA() * 15 * D2R,\n                                          sunPlace.get_dec() * D2R,\n                                          latitudeRad,\n                                          longitudeRad,\n                                          SpaceTimeController.get_now());\n  const opacity = skyOpacityForSunAlt(sunAltAz.altRad);\n  color.a = Math.round(255 * opacity);\n  WWTControl.scriptInterface.setForegroundOpacity((1 - opacity) * 100);\n  const now = SpaceTimeController.get_now();\n  for (let i = 0; i < n; i++) {\n    let points: [number, number][] = [\n      [0, i * delta],\n      [0, (i + 1) * delta],\n      [Math.PI / 2, i * delta] // In addition to using +pi/2 instead of -pi/2, I had to switch the order of the 2nd & 3rd points relative to the horizon set. I don't know why, but before I switched them, the polygons didn't render.\n    ];\n    points = points.map((point) => {\n      const raDecRad = horizontalToEquatorial(...point, latitudeRad, longitudeRad, now);\n      return Coordinates.raDecTo3d(R2D * raDecRad.raRad / 15, R2D * raDecRad.decRad);\n    });\n    triangleList.addSubdividedTriangles(...points, color, new wwtlib.Dates(0, 1), 2);\n    \n  }\n  triangleList.draw(renderContext, 1, true);\n\n};\n","// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-nocheck\n\n/* eslint-disable */\n\nimport { Coordinates, Place, RenderContext, SpaceTimeController, Text3d, Text3dBatch, Vector3d } from \"@wwtelescope/engine\";\nimport { Classification, SolarSystemObjects } from \"@wwtelescope/engine-types\";\n\nfunction nameForObject(object: SolarSystemObjects): string {\n  // For creating a place based on a name, WWT requires that the name be capitalized\n  let name = SolarSystemObjects[object];\n  name = name.charAt(0).toUpperCase() + name.slice(1);\n  return name;\n}\n\nfunction placeForObject(object: SolarSystemObjects): Place {\n  const place = new Place();\n  const name = nameForObject(object);\n  place.set_names([name]);\n  place.set_classification(Classification.solarSystem);\n  place.set_target(object);\n  return place;\n}\n\nconst maxFOV = 90;\nconst minFOV = 0.1;\nconst maxFactor = 0.9;\nconst minFactor = 0.1;\nconst gMax = Math.log(maxFactor / (1 - maxFactor));\nconst gMin = Math.log(minFactor/ (1 - minFactor));\nconst b = (gMax - gMin) / (maxFOV - minFOV);\nconst a = gMax - b * maxFOV;\n\nconst planetTextOffsetsY = [\n  115,  // Sun\n  -60,  // Mercury\n  85,  // Venus\n  100,  // Mars\n  100,  // Jupiter\n  120,  // Saturn\n  90,  // Uranus\n  90,  // Neptune\n  100,  // Pluto\n  -70,  // Moon\n];\n\nconst planetTextOffsetsX = [\n  85,  // Sun\n  -275,  // Mercury\n  0,  // Venus\n  0,  // Mars\n  0,  // Jupiter\n  0,  // Saturn\n  0,  // Uranus\n  0,  // Neptune\n  0,  // Pluto\n  0,  // Moon\n];\n\nfunction textOverlayForSolarSystemObject(renderContext: RenderContext, object: SolarSystemObjects, text: string, glyphHeight: number): Text3d {\n  const zoom = renderContext.viewCamera.zoom;\n  const fov = zoom / 6;\n  const exp = Math.exp(a + b * fov);\n  const scale = 0.0002 * ((1.4 * exp / (1 + exp)) + 1);\n  const sign = SpaceTimeController.get_location().get_lat() < 0 ? -1 : 1;\n  const up = Vector3d.create(0, sign, 0);\n\n  const place = placeForObject(object);\n  const location = Coordinates.raDecTo3d(place.get_RA(), place.get_dec());\n  location.y -= planetTextOffsetsY[object] * scale ?? 0.035;\n  location.x -= planetTextOffsetsX[object] * scale ?? 0;\n  return new Text3d(location, up, text, glyphHeight, scale);\n}\n\nexport function makeTextOverlays(renderContext: RenderContext): Text3dBatch {\n  const glyphHeight = 75 * 0.5;\n  const batch = new Text3dBatch(glyphHeight);\n  const values = Object.keys(SolarSystemObjects).filter(key => !isNaN(Number(key)))\n  values.forEach(object => {\n    if (Number(object) <= SolarSystemObjects.moon) {\n      const name = nameForObject(object);\n      const text = textOverlayForSolarSystemObject(renderContext, object, name, glyphHeight);\n      batch.add(text);\n    }\n  });\n  return batch;\n}\n","// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-nocheck\n\n/* eslint-disable */\n\nimport {\n  Annotation,\n  Color,\n  Constellations,\n  Coordinates,\n  CT,\n  DT,\n  GlyphCache,\n  Grids,\n  Matrix3d,\n  Planets,\n  RenderContext,\n  RenderTriangle,\n  Settings,\n  SimpleLineList,\n  SpaceTimeController,\n  Text3d,\n  Text3dBatch,\n  Texture,\n  Tile,\n  TileCache,\n  TourPlayer,\n  Vector3d,\n  WebFile,\n  WWTControl,\n} from \"@wwtelescope/engine\";\n\nimport { drawHorizon, drawSky } from \"./horizon_sky\";\nimport { makeTextOverlays } from \"./text\";\n\nexport function resetAltAzGridText() {\n  Grids._altAzTextBatch = null;\n}\n\nexport function makeAltAzGridText() {\n  if (Grids._altAzTextBatch == null) {\n    const glyphHeight = 70;\n    Grids._altAzTextBatch = new Text3dBatch(glyphHeight);\n    const sign = SpaceTimeController.get_location().get_lat() < 0 ? -1 : 1;\n    const alt = 0.03 * sign;\n    const up = Vector3d.create(0, sign, 0);\n    const directions = [\n      [[0, alt, -1], \"N\"],\n      [[-sign, alt, 0], \"E\"],\n      [[0, alt, 1], \"S\"],\n      [[sign, alt,  0], \"W\"],\n    ]\n    directions.forEach(([v, text]) => {\n      Grids._altAzTextBatch.add(new Text3d(Vector3d.create(...v), up, text, 75, 0.00018));\n    });\n    useCustomGlyphs(Grids._altAzTextBatch);\n  }\n}\n\nconst GLYPH_CACHE = function(): GlyphCache {\n  const cache = new GlyphCache();\n  let origin = window.location.origin;\n  if (origin.endsWith(\"/\")) {\n    origin = origin.slice(0, origin.length - 1);\n  }\n  const imageUrl = `${origin}/glyphs2.png`;\n  const xmlUrl = `${origin}/glyphs2.xml`;\n  cache._texture = Texture.fromUrl(imageUrl);\n  cache._webFile = new WebFile(xmlUrl);\n  cache._webFile.onStateChange = GlyphCache.prototype._glyphXmlReady.bind(cache);\n  cache._webFile.send();\n\n  return cache;\n}();\n\nexport function useCustomGlyphs(batch: Text3dBatch) {\n  batch._glyphCache = GLYPH_CACHE;\n  batch.prepareBatch();\n}\n\nexport function drawPlanets(renderContext: RenderContext, _opacity: number) {\n  if (Planets._planetTextures == null) {\n      Planets._loadPlanetTextures();\n    }\n    var elong = Planets._geocentricElongation(Planets._planetLocations[9].RA, Planets._planetLocations[9].dec, Planets._planetLocations[0].RA, Planets._planetLocations[0].dec);\n    var raDif = Planets._planetLocations[9].RA - Planets._planetLocations[0].RA;\n    if (Planets._planetLocations[9].RA < Planets._planetLocations[0].RA) {\n      raDif += 24;\n    }\n    var phaseAngle = Planets._phaseAngle(elong, Planets._planetLocations[9].distance, Planets._planetLocations[0].distance);\n    // var limbAngle = Planets._positionAngle(Planets._planetLocations[9].RA, Planets._planetLocations[9].dec, Planets._planetLocations[0].RA, Planets._planetLocations[0].dec);\n    if (raDif < 12) {\n      phaseAngle += 180;\n    }\n    var dista = (Math.abs(Planets._planetLocations[9].RA - Planets._planetLocations[0].RA) * 15) * Math.cos(Coordinates.degreesToRadians(Planets._planetLocations[0].dec));\n    var distb = Math.abs(Planets._planetLocations[9].dec - Planets._planetLocations[0].dec);\n    var sunMoonDist = Math.sqrt(dista * dista + distb * distb);\n    var eclipse = false;\n    var coronaOpacity = 0;\n    var moonEffect = (Planets._planetScales[9] / 2 - sunMoonDist);\n    // var darkLimb = Math.min(32, sunMoonDist * 32);\n    if (moonEffect > (Planets._planetScales[0] / 4)) {\n      eclipse = true;\n      coronaOpacity = Math.min(1, (moonEffect - (Planets._planetScales[0] / 2)) / 0.001);\n      Planets._drawPlanet(renderContext, 18, coronaOpacity);\n    }\n    for (const key in Planets._planetDrawOrder) {\n      // 0: Sun, 9: Moon, 19: Earth\n      var planetId = Planets._planetDrawOrder[key];\n      if (planetId <= 9) {\n        Planets._drawPlanet(renderContext, planetId, 1);\n      }\n    }\n    return true;\n}\n\nexport function renderOneFrame(showHorizon=true,\n                               showSky=true,\n                               showPlanetLabels=true) {\n  if (this.renderContext.get_backgroundImageset() != null) {\n    this.renderType = this.renderContext.get_backgroundImageset().get_dataSetType();\n  } else {\n    this.renderType = 2;\n  }\n\n  var sizeChange = false;\n  if (this.canvas.width !== this.canvas.parentNode.clientWidth) {\n    this.canvas.width = this.canvas.parentNode.clientWidth;\n    sizeChange = true;\n  }\n  if (this.canvas.height !== this.canvas.parentNode.clientHeight) {\n    this.canvas.height = this.canvas.parentNode.clientHeight;\n    sizeChange = true;\n  }\n  if (sizeChange && this.explorer != null) {\n    this.explorer.refresh();\n  }\n  if (this.canvas.width < 1 || this.canvas.height < 1) {\n    return;\n  }\n  if (sizeChange) {\n    this._crossHairs = null;\n  }\n  Tile.lastDeepestLevel = Tile.deepestLevel;\n  RenderTriangle.width = this.renderContext.width = this.canvas.width;\n  RenderTriangle.height = this.renderContext.height = this.canvas.height;\n  Tile.tilesInView = 0;\n  Tile.tilesTouched = 0;\n  Tile.deepestLevel = 0;\n  SpaceTimeController.set_metaNow(new Date());\n  if (this.get__mover() != null) {\n    SpaceTimeController.set_now(this.get__mover().get_currentDateTime());\n    Planets.updatePlanetLocations(this.get_solarSystemMode());\n    if (this.get__mover() != null) {\n      const newCam = this.get__mover().get_currentPosition();\n      this.renderContext.targetCamera = newCam.copy();\n      this.renderContext.viewCamera = newCam.copy();\n      if (this.renderContext.space && Settings.get_active().get_galacticMode()) {\n        const gPoint = Coordinates.j2000toGalactic(newCam.get_RA() * 15, newCam.get_dec());\n        this.renderContext.targetAlt = this.renderContext.alt = gPoint[1];\n        this.renderContext.targetAz = this.renderContext.az = gPoint[0];\n      }\n      else if (this.renderContext.space && Settings.get_active().get_localHorizonMode()) {\n        const currentAltAz = Coordinates.equitorialToHorizon(Coordinates.fromRaDec(newCam.get_RA(), newCam.get_dec()), SpaceTimeController.get_location(), SpaceTimeController.get_now());\n        this.renderContext.targetAlt = this.renderContext.alt = currentAltAz.get_alt();\n        this.renderContext.targetAz = this.renderContext.az = currentAltAz.get_az();\n      }\n      if (this.get__mover().get_complete()) {\n        WWTControl.scriptInterface._fireArrived(this.get__mover().get_currentPosition().get_RA(), this.get__mover().get_currentPosition().get_dec(), WWTControl.singleton.renderContext.viewCamera.zoom);\n        this.set__mover(null);\n        this._notifyMoveComplete();\n      }\n    }\n  }\n  else {\n    SpaceTimeController.updateClock();\n    Planets.updatePlanetLocations(this.get_solarSystemMode());\n    this._updateViewParameters();\n  }\n  this.renderContext.clear();\n\n  this.renderContext.setupMatricesSpace3d(this.renderContext.width, this.renderContext.height);\n  this.renderContext.drawImageSet(this.renderContext.get_backgroundImageset(), 100);\n  if (this.renderContext.get_foregroundImageset() != null) {\n    if (this.renderContext.get_foregroundImageset().get_dataSetType() !== this.renderContext.get_backgroundImageset().get_dataSetType()) {\n      this.renderContext.set_foregroundImageset(null);\n    }\n    else {\n      if (this.renderContext.viewCamera.opacity !== 100 && this.renderContext.gl == null) {\n        if (this._foregroundCanvas.width !== this.renderContext.width || this._foregroundCanvas.height !== this.renderContext.height) {\n          this._foregroundCanvas.width = this.renderContext.width;\n          this._foregroundCanvas.height = this.renderContext.height;\n        }\n        var saveDevice = this.renderContext.device;\n        this._fgDevice.clearRect(0, 0, this.renderContext.width, this.renderContext.height);\n        this.renderContext.device = this._fgDevice;\n        this.renderContext.drawImageSet(this.renderContext.get_foregroundImageset(), 100);\n        this.renderContext.device = saveDevice;\n        this.renderContext.device.save();\n        this.renderContext.device.globalAlpha = this.renderContext.viewCamera.opacity / 100;\n        this.renderContext.device.drawImage(this._foregroundCanvas, 0, 0);\n        this.renderContext.device.restore();\n      }\n      else {\n        this.renderContext.drawImageSet(this.renderContext.get_foregroundImageset(), this.renderContext.viewCamera.opacity);\n      }\n    }\n  }\n  if (this.uiController != null) {\n    this.uiController.render(this.renderContext);\n  }\n  else {\n    if (showSky) {\n      drawSky(this.renderContext, { opacity: 0.95, color: \"#4190ED\" });\n    }\n    Annotation.prepBatch(this.renderContext);\n    for (const item of this._annotations) {\n      item.draw(this.renderContext);\n    }\n    Annotation.drawBatch(this.renderContext);\n    if ((Date.now() - this._lastMouseMove) > 400) {\n      var raDecDown = this.getCoordinatesForScreenPoint(this._hoverTextPoint.x, this._hoverTextPoint.y);\n      this._annotationHover(raDecDown.x, raDecDown.y, this._hoverTextPoint.x, this._hoverTextPoint.y);\n      this._lastMouseMove = new Date(2100, 1, 1);\n    }\n    if (this._hoverText) {\n      this._drawHoverText(this.renderContext);\n    }\n  }\n\n  for (const imageset in this.renderContext.get_catalogHipsImagesets()) {\n    if (imageset.get_hipsProperties().get_catalogSpreadSheetLayer().enabled && imageset.get_hipsProperties().get_catalogSpreadSheetLayer().lastVersion === imageset.get_hipsProperties().get_catalogSpreadSheetLayer().get_version()) {\n      this.renderContext.drawImageSet(imageset, 100);\n    }\n  }\n  this.constellation = Constellations.containment.findConstellationForPoint(this.renderContext.viewCamera.get_RA(), this.renderContext.viewCamera.get_dec());\n  this._drawSkyOverlays();\n  Planets.drawPlanets(this.renderContext, 1);\n\n  if (showPlanetLabels) {\n    this._planetTextOverlays = makeTextOverlays(this.renderContext);\n    useCustomGlyphs(this._planetTextOverlays);\n    this._planetTextOverlays.viewTransform = Grids._altAzTextBatch?.viewTransform;\n    this._planetTextOverlays.draw(this.renderContext, 1, Color.fromArgb(255, 255, 255, 255));\n  }\n\n  if (showHorizon) {\n    drawHorizon(this.renderContext, { opacity: 0.95, color: \"#01362C\" });\n  }\n\n  const worldSave = this.renderContext.get_world();\n  const viewSave = this.renderContext.get_view();\n  const projSave = this.renderContext.get_projection();\n  if (Settings.get_current().get_showCrosshairs()) {\n    this._drawCrosshairs(this.renderContext);\n  }\n\n  const tilesAllLoaded = !TileCache.get_queueCount();\n  this.renderContext.setupMatricesOverlays();\n  this._fadeFrame();\n  this._frameCount++;\n  TileCache.decimateQueue();\n  TileCache.processQueue(this.renderContext);\n  Tile.currentRenderGeneration++;\n  if (!TourPlayer.get_playing()) {\n    this.set_crossFadeFrame(false);\n  }\n  this.renderContext.set_world(worldSave);\n  this.renderContext.set_view(viewSave);\n  this.renderContext.set_projection(projSave);\n  const now = Date.now();\n  const ms = now - this._lastUpdate;\n  if (ms > 1000) {\n    this._lastUpdate = now;\n    this._frameCount = 0;\n    RenderTriangle.trianglesRendered = 0;\n    RenderTriangle.trianglesCulled = 0;\n  }\n  if (this.capturingVideo) {\n    if ((this.dumpFrameParams != null) && (!this.dumpFrameParams.waitDownload || tilesAllLoaded)) {\n      this.captureFrameForVideo(this._videoBlobReady, this.dumpFrameParams.width, this.dumpFrameParams.height, this.dumpFrameParams.format);\n      SpaceTimeController.nextFrame();\n    }\n    if (SpaceTimeController.get_doneDumping()) {\n      SpaceTimeController.frameDumping = false;\n      SpaceTimeController.cancelFrameDump = false;\n      this.capturingVideo = false;\n    }\n  }\n}\n\nexport function drawEcliptic(renderContext: RenderContext, opacity: number, drawColor: Color, drawCircle: boolean = true) {\n    var col = drawColor;\n    var year = SpaceTimeController.get_now().getUTCFullYear();\n    if (Grids._eclipticOverviewLineList == null || year !== Grids._eclipticYear) {\n        if (Grids._eclipticOverviewLineList != null) {\n            Grids._eclipticOverviewLineList.clear();\n            Grids._eclipticOverviewLineList = null;\n        }\n        Grids._eclipticYear = year;\n        var obliquity = Coordinates.meanObliquityOfEcliptic(SpaceTimeController.get_jNow());\n        var mat = Matrix3d._rotationX((-obliquity / 360 * (Math.PI * 2)));\n        var daysPerYear = 365.25;\n        if (DT.isLeap(year, true)) {\n            Grids._monthDays[1] = 29;\n            daysPerYear = 366;\n        } else {\n            Grids._monthDays[1] = 28;\n            daysPerYear = 365;\n        }\n        var count = 2 * daysPerYear;\n        Grids._eclipticCount = daysPerYear;\n        var jYear = SpaceTimeController.utcToJulian(new Date(year, 0, 1, 12, 0, 0));\n        var index = 0;\n        var d = 0;\n        var dPrev = 0;\n        var dStart = 0;\n        Grids._eclipticOverviewLineList = new SimpleLineList();\n        Grids._eclipticOverviewLineList.set_depthBuffered(false);\n        for (var m = 0; m < 12; m++) {\n            var daysThisMonth = Grids._monthDays[m];\n            for (var i = 0; i < daysThisMonth; i++) {\n                var sunRaDec = Planets.getPlanetLocationJD('Sun', jYear);\n                var sunEcliptic = CT.eq2Ec(sunRaDec.RA, sunRaDec.dec, obliquity);\n                d = sunEcliptic.x;\n                if (i == 0 && m == 0) {\n                  dStart = d;\n                }\n                var width = 0.005;\n                if (!i) {\n                    width = 0.01;\n                }\n                var dd = d;\n                Grids._eclipticOverviewLineList.addLine(Vector3d._transformCoordinate(Vector3d.create(Math.cos((dd * Math.PI * 2) / 360), width, Math.sin((dd * Math.PI * 2) / 360)), mat), Vector3d._transformCoordinate(Vector3d.create(Math.cos((dd * Math.PI * 2) / 360), -width, Math.sin((dd * Math.PI * 2) / 360)), mat));\n                if (drawCircle && !(i == 0 && m == 0)) {\n                  Grids._eclipticOverviewLineList.addLine(Vector3d._transformCoordinate(Vector3d.create(Math.cos((dd * Math.PI * 2) / 360), 0, Math.sin((dd * Math.PI * 2) / 360)), mat), Vector3d._transformCoordinate(Vector3d.create(Math.cos((dPrev * Math.PI * 2) / 360), 0, Math.sin((dPrev * Math.PI * 2) / 360)), mat));\n                }\n                index++;\n                jYear += 1;\n                dPrev = d;\n            }\n            d += Grids._monthDays[m];\n        }\n        if (drawCircle) {\n          Grids._eclipticOverviewLineList.addLine(Vector3d._transformCoordinate(Vector3d.create(Math.cos((dStart * Math.PI * 2) / 360), 0, Math.sin((dStart * Math.PI * 2) / 360)), mat), Vector3d._transformCoordinate(Vector3d.create(Math.cos((dd * Math.PI * 2) / 360), 0, Math.sin((dd * Math.PI * 2) / 360)), mat));\n        }\n    }\n    Grids._eclipticOverviewLineList.drawLines(renderContext, opacity, drawColor);\n    return true;\n};\n\nexport function drawSkyOverlays() {\n    if (Settings.get_active().get_showConstellationPictures() && !this.freestandingMode) {\n        Constellations.drawArtwork(this.renderContext);\n    }\n    if (Settings.get_active().get_showConstellationFigures()) {\n        if (WWTControl.constellationsFigures == null) {\n            WWTControl.constellationsFigures = Constellations.create(\n                'Constellations',\n                URLHelpers.singleton.engineAssetUrl('figures.txt'),\n                false,  // \"boundry\"\n                false,  // \"noInterpollation\"\n                false,  // \"resource\"\n            );\n        }\n        WWTControl.constellationsFigures.draw(this.renderContext, false, 'UMA', false);\n    }\n    if (Settings.get_active().get_showEclipticGrid()) {\n        Grids.drawEclipticGrid(this.renderContext, 1, Settings.get_active().get_eclipticGridColor());\n        if (Settings.get_active().get_showEclipticGridText()) {\n            Grids.drawEclipticGridText(this.renderContext, 1, Settings.get_active().get_eclipticGridColor());\n        }\n    }\n    if (Settings.get_active().get_showGalacticGrid()) {\n        Grids.drawGalacticGrid(this.renderContext, 1, Settings.get_active().get_galacticGridColor());\n        if (Settings.get_active().get_showGalacticGridText()) {\n            Grids.drawGalacticGridText(this.renderContext, 1, Settings.get_active().get_galacticGridColor());\n        }\n    }\n    if (Settings.get_active().get_showAltAzGrid()) {\n        Grids.drawAltAzGrid(this.renderContext, 1, Settings.get_active().get_altAzGridColor());\n    }\n    if (Settings.get_active().get_showAltAzGridText()) {\n        Grids.drawAltAzGridText(this.renderContext, 1, Settings.get_active().get_altAzGridColor());\n    }\n    if (Settings.get_active().get_showPrecessionChart()) {\n        Grids.drawPrecessionChart(this.renderContext, 1, Settings.get_active().get_precessionChartColor());\n    }\n    if (Settings.get_active().get_showEcliptic()) {\n        Grids.drawEcliptic(this.renderContext, 1, Settings.get_active().get_eclipticColor());\n        if (Settings.get_active().get_showEclipticOverviewText()) {\n            Grids.drawEclipticText(this.renderContext, 1, Settings.get_active().get_eclipticColor());\n        }\n    }\n    if (Settings.get_active().get_showGrid()) {\n        Grids.drawEquitorialGrid(this.renderContext, 1, Settings.get_active().get_equatorialGridColor());\n        if (Settings.get_active().get_showEquatorialGridText()) {\n            Grids.drawEquitorialGridText(this.renderContext, 1, Settings.get_active().get_equatorialGridColor());\n        }\n    }\n    if (Settings.get_active().get_showConstellationBoundries()) {\n        if (WWTControl.constellationsBoundries == null) {\n            WWTControl.constellationsBoundries = Constellations.create(\n                'Constellations',\n                URLHelpers.singleton.engineAssetUrl('constellations.txt'),\n                true,   // \"boundry\"\n                false,  // \"noInterpollation\"\n                false,  // \"resource\"\n            );\n        }\n        WWTControl.constellationsBoundries.draw(this.renderContext, Settings.get_active().get_showConstellationSelection(), this.constellation, false);\n    }\n    if (Settings.get_active().get_showConstellationLabels()) {\n        Constellations.drawConstellationNames(this.renderContext, 1, Colors.get_yellow());\n    }\n}\n","import { Ref, ref, computed } from \"vue\";\nimport { Classification, SolarSystemObjects } from \"@wwtelescope/engine-types\";\nimport { Place} from \"@wwtelescope/engine\";\nimport { AltAzRad, EquatorialRad, LocationDeg, LocationRad } from \"./types\";\nimport { equatorialToHorizontal } from \"./utils\";\nimport { D2R } from \"@cosmicds/vue-toolkit\";\nimport { engineStore } from \"@wwtelescope/engine-pinia\";\ntype WWTEngineStore = ReturnType<typeof engineStore>;\n\n\nconst SECONDS_PER_DAY = 60 * 60 * 24;\nconst MILLISECONDS_PER_DAY = 1000 * SECONDS_PER_DAY;\n\nconst secondsInterval = 40;\nconst MILLISECONDS_PER_INTERVAL = 1000 * secondsInterval;\n\nexport function useSun(store: WWTEngineStore, location: Ref<LocationDeg>, _selectedTime: Ref<number> | number, _selectedTimezoneOffset: Ref<number> | number) {\n  \n  store.waitForReady().then(async ()=>{\n    // setup any watchers here\n  });\n  \n  const selectedTime = ref(_selectedTime);\n  const selectedTimezoneOffset = ref(_selectedTimezoneOffset);\n  \n  const locationRad = computed<LocationRad>(() => {\n    return {\n      latitudeRad: location.value.latitudeDeg * D2R,\n      longitudeRad: location.value.longitudeDeg * D2R,\n    };\n  });\n\n  const sunPlace = new Place();\n  sunPlace.set_names([\"Sun\"]);\n  sunPlace.set_classification(Classification.solarSystem);\n  sunPlace.set_target(SolarSystemObjects.sun);\n  sunPlace.set_zoomLevel(20);\n  \n  const sunPosition = computed<EquatorialRad>(() =>{\n    return {\n      raRad: sunPlace.get_RA() * 15 * D2R,\n      decRad: sunPlace.get_dec() * D2R,\n    } as EquatorialRad;\n  });\n\n  function getSunPositionAtTime(time: Date): AltAzRad {\n    const sunAltAz = equatorialToHorizontal(sunPosition.value.raRad, sunPosition.value.decRad, locationRad.value.latitudeRad, locationRad.value.longitudeRad, time);\n    return sunAltAz;\n  }\n\n  // function that finds at what time the sun will reach a given altitude during the current day to within 15 minutes\n  function getTimeforSunAlt(altDeg: number): { rising: number | null; setting: number | null; } {\n    // takes about 45ms to run\n    // search for time when sun is at given altitude\n    // start at 12:00am and search every MINUTES_PER_INTERVAL\n    const minTime = selectedTime.value - (selectedTime.value % MILLISECONDS_PER_DAY) - selectedTimezoneOffset.value + MILLISECONDS_PER_DAY * 0.5;\n    const maxTime = minTime + MILLISECONDS_PER_DAY * 0.5;\n    // const ehr = eclipticHorizonAngle(location.latitudeRad, dateTime);\n    let time = minTime;\n    let sunAlt = getSunPositionAtTime(new Date(time)).altRad; // negative\n    // find the two times it crosses the given altitude\n    while ((sunAlt < altDeg * D2R) && (time < maxTime)) {\n      time += MILLISECONDS_PER_INTERVAL;\n      sunAlt = getSunPositionAtTime(new Date(time)).altRad;\n    }\n    const rising = time == maxTime ? null : time;\n    while ((sunAlt > altDeg * D2R) && (time < maxTime)) {\n      time += MILLISECONDS_PER_INTERVAL;\n      sunAlt = getSunPositionAtTime(new Date(time)).altRad;\n    }\n    const setting = time == maxTime ? null : time;\n\n    return {\n      'rising': (rising !== null && setting !== null) ? Math.min(rising, setting) : rising,\n      'setting': (rising !== null && setting !== null) ? Math.max(rising, setting) : setting\n    };\n  }\n  \n  \n  return { getTimeforSunAlt, getSunPositionAtTime, sunPlace, sunPosition };\n}\n","import { defineComponent as _defineComponent } from 'vue'\nimport { resolveComponent as _resolveComponent, createVNode as _createVNode, withKeys as _withKeys, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, normalizeStyle as _normalizeStyle, resolveDirective as _resolveDirective, openBlock as _openBlock, createElementBlock as _createElementBlock, withDirectives as _withDirectives, unref as _unref, vShow as _vShow, createCommentVNode as _createCommentVNode, Transition as _Transition, normalizeClass as _normalizeClass, toDisplayString as _toDisplayString, createBlock as _createBlock, mergeProps as _mergeProps } from \"vue\"\n\nconst _hoisted_1 = { id: \"main-content\" }\nconst _hoisted_2 = {\n  id: \"splash-screen-acknowledgements\",\n  class: \"small\"\n}\nconst _hoisted_3 = { id: \"splash-screen-logos\" }\nconst _hoisted_4 = {\n  key: 0,\n  id: \"introduction-overlay\"\n}\nconst _hoisted_5 = { id: \"intro-window-close-button\" }\nconst _hoisted_6 = { class: \"intro-text\" }\nconst _hoisted_7 = { style: {\"color\":\"#f4ba3e\"} }\nconst _hoisted_8 = { style: {\"color\":\"#f4ba3e\"} }\nconst _hoisted_9 = {\n  class: \"modal\",\n  id: \"modal-loading\"\n}\nconst _hoisted_10 = { id: \"top-content\" }\nconst _hoisted_11 = { id: \"left-buttons\" }\nconst _hoisted_12 = { id: \"center-buttons\" }\nconst _hoisted_13 = { id: \"geolocation-close\" }\nconst _hoisted_14 = { id: \"geolocation-controls\" }\nconst _hoisted_15 = { id: \"right-buttons\" }\nconst _hoisted_16 = {\n  id: \"controls\",\n  class: \"control-icon-wrapper\"\n}\nconst _hoisted_17 = { id: \"controls-top-row\" }\nconst _hoisted_18 = {\n  key: 0,\n  id: \"control-checkboxes\"\n}\nconst _hoisted_19 = { id: \"bottom-content\" }\nconst _hoisted_20 = { id: \"date-picker\" }\nconst _hoisted_21 = { id: \"change-flags\" }\nconst _hoisted_22 = {\n  key: 0,\n  id: \"body-logos\"\n}\nconst _hoisted_23 = { class: \"video-wrapper\" }\n\nimport { ref, reactive, computed, onMounted, nextTick, watch } from \"vue\";\nimport { Color, Grids, Planets, Settings, WWTControl } from \"@wwtelescope/engine\";\nimport { SolarSystemObjects } from \"@wwtelescope/engine-types\";\nimport { engineStore } from \"@wwtelescope/engine-pinia\";\nimport { BackgroundImageset, LocationDeg, skyBackgroundImagesets, supportsTouchscreen, blurActiveElement, useWWTKeyboardControls, D2R, API_BASE_URL } from \"@cosmicds/vue-toolkit\";\nimport { useDisplay } from \"vuetify\";\nimport { v4 } from \"uuid\";\n\nimport { useTimezone } from \"./timezones\";\nimport { horizontalToEquatorial, skyOpacityForSunAlt } from \"./utils\";\nimport { resetAltAzGridText, makeAltAzGridText, drawPlanets, renderOneFrame, drawEcliptic, drawSkyOverlays } from \"./wwt-hacks\";\nimport { MapBoxFeature, MapBoxFeatureCollection, geocodingInfoForSearch, textForLocation } from \"@cosmicds/vue-toolkit/src/mapbox\";\n// import { useGeolocation } from \"@cosmicds/vue-toolkit\";\nimport { useSun } from './useSun';\n\nconst UUID_KEY = \"eclipse-mini-uuid\" as const;\nconst OPT_OUT_KEY = \"eclipse-mini-optout\" as const;\nconst SKIP_INTRO_CONTENT_KEY = \"skip-intro-content\" as const;\ntype SheetType = \"text\" | \"video\";\nexport interface PlanetParadeProps {\n  wwtNamespace?: string;\n}\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'PlanetParade',\n  props: {\n    wwtNamespace: { default: \"planet-parade\" }\n  },\n  setup(__props: any) {\n\nconst STORY_DATA_URL = `${API_BASE_URL}/planet-parade/data`;\n\nconst maybeUUID = window.localStorage.getItem(UUID_KEY);\nconst storedOptOut = window.localStorage.getItem(OPT_OUT_KEY);\nconst skipIntroContent = window.localStorage.getItem(SKIP_INTRO_CONTENT_KEY)?.toLowerCase() === \"true\";\nconst existingUser = maybeUUID !== null;\nconst uuid = maybeUUID ?? v4();\nif (!existingUser) {\n  window.localStorage.setItem(UUID_KEY, uuid);\n}\nlet infoTimeMs = 0;\nlet videoPlayingTimeMs = 0;\nlet videoPlaying = false;\nlet videoOpened = false;\nlet videoPlayed = false;\nlet appStartTimestamp = Date.now();\nlet infoStartTimestamp = null as number | null;\nlet videoPlayingStartTimestamp = null as number | null;\n\nlet userSelectedSearchLocations: [number, number][] = [];\nlet userSelectedMapLocations: [number, number][] = [];\n\nconst store = engineStore();\n\nuseWWTKeyboardControls(store);\n\nconst touchscreen = supportsTouchscreen();\nconst { smAndDown, smAndUp, xs } = useDisplay();\n\nconst _props = __props;\n\nconst queryHideSplash = new URLSearchParams(window.location.search).get(\"splash\")?.toLowerCase() === \"false\";\nconst splash = !(queryHideSplash || skipIntroContent);\nconst showSplashScreen = ref(splash);\nconst backgroundImagesets = reactive<BackgroundImageset[]>([]);\nconst sheet = ref<SheetType | null>(null);\nconst layersLoaded = ref(false);\nconst positionSet = ref(false);\nconst accentColor = ref(\"#f4ba3e\");\nconst accentColor2 = ref(\"#6793ff\");\nconst buttonColor = ref(\"#f4ba3e\");\nconst tab = ref(0);\nconst showHorizon = ref(true);\nconst showAltAzGrid = ref(true);\nconst showEcliptic = ref(true);\nconst showLocationSelector = ref(false);\nconst playing = ref(false);\nconst showControls = ref(smAndUp.value);\nconst showConstellations = ref(false);\nconst showPlanetLabels = ref(true);\nconst inIntro = ref(false);\nconst showPrivacyDialog = ref(false);\nconst datePickerOpen = ref(false);\nconst skipIntroChecked = ref(skipIntroContent);\n\nconst optOut = typeof storedOptOut === \"string\" ? storedOptOut === \"true\" : null;\nconst responseOptOut = ref(optOut);\n\nconst geocodingOptions = {\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  access_token: process.env.VUE_APP_MAPBOX_ACCESS_TOKEN ?? \"\", \n};\n\nconst selectedLocation = ref<LocationDeg>({\n  longitudeDeg: -71.1056,\n  latitudeDeg: 42.3581,\n});\nconst selectedLocationText = ref(\"\");\nupdateSelectedLocationText();\n\n// const { geolocation, geolocate} = useGeolocation();\n// function useGeolocated() {\n//   if (!geolocation.value) {return;}\n//   selectedLocation.value = { latitudeDeg: geolocation.value.latitude, longitudeDeg: geolocation.value.longitude };\n// }\n// watch(\n//   geolocation,\n//   (location) => {\n//     if (location) {\n//       selectedLocation.value = { latitudeDeg: location?.latitude, longitudeDeg: location?.longitude };\n//     }\n//   }\n// );\n\nconst searchErrorMessage = ref<string | null>(null);\nconst { selectedTimezoneOffset, shortTimezone, browserTimezoneOffset } = useTimezone(selectedLocation);\n\nconst selectedTime = ref(Date.now());\n\nconst { getTimeforSunAlt, getSunPositionAtTime } = useSun(store, selectedLocation, selectedTime, selectedTimezoneOffset);\n// faking localization because\n// <date-time-picker> and <time-display> are not timezone aware\nconst localSelectedDate = computed({\n  // if you console log this date it will still say the local timezone \n  // as determined by the browser Intl.DateTimeFormat().resolvedOptions().timeZone\n  // but we have manually offset it so the hours are correct for the selected timezone\n  get: () => {\n    const time = selectedTime.value;\n    const fakeUTC = time + browserTimezoneOffset;\n    return new Date(fakeUTC + selectedTimezoneOffset.value);\n  },\n  set: (value: Date) => {\n    // get local time\n    const time = value.getTime();\n    // undo fake localization\n    const newTime = time - selectedTimezoneOffset.value - browserTimezoneOffset;\n    selectedTime.value = new Date(newTime).getTime();\n  }\n});\n\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nconst wwtSettings: Settings = Settings.get_active();\n\nfunction doWWTModifications() {\n\n  Grids._makeAltAzGridText = makeAltAzGridText;\n  Grids.drawEcliptic = drawEcliptic;\n\n  // We need to render one frame ahead of time\n  // as there's a lot of setup done on the first frame\n  // render that we need to use\n  WWTControl.singleton.renderOneFrame();\n\n  const boundRenderOneFrame = renderOneFrame.bind(WWTControl.singleton);\n  const newFrameRender = function() { \n    boundRenderOneFrame(\n      showHorizon.value,\n      showHorizon.value,\n      showPlanetLabels.value,\n    );\n  };\n\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-ignore\n  WWTControl.singleton._drawSkyOverlays = drawSkyOverlays.bind(WWTControl.singleton);\n\n  // as well as our custom text overlays\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-ignore\n  WWTControl.singleton.renderOneFrame = newFrameRender;\n\n  const originalUpdatePlanetLocations = Planets.updatePlanetLocations;\n  const planetScales = [\n    8,  // Sun\n    1.25,  // Mercury\n    1.25,  // Venus\n    1.25,  // Mars\n    2.5,  // Jupiter\n    4.5,  // Saturn\n    2,  // Uranus\n    2,  // Neptune\n    1,  // Pluto\n    1.25,  // Moon\n  ];\n  function newUpdatePlanetLocations(threeD: boolean) {\n    originalUpdatePlanetLocations(threeD);\n    for (let i = 0; i <= SolarSystemObjects.moon; i++) {\n      Planets._planetScales[i] = planetScales[i];\n    }\n  }\n  Planets.updatePlanetLocations = newUpdatePlanetLocations;\n  Planets.drawPlanets = drawPlanets;\n\n  // Recall that zoom = 6 * FOV, in WWT\n  const maxFOV = 90;\n  WWTControl.singleton.set_zoomMax(maxFOV * 6);\n\n}\n\nonMounted(() => {\n  store.waitForReady().then(async () => {\n    skyBackgroundImagesets.forEach(iset => backgroundImagesets.push(iset));\n\n    // If there are layers to set up, do that here!\n    layersLoaded.value = true;\n\n    const altTime = getTimeforSunAlt(2).setting;\n    if (altTime) {\n      selectedTime.value = altTime;\n    }\n    setTimeout(() => resetCamera().then(() => positionSet.value = true), 100);\n\n    store.applySetting([\"localHorizonMode\", true]);\n    store.applySetting([\"altAzGridColor\", Color.fromArgb(180, 133, 201, 254)]);\n    store.applySetting([\"eclipticColor\", Color.fromArgb(255, 255, 0, 255)]);\n    store.applySetting([\"actualPlanetScale\", false]);\n    updateAltAzGrid(showAltAzGrid.value);\n    updateAltAzGridText(showAltAzGrid.value || showHorizon.value);\n    updateEcliptic(showEcliptic.value);\n    updateConstellations(showConstellations.value);\n    updateWWTLocation(selectedLocation.value);\n    store.setClockSync(false);\n    store.setClockRate(1800);\n\n    doWWTModifications();\n    // geolocate().then(() => {\n    //   console.log('got location');\n    //   useGeolocated(); \n    //   selectedTime.value = todayAt4pm.value;\n    //   resetCamera();\n    // });\n    \n    createUserEntry();\n\n    setInterval(() => {\n      if (playing.value) {\n        const time = store.currentTime;\n        selectedTime.value = time.getTime();\n      }\n      const sunPosition = getSunPositionAtTime(store.currentTime);\n      updateEclipticColor(sunPosition.altRad);\n    }, 500);\n\n    window.addEventListener(\"keyup\", (event: KeyboardEvent) => {\n      if ([\"Esc\", \"Escape\"].includes(event.key) && showVideoSheet.value) {\n        showVideoSheet.value = false;\n      }\n    });\n\n    window.addEventListener(\"visibilitychange\", () => {\n      if (document.visibilityState === \"hidden\") {\n        updateUserData();\n      } else {\n        resetData();\n      }\n    });\n  });\n});\n\nconst ready = computed(() => layersLoaded.value && positionSet.value);\n\n/* `isLoading` is a bit redundant here, but it could potentially have independent logic */\nconst isLoading = computed(() => !ready.value);\n\n// It doesn't really matter which one we note here\nconst inNorthernHemisphere = computed(() => selectedLocation.value.latitudeDeg > 0);\n\nconst dateTime = computed(() => new Date(selectedTime.value));\n\n/* Properties related to device/screen characteristics */\nconst smallSize = computed(() => smAndDown.value);\n\nconst mobile = computed(() => smallSize.value && touchscreen);\n\nconst xSmallSize = computed(() => xs.value);\n\n/* This lets us inject component data into element CSS */\nconst cssVars = computed(() => {\n  return {\n    \"--accent-color\": accentColor.value,\n    \"--accent-color2\": accentColor2.value,\n    \"--app-content-height\": showTextSheet.value ? \"66%\" : \"100%\",\n  };\n});\n\n\n/**\n  Computed flags that control whether the relevant dialogs display.\n  The `sheet` data member stores which sheet is open, so these are just\n  computed wrappers around modifying/querying that which can be used as\n  dialog v-model values\n*/\nconst showTextSheet = computed({\n  get() {\n    return sheet.value === \"text\";\n  },\n  set(_value: boolean) {\n    selectSheet(\"text\");\n  }\n});\n\nconst showVideoSheet = computed({\n  get() {\n    return sheet.value === \"video\";\n  },\n  set(value: boolean) {\n    selectSheet(\"video\");\n    if (!value) {\n      const video = document.querySelector(\"#info-video\") as HTMLVideoElement;\n      video.pause();\n    } else {\n      nextTick(() => {\n        const video = document.querySelector(\"#info-video\") as HTMLVideoElement;\n        video.addEventListener(\"play\", (_event: Event) => {\n          videoPlaying = true;\n          videoPlayingStartTimestamp = Date.now();\n          videoPlayed = true;\n        });\n\n        video.addEventListener(\"pause\", (_event: Event) => {\n          videoPlaying = false;\n          const now = Date.now();\n          if (videoPlayingStartTimestamp !== null) {\n            videoPlayingTimeMs += (now - videoPlayingStartTimestamp);\n            videoPlayingStartTimestamp = null;\n          }\n        });\n      });\n    }\n  }\n});\n\n/**\n  This is convenient if there's any other logic that we want to run\n  when the splash screen is closed\n*/\nfunction closeSplashScreen() {\n  showSplashScreen.value = false;\n}\n\nfunction selectSheet(sheetType: SheetType | null) {\n  if (sheet.value === sheetType) {\n    sheet.value = null;\n    nextTick(() => {\n      blurActiveElement();\n    });\n  } else {\n    sheet.value = sheetType;\n  }\n}\n\nfunction getTextForLocation(longitudeDeg: number, latitudeDeg: number): Promise<string> {\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  return textForLocation(longitudeDeg, latitudeDeg, geocodingOptions);\n}\n\nfunction setLocationFromFeature(feature: MapBoxFeature) {\n  selectedLocation.value = { longitudeDeg: feature.center[0], latitudeDeg: feature.center[1] };\n  getTextForLocation(feature.center[0], feature.center[1]).then(text => {\n    selectedLocationText.value = text;\n  }).catch(_err => {\n    searchErrorMessage.value = \"An error occurred while searching\";\n  });\n}\n\nfunction setLocationFromSearchFeature(feature: MapBoxFeature) {\n  setLocationFromFeature(feature);\n  userSelectedSearchLocations.push(feature.center);\n}\n\nasync function updateSelectedLocationText() {\n  selectedLocationText.value = await getTextForLocation(selectedLocation.value.longitudeDeg, selectedLocation.value.latitudeDeg);\n}\n\nfunction searchProvider(text: string): Promise<MapBoxFeatureCollection> {\n  return geocodingInfoForSearch(text, geocodingOptions);\n}\n\nfunction updateLocationFromMap(location: LocationDeg) {\n  selectedLocation.value = location;\n  userSelectedMapLocations.push([location.latitudeDeg, location.longitudeDeg]);\n}\n\nasync function createUserEntry() {\n  if (responseOptOut.value) {\n    return;\n  }\n\n  const response = await fetch(`${STORY_DATA_URL}/${uuid}`, {\n    method: \"GET\",\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    headers: { \"Authorization\": process.env.VUE_APP_CDS_API_KEY ?? \"\" }\n  });\n  const content = await response.json();\n  const exists = response.status === 200 && content.response?.user_uuid != undefined;\n  if (exists) {\n    return;\n  }\n\n  fetch(`${STORY_DATA_URL}`, {\n    method: \"PUT\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      \"Authorization\": process.env.VUE_APP_CDS_API_KEY ?? \"\",\n    },\n    body: JSON.stringify({\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      user_uuid: uuid,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      user_selected_search_locations: userSelectedSearchLocations,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      user_selected_map_locations: userSelectedMapLocations,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      app_time_ms: 0, info_time_ms: 0, video_time_ms: 0,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      video_opened: videoOpened, video_played: videoPlayed,\n    }),\n  });\n}\n\nfunction resetData() {\n  userSelectedMapLocations = [];\n  userSelectedSearchLocations = [];\n  infoTimeMs = 0;\n  videoPlayingTimeMs = 0;\n  const now = Date.now();\n  appStartTimestamp = now;\n  infoStartTimestamp = showTextSheet.value ? now : null;\n  videoPlayingStartTimestamp = videoPlaying ? now : null;\n}\n\nasync function updateUserData() {\n  if (responseOptOut.value) {\n    return;\n  }\n\n  const now = Date.now();\n  const infoTime = (showTextSheet.value && infoStartTimestamp !== null) ? now - infoStartTimestamp : infoTimeMs;\n  const videoTime = (videoPlaying && videoPlayingStartTimestamp !== null) ? now - videoPlayingStartTimestamp : videoPlayingTimeMs;\n\n  fetch(`${STORY_DATA_URL}/${uuid}`, {\n    method: \"PATCH\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      \"Authorization\": process.env.VUE_APP_CDS_API_KEY ?? \"\",\n    },\n    body: JSON.stringify({\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      user_selected_search_locations: userSelectedSearchLocations,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      user_selected_map_locations: userSelectedMapLocations,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      delta_app_time_ms: now - appStartTimestamp,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      delta_info_time_ms: infoTime,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      delta_video_time_ms: videoTime,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      video_opened: videoOpened, video_played: videoPlayed,\n    }),\n    keepalive: true,\n  }).then(() => {\n    resetData();\n  });\n}\n\nasync function resetCamera(): Promise<void> {\n  const time = store.currentTime;\n\n  const latRad = selectedLocation.value.latitudeDeg * D2R;\n  const lonRad = selectedLocation.value.longitudeDeg * D2R;\n\n  const sunAltAz = getSunPositionAtTime(time);\n  const sunAz = sunAltAz.azRad;\n  const startAlt = smallSize.value ? 15 * D2R : 25 * D2R;\n  const startRADec = horizontalToEquatorial(\n    startAlt,\n    sunAz,\n    latRad,\n    lonRad,\n    time,\n  );\n\n  return store.gotoRADecZoom({\n    raRad: startRADec.raRad,\n    decRad: startRADec.decRad,\n    zoomDeg: 360,\n    instant: true,\n  });\n  \n}\n\nfunction updateWWTLocation(location: LocationDeg) {\n  wwtSettings.set_locationLat(location.latitudeDeg);\n  wwtSettings.set_locationLng(location.longitudeDeg);\n}\n\nfunction updateAltAzGrid(show: boolean) {\n  store.applySetting([\"showAltAzGrid\", show]);\n}\n\nfunction updateAltAzGridText(show: boolean) {\n  store.applySetting([\"showAltAzGridText\", show]);\n}\n\nfunction updateEcliptic(show: boolean) {\n  store.applySetting([\"showEcliptic\", show]);\n  // store.applySetting([\"showEclipticOverviewText\", show]);\n}\n\nfunction updateEclipticColor(sunAlt: number) {\n  const opacity = skyOpacityForSunAlt(sunAlt);\n  const component = 255 - opacity * (255 - 119);\n  const color = Color.fromArgb(255, component, 0, component);\n  store.applySetting([\"eclipticColor\", color]);\n}\n\nfunction updateConstellations(show: boolean) {\n  store.applySetting([\"showConstellationFigures\", show]);\n  store.applySetting([\"showConstellationLabels\", show]);\n}\n\nwatch(selectedLocation, (location: LocationDeg) => {\n  console.log('selectedLocation changed', location);\n  updateSelectedLocationText();\n  updateWWTLocation(location);\n  resetCamera();\n  WWTControl.singleton.renderOneFrame();\n});\n\n// watch(selectedTime, (value: number) => {\n//   console.log(value);});\nwatch(playing, (play: boolean) => {\n  store.setClockSync(play);\n});\n\nwatch(showAltAzGrid, (show: boolean) => {\n  updateAltAzGrid(show);\n  updateAltAzGridText(show || showHorizon.value);\n});\nwatch(showEcliptic, updateEcliptic);\nwatch(showConstellations, updateConstellations);\nwatch(showHorizon, (show: boolean) => {\n  updateAltAzGridText(show || showAltAzGrid.value);\n});\n\nwatch(dateTime, (dt: Date) => {\n  store.setTime(dt);\n});\n\nwatch(skipIntroChecked, (checked: boolean) => {\n  window.localStorage.setItem(SKIP_INTRO_CONTENT_KEY, String(checked));\n});\n\nwatch(showTextSheet, (show: boolean) => {\n  const now = Date.now();\n  if (show) {\n    infoStartTimestamp = now; \n  } else if (infoStartTimestamp !== null) {\n    infoTimeMs += (now - infoStartTimestamp);\n    infoStartTimestamp = null;\n  }\n});\n\nwatch(showVideoSheet, (show: boolean) => {\n  if (show) {\n    videoOpened = true;\n  }\n});\n\nwatch(inNorthernHemisphere, (_inNorth: boolean) => resetAltAzGridText());\n\nwatch(showSplashScreen, (show: boolean) => {\n  if (!show) {\n    inIntro.value = true;\n  }\n});\n\nwatch(inIntro, (intro: boolean) => {\n  if (!intro) {\n    if (!showSplashScreen.value && responseOptOut.value === null) {\n      showPrivacyDialog.value = true;\n    }\n  }\n});\n\nwatch(responseOptOut, (optOut: boolean | null) => {\n  if (optOut !== null) {\n    window.localStorage.setItem(OPT_OUT_KEY, String(optOut));\n  }\n});\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_WorldWideTelescope = _resolveComponent(\"WorldWideTelescope\")!\n  const _component_font_awesome_icon = _resolveComponent(\"font-awesome-icon\")!\n  const _component_v_btn = _resolveComponent(\"v-btn\")!\n  const _component_credit_logos = _resolveComponent(\"credit-logos\")!\n  const _component_v_overlay = _resolveComponent(\"v-overlay\")!\n  const _component_v_checkbox = _resolveComponent(\"v-checkbox\")!\n  const _component_v_card = _resolveComponent(\"v-card\")!\n  const _component_v_dialog = _resolveComponent(\"v-dialog\")!\n  const _component_icon_button = _resolveComponent(\"icon-button\")!\n  const _component_geolocation_button = _resolveComponent(\"geolocation-button\")!\n  const _component_location_search = _resolveComponent(\"location-search\")!\n  const _component_location_selector = _resolveComponent(\"location-selector\")!\n  const _component_time_display = _resolveComponent(\"time-display\")!\n  const _component_v_icon = _resolveComponent(\"v-icon\")!\n  const _component_date_time_picker = _resolveComponent(\"date-time-picker\")!\n  const _component_speed_control = _resolveComponent(\"speed-control\")!\n  const _component_v_card_text = _resolveComponent(\"v-card-text\")!\n  const _component_v_spacer = _resolveComponent(\"v-spacer\")!\n  const _component_v_card_actions = _resolveComponent(\"v-card-actions\")!\n  const _component_v_tab = _resolveComponent(\"v-tab\")!\n  const _component_v_tabs = _resolveComponent(\"v-tabs\")!\n  const _component_v_window_item = _resolveComponent(\"v-window-item\")!\n  const _component_v_chip = _resolveComponent(\"v-chip\")!\n  const _component_v_col = _resolveComponent(\"v-col\")!\n  const _component_v_row = _resolveComponent(\"v-row\")!\n  const _component_funding_acknowledgement = _resolveComponent(\"funding-acknowledgement\")!\n  const _component_v_container = _resolveComponent(\"v-container\")!\n  const _component_v_window = _resolveComponent(\"v-window\")!\n  const _component_v_app = _resolveComponent(\"v-app\")!\n  const _directive_click_outside = _resolveDirective(\"click-outside\")!\n\n  return (_openBlock(), _createBlock(_component_v_app, {\n    id: \"app\",\n    style: _normalizeStyle(cssVars.value)\n  }, {\n    default: _withCtx(() => [\n      _createElementVNode(\"div\", _hoisted_1, [\n        _createVNode(_component_WorldWideTelescope, { \"wwt-namespace\": _ctx.wwtNamespace }, null, 8, [\"wwt-namespace\"]),\n        _createVNode(_component_v_overlay, {\n          \"model-value\": showSplashScreen.value,\n          absolute: \"\",\n          opacity: \"0.6\",\n          style: _normalizeStyle(cssVars.value),\n          id: \"splash-overlay\"\n        }, {\n          default: _withCtx(() => [\n            _withDirectives((_openBlock(), _createElementBlock(\"div\", {\n              id: \"splash-screen\",\n              style: _normalizeStyle(cssVars.value)\n            }, [\n              _createVNode(_component_font_awesome_icon, {\n                id: \"close-splash-button\",\n                onClick: closeSplashScreen,\n                onKeyup: _withKeys(closeSplashScreen, [\"enter\"]),\n                icon: \"xmark\",\n                tabindex: \"0\"\n              }),\n              _cache[52] || (_cache[52] = _createElementVNode(\"div\", { id: \"splash-screen-text\" }, [\n                _createElementVNode(\"p\", null, \"Want to see the\"),\n                _createElementVNode(\"p\", { class: \"highlight\" }, \"Planetary Parade?\")\n              ], -1)),\n              _createElementVNode(\"div\", null, [\n                _createVNode(_component_v_btn, {\n                  class: \"splash-get-started\",\n                  onClick: closeSplashScreen,\n                  color: accentColor.value,\n                  density: xSmallSize.value ? 'compact' : 'default',\n                  size: \"x-large\",\n                  variant: \"elevated\",\n                  rounded: \"lg\"\n                }, {\n                  default: _withCtx(() => _cache[46] || (_cache[46] = [\n                    _createTextVNode(\" Get Started \")\n                  ])),\n                  _: 1\n                }, 8, [\"color\", \"density\"])\n              ]),\n              _createElementVNode(\"div\", _hoisted_2, [\n                _cache[47] || (_cache[47] = _createTextVNode(\" This Data Story is brought to you by \")),\n                _cache[48] || (_cache[48] = _createElementVNode(\"a\", {\n                  href: \"https://www.cosmicds.cfa.harvard.edu/\",\n                  target: \"_blank\",\n                  rel: \"noopener noreferrer\"\n                }, \"Cosmic Data Stories\", -1)),\n                _cache[49] || (_cache[49] = _createTextVNode(\" and \")),\n                _cache[50] || (_cache[50] = _createElementVNode(\"a\", {\n                  href: \"https://www.worldwidetelescope.org/home/\",\n                  target: \"_blank\",\n                  rel: \"noopener noreferrer\"\n                }, \"WorldWide Telescope\", -1)),\n                _cache[51] || (_cache[51] = _createTextVNode(\". \")),\n                _createElementVNode(\"div\", _hoisted_3, [\n                  _createVNode(_component_credit_logos, { \"logo-size\": \"5vmin\" })\n                ])\n              ])\n            ], 4)), [\n              [_directive_click_outside, closeSplashScreen]\n            ])\n          ]),\n          _: 1\n        }, 8, [\"model-value\", \"style\"]),\n        _createVNode(_component_v_dialog, {\n          modelValue: inIntro.value,\n          \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((inIntro).value = $event))\n        }, {\n          default: _withCtx(() => [\n            (inIntro.value)\n              ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [\n                  _createVNode(_component_v_card, { class: \"info-card elevation-5\" }, {\n                    default: _withCtx(() => [\n                      _createElementVNode(\"div\", _hoisted_5, [\n                        _createVNode(_component_font_awesome_icon, {\n                          size: \"xl\",\n                          class: \"ma-1\",\n                          color: accentColor.value,\n                          icon: \"xmark\",\n                          onClick: _cache[0] || (_cache[0] = ($event: any) => (inIntro.value = !inIntro.value)),\n                          onKeyup: _cache[1] || (_cache[1] = _withKeys(($event: any) => (inIntro.value = !inIntro.value), [\"enter\"])),\n                          tabindex: \"0\",\n                          \"tooltip-location\": \"start\"\n                        }, null, 8, [\"color\"])\n                      ]),\n                      _createElementVNode(\"div\", _hoisted_6, [\n                        _cache[66] || (_cache[66] = _createElementVNode(\"h3\", {\n                          style: {\"color\":\"#f4ba3e\"},\n                          class: \"mb-2\"\n                        }, \"Quick Start\", -1)),\n                        _createElementVNode(\"ol\", null, [\n                          _createElementVNode(\"li\", null, [\n                            _cache[53] || (_cache[53] = _createTextVNode(\"Set desired location using \")),\n                            _createVNode(_component_font_awesome_icon, {\n                              class: \"bullet-icon\",\n                              icon: \"location-dot\",\n                              style: {\"color\":\"#f4ba3e\"}\n                            }),\n                            _cache[54] || (_cache[54] = _createTextVNode()),\n                            _cache[55] || (_cache[55] = _createElementVNode(\"strong\", null, [\n                              _createElementVNode(\"span\", { style: {\"color\":\"#f4ba3e\"} }, \"(top-center)\")\n                            ], -1)),\n                            _cache[56] || (_cache[56] = _createTextVNode(\".\"))\n                          ]),\n                          _createElementVNode(\"li\", null, [\n                            _cache[57] || (_cache[57] = _createTextVNode(\"Click box \")),\n                            _createElementVNode(\"strong\", null, [\n                              _withDirectives(_createElementVNode(\"span\", _hoisted_7, \"(bottom-left)\", 512), [\n                                [_vShow, !_unref(xs)]\n                              ]),\n                              _withDirectives(_createElementVNode(\"span\", _hoisted_8, \"(bottom-center)\", 512), [\n                                [_vShow, _unref(xs)]\n                              ])\n                            ]),\n                            _cache[58] || (_cache[58] = _createTextVNode(\" that displays date/time to update. Soon after sunset is optimal. (Or press \")),\n                            _createVNode(_component_font_awesome_icon, {\n                              class: \"bullet-icon\",\n                              icon: \"play\",\n                              style: {\"color\":\"#f4ba3e\"}\n                            }),\n                            _cache[59] || (_cache[59] = _createTextVNode(\" to advance time.)\"))\n                          ]),\n                          _cache[65] || (_cache[65] = _createElementVNode(\"li\", null, \"Go outdoors and find the planet parade!\", -1)),\n                          _createElementVNode(\"li\", null, [\n                            _cache[60] || (_cache[60] = _createTextVNode(\"Learn more using \")),\n                            _createVNode(_component_font_awesome_icon, {\n                              class: \"bullet-icon\",\n                              icon: \"book-open\",\n                              style: {\"color\":\"#f4ba3e\"}\n                            }),\n                            _cache[61] || (_cache[61] = _createTextVNode(\" and \")),\n                            _createVNode(_component_font_awesome_icon, {\n                              class: \"bullet-icon\",\n                              icon: \"video\",\n                              style: {\"color\":\"#f4ba3e\"}\n                            }),\n                            _cache[62] || (_cache[62] = _createTextVNode()),\n                            _cache[63] || (_cache[63] = _createElementVNode(\"strong\", null, [\n                              _createElementVNode(\"span\", { style: {\"color\":\"#f4ba3e\"} }, \"(upper-left)\")\n                            ], -1)),\n                            _cache[64] || (_cache[64] = _createTextVNode(\". \"))\n                          ])\n                        ])\n                      ]),\n                      _createVNode(_component_v_checkbox, {\n                        modelValue: skipIntroChecked.value,\n                        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((skipIntroChecked).value = $event)),\n                        label: \"Do not display Intro Content again\",\n                        density: \"default\",\n                        \"hide-details\": \"\"\n                      }, null, 8, [\"modelValue\"])\n                    ]),\n                    _: 1\n                  })\n                ]))\n              : _createCommentVNode(\"\", true)\n          ]),\n          _: 1\n        }, 8, [\"modelValue\"]),\n        _createVNode(_Transition, { name: \"fade\" }, {\n          default: _withCtx(() => [\n            _withDirectives(_createElementVNode(\"div\", _hoisted_9, _cache[67] || (_cache[67] = [\n              _createElementVNode(\"div\", { class: \"container\" }, [\n                _createElementVNode(\"div\", { class: \"spinner\" }),\n                _createElementVNode(\"p\", null, \"Loading …\")\n              ], -1)\n            ]), 512), [\n              [_vShow, isLoading.value]\n            ])\n          ]),\n          _: 1\n        }),\n        _createElementVNode(\"div\", _hoisted_10, [\n          _createElementVNode(\"div\", _hoisted_11, [\n            _createVNode(_component_icon_button, {\n              modelValue: showTextSheet.value,\n              \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((showTextSheet).value = $event)),\n              \"fa-icon\": \"book-open\",\n              color: buttonColor.value,\n              \"tooltip-text\": showTextSheet.value ? 'Hide Info' : 'Learn More',\n              \"tooltip-location\": \"start\"\n            }, null, 8, [\"modelValue\", \"color\", \"tooltip-text\"]),\n            _createVNode(_component_icon_button, {\n              modelValue: showVideoSheet.value,\n              \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((showVideoSheet).value = $event)),\n              \"fa-icon\": \"video\",\n              color: buttonColor.value,\n              \"tooltip-text\": \"Watch video\",\n              \"tooltip-location\": \"start\"\n            }, null, 8, [\"modelValue\", \"color\"])\n          ]),\n          _createElementVNode(\"div\", _hoisted_12, [\n            _createVNode(_component_icon_button, {\n              modelValue: showLocationSelector.value,\n              \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event: any) => ((showLocationSelector).value = $event)),\n              \"fa-icon\": \"location-dot\",\n              color: buttonColor.value,\n              \"tooltip-text\": \"Select Location\",\n              \"tooltip-location\": \"start\"\n            }, null, 8, [\"modelValue\", \"color\"]),\n            _createVNode(_component_v_dialog, {\n              modelValue: showLocationSelector.value,\n              \"onUpdate:modelValue\": _cache[11] || (_cache[11] = ($event: any) => ((showLocationSelector).value = $event)),\n              \"max-width\": \"fit-content\",\n              transition: \"slide-y-transition\"\n            }, {\n              default: _withCtx(() => [\n                _createVNode(_component_v_card, null, {\n                  default: _withCtx(() => [\n                    _createElementVNode(\"div\", _hoisted_13, [\n                      _createVNode(_component_font_awesome_icon, {\n                        style: {\"cursor\":\"pointer\",\"z-index\":\"1000\"},\n                        icon: \"xmark\",\n                        size: \"xl\",\n                        onClick: _cache[7] || (_cache[7] = ($event: any) => (showLocationSelector.value = false)),\n                        onKeyup: _cache[8] || (_cache[8] = _withKeys(($event: any) => (showLocationSelector.value = false), [\"enter\"])),\n                        tabindex: \"0\",\n                        color: \"black\"\n                      })\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_14, [\n                      _createVNode(_component_geolocation_button, {\n                        id: \"location\",\n                        size: \"30px\",\n                        density: \"default\",\n                        elevation: \"5\",\n                        color: accentColor.value,\n                        onGeolocation: _cache[9] || (_cache[9] = ($event: any) => (selectedLocation.value = {longitudeDeg: $event.longitude, latitudeDeg: $event.latitude}))\n                      }, null, 8, [\"color\"]),\n                      _createVNode(_component_location_search, {\n                        class: _normalizeClass(['location-search']),\n                        small: \"\",\n                        \"button-size\": \"xl\",\n                        \"accent-color\": accentColor.value,\n                        \"search-provider\": searchProvider,\n                        onSetLocation: setLocationFromSearchFeature,\n                        onError: _cache[10] || (_cache[10] = ($event: any) => (searchErrorMessage.value = $event))\n                      }, null, 8, [\"accent-color\"])\n                    ]),\n                    _createVNode(_component_location_selector, {\n                      \"model-value\": selectedLocation.value,\n                      \"onUpdate:modelValue\": updateLocationFromMap\n                    }, null, 8, [\"model-value\"])\n                  ]),\n                  _: 1\n                })\n              ]),\n              _: 1\n            }, 8, [\"modelValue\"]),\n            _createElementVNode(\"span\", {\n              tabindex: \"0\",\n              id: \"my-location-label\",\n              class: \"elevation-1\",\n              onClick: _cache[12] || (_cache[12] = ($event: any) => (showLocationSelector.value=true)),\n              onKeyup: _cache[13] || (_cache[13] = _withKeys(($event: any) => (showLocationSelector.value=true), [\"enter\"]))\n            }, \"Current location: \" + _toDisplayString(selectedLocationText.value != '' ? selectedLocationText.value : 'Cambridge, MA (default)'), 33)\n          ]),\n          _createElementVNode(\"div\", _hoisted_15, [\n            _createElementVNode(\"div\", _hoisted_16, [\n              _createElementVNode(\"div\", _hoisted_17, [\n                _createVNode(_component_font_awesome_icon, {\n                  size: \"lg\",\n                  class: \"tab-focusable\",\n                  color: accentColor.value,\n                  icon: showControls.value ? `chevron-down` : `gear`,\n                  onClick: _cache[14] || (_cache[14] = ($event: any) => (showControls.value = !showControls.value)),\n                  onKeyup: _cache[15] || (_cache[15] = _withKeys(($event: any) => (showControls.value = !showControls.value), [\"enter\"])),\n                  tabindex: \"0\"\n                }, null, 8, [\"color\", \"icon\"])\n              ]),\n              (showControls.value)\n                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_18, [\n                    _createVNode(_component_v_checkbox, {\n                      color: accentColor.value,\n                      modelValue: showEcliptic.value,\n                      \"onUpdate:modelValue\": _cache[16] || (_cache[16] = ($event: any) => ((showEcliptic).value = $event)),\n                      onKeyup: _cache[17] || (_cache[17] = _withKeys(($event: any) => (showEcliptic.value = !showEcliptic.value), [\"enter\"])),\n                      label: \"Ecliptic\",\n                      \"hide-details\": \"\"\n                    }, null, 8, [\"color\", \"modelValue\"]),\n                    _createVNode(_component_v_checkbox, {\n                      color: accentColor.value,\n                      modelValue: showAltAzGrid.value,\n                      \"onUpdate:modelValue\": _cache[18] || (_cache[18] = ($event: any) => ((showAltAzGrid).value = $event)),\n                      onKeyup: _cache[19] || (_cache[19] = _withKeys(($event: any) => (showAltAzGrid.value = !showAltAzGrid.value), [\"enter\"])),\n                      label: \"Sky Grid\",\n                      \"hide-details\": \"\"\n                    }, null, 8, [\"color\", \"modelValue\"]),\n                    _createVNode(_component_v_checkbox, {\n                      color: accentColor.value,\n                      modelValue: showHorizon.value,\n                      \"onUpdate:modelValue\": _cache[20] || (_cache[20] = ($event: any) => ((showHorizon).value = $event)),\n                      onKeyup: _cache[21] || (_cache[21] = _withKeys(($event: any) => (showHorizon.value = !showHorizon.value), [\"enter\"])),\n                      label: \"Horizon/Sky\",\n                      \"hide-details\": \"\"\n                    }, null, 8, [\"color\", \"modelValue\"]),\n                    _createVNode(_component_v_checkbox, {\n                      color: accentColor.value,\n                      modelValue: showPlanetLabels.value,\n                      \"onUpdate:modelValue\": _cache[22] || (_cache[22] = ($event: any) => ((showPlanetLabels).value = $event)),\n                      onKeyup: _cache[23] || (_cache[23] = _withKeys(($event: any) => (showPlanetLabels.value = !showPlanetLabels.value), [\"enter\"])),\n                      label: \"Planet Labels\",\n                      \"hide-details\": \"\"\n                    }, null, 8, [\"color\", \"modelValue\"]),\n                    _createVNode(_component_v_checkbox, {\n                      color: accentColor.value,\n                      modelValue: showConstellations.value,\n                      \"onUpdate:modelValue\": _cache[24] || (_cache[24] = ($event: any) => ((showConstellations).value = $event)),\n                      onKeyup: _cache[25] || (_cache[25] = _withKeys(($event: any) => (showConstellations.value = !showConstellations.value), [\"enter\"])),\n                      label: \"Constellations\",\n                      \"hide-details\": \"\"\n                    }, null, 8, [\"color\", \"modelValue\"])\n                  ]))\n                : _createCommentVNode(\"\", true)\n            ])\n          ])\n        ]),\n        _createElementVNode(\"div\", _hoisted_19, [\n          _createElementVNode(\"div\", _hoisted_20, [\n            _createVNode(_component_v_overlay, {\n              modelValue: datePickerOpen.value,\n              \"onUpdate:modelValue\": _cache[30] || (_cache[30] = ($event: any) => ((datePickerOpen).value = $event)),\n              activator: \"parent\",\n              \"location-strategy\": \"connected\",\n              location: \"top end\",\n              origin: \"bottom end\",\n              scrim: false,\n              style: _normalizeStyle(cssVars.value)\n            }, {\n              activator: _withCtx(({props}) => [\n                _createVNode(_component_v_card, _mergeProps(props, {\n                  class: \"td__card\",\n                  width: \"fit-content\",\n                  rounded: \"lg\",\n                  tabindex: \"0\",\n                  onKeyup: _withKeys(props.onClick, [\"enter\"])\n                }), {\n                  default: _withCtx(() => [\n                    _createVNode(_component_time_display, {\n                      class: \"bsn__time\",\n                      date: localSelectedDate.value,\n                      ampm: \"\",\n                      \"short-time-date\": _unref(smAndDown),\n                      \"show-timezone\": \"\",\n                      timezone: _unref(shortTimezone)\n                    }, null, 8, [\"date\", \"short-time-date\", \"timezone\"]),\n                    (!(_unref(smAndDown) || mobile.value))\n                      ? (_openBlock(), _createBlock(_component_v_icon, {\n                          key: 0,\n                          class: \"td__icon\"\n                        }, {\n                          default: _withCtx(() => _cache[68] || (_cache[68] = [\n                            _createTextVNode(\"mdi-cursor-default-click\")\n                          ])),\n                          _: 1\n                        }))\n                      : _createCommentVNode(\"\", true)\n                  ]),\n                  _: 2\n                }, 1040, [\"onKeyup\"])\n              ]),\n              default: _withCtx(() => [\n                _createVNode(_component_v_card, {\n                  ref: \"dtpCard\",\n                  tabindex: \"0\",\n                  width: \"fit-content\",\n                  elevation: \"5\"\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_v_icon, {\n                      tabindex: \"0\",\n                      class: \"dtp-close-button\",\n                      onClick: _cache[26] || (_cache[26] = ($event: any) => (datePickerOpen.value=false)),\n                      onKeyup: _cache[27] || (_cache[27] = _withKeys(($event: any) => (datePickerOpen.value=false), [\"enter\"])),\n                      color: accentColor.value,\n                      size: \"18\"\n                    }, {\n                      default: _withCtx(() => _cache[69] || (_cache[69] = [\n                        _createTextVNode(\"mdi-close\")\n                      ])),\n                      _: 1\n                    }, 8, [\"color\"]),\n                    _createVNode(_component_date_time_picker, {\n                      tabindex: \"0\",\n                      modelValue: localSelectedDate.value,\n                      \"onUpdate:modelValue\": _cache[29] || (_cache[29] = ($event: any) => ((localSelectedDate).value = $event)),\n                      \"editable-time\": true\n                    }, {\n                      default: _withCtx(() => [\n                        _createElementVNode(\"button\", {\n                          class: \"dtp__button\",\n                          onClick: _cache[28] || (_cache[28] = () => {selectedTime.value = Date.now()}),\n                          name: \"set-now\",\n                          \"aria-label\": \"Set time to Now\"\n                        }, \"Now\")\n                      ]),\n                      _: 1\n                    }, 8, [\"modelValue\"])\n                  ]),\n                  _: 1\n                }, 512)\n              ]),\n              _: 1\n            }, 8, [\"modelValue\", \"style\"])\n          ]),\n          _createVNode(_component_speed_control, {\n            playing: playing.value,\n            \"onUpdate:playing\": _cache[31] || (_cache[31] = ($event: any) => ((playing).value = $event)),\n            store: _unref(store),\n            color: accentColor.value,\n            defaultRate: 1000,\n            useInline: _unref(xs),\n            maxSpeed: 10000,\n            \"show-text\": \"\",\n            onReset: _cache[32] || (_cache[32] = ()=>{selectedTime.value = Date.now()})\n          }, null, 8, [\"playing\", \"store\", \"color\", \"useInline\"]),\n          _createElementVNode(\"div\", _hoisted_21, [\n            _createVNode(_component_icon_button, {\n              \"md-icon\": \"mdi-information-outline\",\n              onActivate: _cache[33] || (_cache[33] = () => inIntro.value = true),\n              color: accentColor.value,\n              \"focus-color\": accentColor.value,\n              \"tooltip-text\": \"Show Quick Start Guide\",\n              \"tooltip-location\": \"bottom\",\n              \"tooltip-offset\": \"5px\",\n              \"show-tooltip\": !mobile.value,\n              mdSize: \"1.2em\"\n            }, null, 8, [\"color\", \"focus-color\", \"show-tooltip\"]),\n            _createVNode(_component_icon_button, {\n              \"md-icon\": \"mdi-lock\",\n              onActivate: _cache[34] || (_cache[34] = () => showPrivacyDialog.value = true),\n              color: accentColor.value,\n              \"focus-color\": accentColor.value,\n              \"tooltip-text\": \"Change privacy settings\",\n              \"tooltip-location\": \"bottom\",\n              \"tooltip-offset\": \"5px\",\n              \"show-tooltip\": !mobile.value,\n              mdSize: \"1.2em\"\n            }, null, 8, [\"color\", \"focus-color\", \"show-tooltip\"])\n          ]),\n          (!smallSize.value)\n            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_22, [\n                _createVNode(_component_credit_logos)\n              ]))\n            : _createCommentVNode(\"\", true)\n        ]),\n        _createVNode(_component_v_dialog, {\n          id: \"video-container\",\n          modelValue: showVideoSheet.value,\n          \"onUpdate:modelValue\": _cache[37] || (_cache[37] = ($event: any) => ((showVideoSheet).value = $event)),\n          transition: \"slide-y-transition\",\n          fullscreen: \"\"\n        }, {\n          default: _withCtx(() => [\n            _createElementVNode(\"div\", _hoisted_23, [\n              _createVNode(_component_font_awesome_icon, {\n                id: \"video-close-icon\",\n                class: \"close-icon\",\n                icon: \"times\",\n                size: \"lg\",\n                onClick: _cache[35] || (_cache[35] = ($event: any) => (showVideoSheet.value = false)),\n                onKeyup: _cache[36] || (_cache[36] = _withKeys(($event: any) => (showVideoSheet.value = false), [\"enter\"])),\n                tabindex: \"0\"\n              }),\n              _cache[70] || (_cache[70] = _createElementVNode(\"video\", {\n                controls: \"\",\n                id: \"info-video\"\n              }, [\n                _createElementVNode(\"source\", {\n                  src: \"CosmicDS Planet Parade Overhead View.mp4\",\n                  type: \"video/mp4\"\n                })\n              ], -1))\n            ])\n          ]),\n          _: 1\n        }, 8, [\"modelValue\"]),\n        _createVNode(_component_v_dialog, {\n          scrim: \"false\",\n          modelValue: showPrivacyDialog.value,\n          \"onUpdate:modelValue\": _cache[40] || (_cache[40] = ($event: any) => ((showPrivacyDialog).value = $event)),\n          \"max-width\": \"400px\",\n          id: \"privacy-popup-dialog\"\n        }, {\n          default: _withCtx(() => [\n            _createVNode(_component_v_card, null, {\n              default: _withCtx(() => [\n                _createVNode(_component_v_card_text, null, {\n                  default: _withCtx(() => _cache[71] || (_cache[71] = [\n                    _createTextVNode(\" To evaluate usage of this app, \"),\n                    _createElementVNode(\"strong\", null, \"anonymized\", -1),\n                    _createTextVNode(\" data may be collected, including locations searched or selected on map. Places selected via geolocation services on your device are NOT collected. \")\n                  ])),\n                  _: 1\n                }),\n                _createVNode(_component_v_card_actions, { class: \"pt-3\" }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_v_spacer),\n                    _createVNode(_component_v_btn, {\n                      color: \"#BDBDBD\",\n                      href: \"https://www.cfa.harvard.edu/privacy-statement\",\n                      target: \"_blank\",\n                      rel: \"noopener noreferrer\"\n                    }, {\n                      default: _withCtx(() => _cache[72] || (_cache[72] = [\n                        _createTextVNode(\" Privacy Policy \")\n                      ])),\n                      _: 1\n                    }),\n                    _createVNode(_component_v_btn, {\n                      color: \"#ff6666\",\n                      onClick: _cache[38] || (_cache[38] = () => {\n              responseOptOut.value = true;\n              showPrivacyDialog.value = false;\n            })\n                    }, {\n                      default: _withCtx(() => _cache[73] || (_cache[73] = [\n                        _createTextVNode(\" Opt out \")\n                      ])),\n                      _: 1\n                    }),\n                    _createVNode(_component_v_btn, {\n                      color: \"green\",\n                      onClick: _cache[39] || (_cache[39] = () => {\n              responseOptOut.value = false;\n              showPrivacyDialog.value = false;\n            })\n                    }, {\n                      default: _withCtx(() => _cache[74] || (_cache[74] = [\n                        _createTextVNode(\" Allow \")\n                      ])),\n                      _: 1\n                    })\n                  ]),\n                  _: 1\n                })\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        }, 8, [\"modelValue\"]),\n        _createVNode(_component_v_dialog, {\n          style: _normalizeStyle(cssVars.value),\n          class: \"bottom-sheet\",\n          id: \"text-bottom-sheet\",\n          \"hide-overlay\": \"\",\n          persistent: \"\",\n          \"no-click-animation\": \"\",\n          absolute: \"\",\n          width: \"100%\",\n          scrim: false,\n          location: \"bottom\",\n          modelValue: showTextSheet.value,\n          \"onUpdate:modelValue\": _cache[45] || (_cache[45] = ($event: any) => ((showTextSheet).value = $event)),\n          transition: \"dialog-bottom-transition\"\n        }, {\n          default: _withCtx(() => [\n            _createVNode(_component_v_card, { height: \"100%\" }, {\n              default: _withCtx(() => [\n                _createVNode(_component_v_tabs, {\n                  modelValue: tab.value,\n                  \"onUpdate:modelValue\": _cache[41] || (_cache[41] = ($event: any) => ((tab).value = $event)),\n                  height: \"32px\",\n                  color: accentColor.value,\n                  \"slider-color\": accentColor.value,\n                  id: \"tabs\",\n                  dense: \"\"\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_v_tab, {\n                      class: \"info-tabs\",\n                      tabindex: \"0\"\n                    }, {\n                      default: _withCtx(() => _cache[75] || (_cache[75] = [\n                        _createElementVNode(\"h3\", null, \"Information\", -1)\n                      ])),\n                      _: 1\n                    }),\n                    _createVNode(_component_v_tab, {\n                      class: \"info-tabs\",\n                      tabindex: \"0\"\n                    }, {\n                      default: _withCtx(() => _cache[76] || (_cache[76] = [\n                        _createElementVNode(\"h3\", null, \"Using WWT\", -1)\n                      ])),\n                      _: 1\n                    })\n                  ]),\n                  _: 1\n                }, 8, [\"modelValue\", \"color\", \"slider-color\"]),\n                _createVNode(_component_font_awesome_icon, {\n                  id: \"close-text-icon\",\n                  class: \"control-icon\",\n                  icon: \"times\",\n                  size: \"lg\",\n                  onClick: _cache[42] || (_cache[42] = ($event: any) => (showTextSheet.value = false)),\n                  onKeyup: _cache[43] || (_cache[43] = _withKeys(($event: any) => (showTextSheet.value = false), [\"enter\"])),\n                  tabindex: \"0\"\n                }),\n                _createVNode(_component_v_window, {\n                  modelValue: tab.value,\n                  \"onUpdate:modelValue\": _cache[44] || (_cache[44] = ($event: any) => ((tab).value = $event)),\n                  id: \"tab-items\",\n                  class: \"pb-2 no-bottom-border-radius\"\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_v_window_item, null, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_v_card, { class: \"no-bottom-border-radius scrollable\" }, {\n                          default: _withCtx(() => [\n                            _createVNode(_component_v_card_text, { class: \"info-text no-bottom-border-radius\" }, {\n                              default: _withCtx(() => [\n                                _cache[84] || (_cache[84] = _createElementVNode(\"h3\", null, \"What is the planet parade?\", -1)),\n                                _cache[85] || (_cache[85] = _createElementVNode(\"p\", null, \" During February 2025, seven planets—Mercury, Saturn, Neptune, Venus, Uranus, Jupiter, and Mars—will be visible in the night sky all at once! \", -1)),\n                                _cache[86] || (_cache[86] = _createElementVNode(\"p\", null, \" Which planets will be visible to your eye depends on how dark your night sky is. For most of the month, from a reasonably dark, clear sky, you should be able to see four of the seven planets (Saturn, Venus, Jupiter, and Mars) by eye. Uranus and Neptune will also be up, but you will likely need binoculars or a small telescope to see them. \", -1)),\n                                _cache[87] || (_cache[87] = _createElementVNode(\"p\", null, \" At the end of February, Mercury, which is usually difficult to spot, will move far enough away from the Sun to also become visible. \", -1)),\n                                _cache[88] || (_cache[88] = _createElementVNode(\"h3\", null, \"Cool! How do I see the planet parade?\", -1)),\n                                _cache[89] || (_cache[89] = _createElementVNode(\"p\", null, \" The best time to see the planet parade will be shortly after it gets dark, maybe 20-30 minutes after sunset. In the Northern Hemisphere, you'll want a clear view towards the southern half of the sky, from west to east. \", -1)),\n                                _cache[90] || (_cache[90] = _createElementVNode(\"p\", null, \" You can use this resource to simulate the planet parade where you are. \", -1)),\n                                _createElementVNode(\"ul\", null, [\n                                  _createElementVNode(\"li\", null, [\n                                    _cache[77] || (_cache[77] = _createTextVNode(\"Click \")),\n                                    _createVNode(_component_font_awesome_icon, {\n                                      class: \"bullet-icon\",\n                                      icon: \"location-dot\"\n                                    }),\n                                    _cache[78] || (_cache[78] = _createTextVNode(\" in the top-center of the view and choose your location. (The default location is Cambridge, MA.)\"))\n                                  ]),\n                                  _cache[79] || (_cache[79] = _createElementVNode(\"li\", null, \"The display defaults to the current day just before sunset. Use the time controls to advance time until just after sunset.\", -1)),\n                                  _cache[80] || (_cache[80] = _createElementVNode(\"li\", null, [\n                                    _createTextVNode(\" If \"),\n                                    _createElementVNode(\"span\", { style: {\"color\":\"var(--accent-color)\"} }, \"Horizon/Sky\"),\n                                    _createTextVNode(\" is checked, you can see the Sun rise above the horizon in the morning and set in the evening. The sky will lighten and darken with the Sun's changing position. \")\n                                  ], -1)),\n                                  _cache[81] || (_cache[81] = _createElementVNode(\"li\", null, [\n                                    _createTextVNode(\" Display the cardinal directions in the view to help orient yourself by checking \"),\n                                    _createElementVNode(\"span\", { style: {\"color\":\"var(--accent-color)\"} }, \"Sky Grid\"),\n                                    _createTextVNode(\". \")\n                                  ], -1))\n                                ]),\n                                _cache[91] || (_cache[91] = _createElementVNode(\"h3\", null, \"How do I find my way around the sky?\", -1)),\n                                _cache[92] || (_cache[92] = _createElementVNode(\"p\", null, \" Here are some tips for finding the planets in the sky from the Northern Hemisphere. \", -1)),\n                                _cache[93] || (_cache[93] = _createElementVNode(\"ul\", null, [\n                                  _createElementVNode(\"li\", null, \" Venus is the brightest planet and should be easiest to spot above the western horizon. \"),\n                                  _createElementVNode(\"li\", null, \" Once you've found Venus, look down toward the horizon to find Saturn. \"),\n                                  _createElementVNode(\"li\", null, \" Imagine a line between Saturn and Venus that points along a big arc towards Jupiter (which is above and to the right of Orion). \"),\n                                  _createElementVNode(\"li\", null, \" Keep following that path to a bright, red object, which is Mars. \"),\n                                  _createElementVNode(\"li\", null, \" Mercury's position will change throughout the month, but it will be near the horizon, close to Venus and Saturn. \")\n                                ], -1)),\n                                _cache[94] || (_cache[94] = _createElementVNode(\"h3\", null, \"What is the significance of the planet parade?\", -1)),\n                                _cache[95] || (_cache[95] = _createElementVNode(\"p\", null, \" The planet parade happens when all the planets happen to be on the same side of their orbits around the Sun as Earth, so they all are on Earth's night-time side. (When a planet is on the opposite side of the Sun during Earth, that means it is up in the sky during the day when the Sun outshines it.) \", -1)),\n                                _cache[96] || (_cache[96] = _createElementVNode(\"p\", null, [\n                                  _createElementVNode(\"strong\", null, \"The planets are not really all in a line.\"),\n                                  _createTextVNode(\" It only appears that way from Earth because Earth and the other planets all orbit the Sun in roughly the same plane (as if they were on a vinyl record). From Earth's point of view, all the other solar system objects appear to move along a circular path around the sky, which ancient astronomers called the \\\"ecliptic.\\\" The \"),\n                                  _createElementVNode(\"span\", { style: {\"color\":\"var(--accent-color)\"} }, \"Ecliptic\"),\n                                  _createTextVNode(\" is displayed as a purple or magenta path in the virtual sky. \")\n                                ], -1)),\n                                _createElementVNode(\"p\", null, [\n                                  _cache[82] || (_cache[82] = _createTextVNode(\" Click \")),\n                                  _createVNode(_component_font_awesome_icon, {\n                                    class: \"bullet-icon\",\n                                    icon: \"video\",\n                                    style: {\"color\":\"#f4ba3e\"}\n                                  }),\n                                  _cache[83] || (_cache[83] = _createTextVNode(\" in the upper left to watch a (silent) video showing an overhead view of the planets and how their positions lead to the planet parade. \"))\n                                ]),\n                                _cache[97] || (_cache[97] = _createElementVNode(\"h3\", null, \"What else can I do to learn more?\", -1)),\n                                _cache[98] || (_cache[98] = _createElementVNode(\"p\", null, [\n                                  _createTextVNode(\" Take your own images of the planets using \"),\n                                  _createElementVNode(\"strong\", null, [\n                                    _createElementVNode(\"a\", {\n                                      href: \"https://mo-www.cfa.harvard.edu/OWN/todays_solar_system.html#SS\",\n                                      target: \"_blank\",\n                                      rel: \"noopener noreferrer\"\n                                    }, \"MicroObservatory's Observing With NASA\")\n                                  ]),\n                                  _createTextVNode(\" program! \")\n                                ], -1)),\n                                _cache[99] || (_cache[99] = _createElementVNode(\"h3\", null, \"Will the planets be this big in my sky?\", -1)),\n                                _cache[100] || (_cache[100] = _createElementVNode(\"p\", null, \" Unfortunately, no. In this visualization, we scaled up the size of the solar system objects so you would be able to see them when zoomed out to a large swath of sky. In reality, the planets will appear in the sky as points of light (or very small disks through binoculars or a telescope). \", -1)),\n                                _createVNode(_component_v_spacer, { class: \"end-spacer\" })\n                              ]),\n                              _: 1\n                            })\n                          ]),\n                          _: 1\n                        })\n                      ]),\n                      _: 1\n                    }),\n                    _createVNode(_component_v_window_item, null, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_v_card, { class: \"no-bottom-border-radius scrollable\" }, {\n                          default: _withCtx(() => [\n                            _createVNode(_component_v_card_text, { class: \"info-text no-bottom-border-radius\" }, {\n                              default: _withCtx(() => [\n                                _createVNode(_component_v_container, null, {\n                                  default: _withCtx(() => [\n                                    _createVNode(_component_v_row, { align: \"center\" }, {\n                                      default: _withCtx(() => [\n                                        _createVNode(_component_v_col, { cols: \"4\" }, {\n                                          default: _withCtx(() => [\n                                            _createVNode(_component_v_chip, {\n                                              label: \"\",\n                                              outlined: \"\"\n                                            }, {\n                                              default: _withCtx(() => _cache[101] || (_cache[101] = [\n                                                _createTextVNode(\" Pan \")\n                                              ])),\n                                              _: 1\n                                            })\n                                          ]),\n                                          _: 1\n                                        }),\n                                        _createVNode(_component_v_col, {\n                                          cols: \"8\",\n                                          class: \"pt-1\"\n                                        }, {\n                                          default: _withCtx(() => [\n                                            _createElementVNode(\"strong\", null, _toDisplayString(_unref(touchscreen) ? \"press + drag\" : \"click + drag\"), 1),\n                                            _createTextVNode(\" \" + _toDisplayString(_unref(touchscreen) ? \":\" : \"or\") + \" \", 1),\n                                            _createElementVNode(\"strong\", null, _toDisplayString(_unref(touchscreen) ? \":\" : \"W-A-S-D\"), 1),\n                                            _createTextVNode(\" \" + _toDisplayString(_unref(touchscreen) ? \":\" : \"keys\"), 1),\n                                            _cache[102] || (_cache[102] = _createElementVNode(\"br\", null, null, -1))\n                                          ]),\n                                          _: 1\n                                        })\n                                      ]),\n                                      _: 1\n                                    }),\n                                    _createVNode(_component_v_row, { align: \"center\" }, {\n                                      default: _withCtx(() => [\n                                        _createVNode(_component_v_col, { cols: \"4\" }, {\n                                          default: _withCtx(() => [\n                                            _createVNode(_component_v_chip, {\n                                              label: \"\",\n                                              outlined: \"\"\n                                            }, {\n                                              default: _withCtx(() => _cache[103] || (_cache[103] = [\n                                                _createTextVNode(\" Zoom \")\n                                              ])),\n                                              _: 1\n                                            })\n                                          ]),\n                                          _: 1\n                                        }),\n                                        _createVNode(_component_v_col, {\n                                          cols: \"8\",\n                                          class: \"pt-1\"\n                                        }, {\n                                          default: _withCtx(() => [\n                                            _createElementVNode(\"strong\", null, _toDisplayString(_unref(touchscreen) ? \"pinch in and out\" : \"scroll in and out\"), 1),\n                                            _createTextVNode(\" \" + _toDisplayString(_unref(touchscreen) ? \":\" : \"or\") + \" \", 1),\n                                            _createElementVNode(\"strong\", null, _toDisplayString(_unref(touchscreen) ? \":\" : \"I-O\"), 1),\n                                            _createTextVNode(\" \" + _toDisplayString(_unref(touchscreen) ? \":\" : \"keys\"), 1),\n                                            _cache[104] || (_cache[104] = _createElementVNode(\"br\", null, null, -1))\n                                          ]),\n                                          _: 1\n                                        })\n                                      ]),\n                                      _: 1\n                                    }),\n                                    _createVNode(_component_v_row, null, {\n                                      default: _withCtx(() => [\n                                        _createVNode(_component_v_col, { cols: \"12\" }, {\n                                          default: _withCtx(() => [\n                                            _cache[105] || (_cache[105] = _createElementVNode(\"div\", { class: \"credits\" }, [\n                                              _createElementVNode(\"h3\", null, \"Credits:\"),\n                                              _createElementVNode(\"h4\", null, [\n                                                _createElementVNode(\"a\", {\n                                                  href: \"https://www.cosmicds.cfa.harvard.edu/\",\n                                                  target: \"_blank\",\n                                                  rel: \"noopener noreferrer\"\n                                                }, \"CosmicDS\"),\n                                                _createTextVNode(\" Vue Data Stories Team:\")\n                                              ]),\n                                              _createTextVNode(\" Jon Carifio\"),\n                                              _createElementVNode(\"br\"),\n                                              _createTextVNode(\" Pat Udomprasert\"),\n                                              _createElementVNode(\"br\"),\n                                              _createTextVNode(\" John Lewis\"),\n                                              _createElementVNode(\"br\"),\n                                              _createTextVNode(\" Alyssa Goodman\"),\n                                              _createElementVNode(\"br\"),\n                                              _createTextVNode(\" Mary Dussault\"),\n                                              _createElementVNode(\"br\"),\n                                              _createTextVNode(\" Harry Houghton\"),\n                                              _createElementVNode(\"br\"),\n                                              _createTextVNode(\" Evaluator: Sue Sunbury\"),\n                                              _createElementVNode(\"br\"),\n                                              _createElementVNode(\"br\"),\n                                              _createElementVNode(\"h4\", null, \"WorldWide Telescope Team:\"),\n                                              _createTextVNode(\" Peter Williams\"),\n                                              _createElementVNode(\"br\"),\n                                              _createTextVNode(\" A. David Weigel\"),\n                                              _createElementVNode(\"br\"),\n                                              _createTextVNode(\" Jon Carifio\"),\n                                              _createElementVNode(\"br\")\n                                            ], -1)),\n                                            _createVNode(_component_v_spacer, { class: \"end-spacer\" })\n                                          ]),\n                                          _: 1\n                                        })\n                                      ]),\n                                      _: 1\n                                    }),\n                                    _createVNode(_component_v_row, null, {\n                                      default: _withCtx(() => [\n                                        _createVNode(_component_v_col, null, {\n                                          default: _withCtx(() => [\n                                            _createVNode(_component_funding_acknowledgement)\n                                          ]),\n                                          _: 1\n                                        })\n                                      ]),\n                                      _: 1\n                                    })\n                                  ]),\n                                  _: 1\n                                })\n                              ]),\n                              _: 1\n                            })\n                          ]),\n                          _: 1\n                        })\n                      ]),\n                      _: 1\n                    })\n                  ]),\n                  _: 1\n                }, 8, [\"modelValue\"])\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        }, 8, [\"style\", \"modelValue\"])\n      ])\n    ]),\n    _: 1\n  }, 8, [\"style\"]))\n}\n}\n\n})","<template>\n<v-app\n  id=\"app\"\n  :style=\"cssVars\"\n>\n  <div\n    id=\"main-content\"\n  >\n    <WorldWideTelescope\n      :wwt-namespace=\"wwtNamespace\"\n    ></WorldWideTelescope>\n\n\n    <!-- This contains the splash screen content -->\n\n    <v-overlay\n      :model-value=\"showSplashScreen\"\n      absolute\n      opacity=\"0.6\"\n      :style=\"cssVars\"\n      id=\"splash-overlay\"\n    >\n      <div\n        id=\"splash-screen\"\n        v-click-outside=\"closeSplashScreen\"\n        :style=\"cssVars\"\n      >\n        <font-awesome-icon\n          id=\"close-splash-button\"\n          @click=\"closeSplashScreen\"\n          @keyup.enter=\"closeSplashScreen\"\n          icon=\"xmark\"\n          tabindex=\"0\"\n          />\n        <div id=\"splash-screen-text\">\n          <p>Want to see the</p>\n          <p class=\"highlight\">Planetary Parade?</p>\n        </div>\n        <div>\n            <v-btn\n              class=\"splash-get-started\"\n              @click=\"closeSplashScreen\"\n              :color=\"accentColor\"\n              :density=\"xSmallSize ? 'compact' : 'default'\"\n              size=\"x-large\"\n              variant=\"elevated\"\n              rounded=\"lg\"\n            >\n              Get Started\n            </v-btn>\n          </div>\n        <div id=\"splash-screen-acknowledgements\" class=\"small\">\n          This Data Story is brought to you by <a href=\"https://www.cosmicds.cfa.harvard.edu/\" target=\"_blank\" rel=\"noopener noreferrer\">Cosmic Data Stories</a> and <a href=\"https://www.worldwidetelescope.org/home/\" target=\"_blank\" rel=\"noopener noreferrer\">WorldWide Telescope</a>.\n          \n          <div id=\"splash-screen-logos\">\n            <credit-logos logo-size=\"5vmin\"/>\n          </div>\n        </div>\n      </div>\n    </v-overlay>\n    <v-dialog\n      v-model=\"inIntro\"\n    >\n      <div v-if=\"inIntro\" id=\"introduction-overlay\">\n        <v-card class=\"info-card elevation-5\">\n\n          <div id=\"intro-window-close-button\">\n            <font-awesome-icon\n              size=\"xl\"\n              class=\"ma-1\"\n              :color=\"accentColor\"\n              icon='xmark'\n              @click=\"inIntro = !inIntro\"\n              @keyup.enter=\"inIntro = !inIntro\"\n              tabindex=\"0\"\n              tooltip-location=\"start\"\n            /> \n          </div>\n\n\n          <div class=\"intro-text\">\n            <h3 style=\"color: #f4ba3e\" class=\"mb-2\">Quick Start</h3>\n            <ol>\n              <li>Set desired location using <font-awesome-icon class=\"bullet-icon\" icon=\"location-dot\" style=\"color: #f4ba3e\" /> <strong><span style=\"color: #f4ba3e\">(top-center)</span></strong>.</li>\n              <li>Click box <strong>\n                <span v-show=\"!xs\" style=\"color: #f4ba3e\">(bottom-left)</span>\n                <span v-show=\"xs\" style=\"color: #f4ba3e\">(bottom-center)</span>\n              </strong> that displays date/time to update. Soon after sunset is optimal. (Or press <font-awesome-icon class=\"bullet-icon\" icon=\"play\" style=\"color: #f4ba3e\" /> to advance time.)</li>\n              <li>Go outdoors and find the planet parade!</li>\n              <li>Learn more using <font-awesome-icon class=\"bullet-icon\" icon=\"book-open\" style=\"color: #f4ba3e\" /> and <font-awesome-icon class=\"bullet-icon\" icon=\"video\" style=\"color: #f4ba3e\" /> <strong><span style=\"color: #f4ba3e\">(upper-left)</span></strong>.   </li>\n            </ol>\n          </div>\n\n          <v-checkbox\n            v-model=\"skipIntroChecked\"\n            label=\"Do not display Intro Content again\"\n            density=\"default\"\n            hide-details\n          >\n          </v-checkbox>\n        </v-card>\n      </div>\n\n    </v-dialog>\n\n    <transition name=\"fade\">\n      <div\n        class=\"modal\"\n        id=\"modal-loading\"\n        v-show=\"isLoading\"\n      >\n        <div class=\"container\">\n          <div class=\"spinner\"></div>\n          <p>Loading …</p>\n        </div>\n      </div>\n    </transition>\n\n\n    <!-- This block contains the elements (e.g. icon buttons displayed at/near the top of the screen -->\n\n    <div id=\"top-content\">\n      <div id=\"left-buttons\">\n        <icon-button\n          v-model=\"showTextSheet\"\n          fa-icon=\"book-open\"\n          :color=\"buttonColor\"\n          :tooltip-text=\"showTextSheet ? 'Hide Info' : 'Learn More'\"\n          tooltip-location=\"start\"\n        >\n        </icon-button>\n        <icon-button\n          v-model=\"showVideoSheet\"\n          fa-icon=\"video\"\n          :color=\"buttonColor\"\n          tooltip-text=\"Watch video\"\n          tooltip-location=\"start\"\n        >\n        </icon-button>\n      </div>\n      <div id=\"center-buttons\">\n        <icon-button\n          v-model=\"showLocationSelector\"\n          fa-icon=\"location-dot\"\n          :color=\"buttonColor\"\n          tooltip-text=\"Select Location\"\n          tooltip-location=\"start\"\n        ></icon-button>\n        <v-dialog\n          v-model=\"showLocationSelector\"\n          max-width=\"fit-content\"\n          transition=\"slide-y-transition\"\n        >\n          <v-card>\n            <div id=\"geolocation-close\">\n              <font-awesome-icon\n                style=\"cursor: pointer; z-index: 1000;\"\n                icon=\"xmark\"\n                size=\"xl\"\n                @click=\"showLocationSelector = false\"\n                @keyup.enter=\"showLocationSelector = false\"\n                tabindex=\"0\"\n                color=\"black\"\n              ></font-awesome-icon>\n            </div>\n            <div id=\"geolocation-controls\">\n              <geolocation-button\n                id=\"location\"\n                size=\"30px\"\n                density=\"default\"\n                elevation=\"5\"\n                :color=\"accentColor\"\n                @geolocation=\"selectedLocation = {longitudeDeg: $event.longitude, latitudeDeg: $event.latitude}\"\n              />\n              <location-search\n                :class=\"['location-search']\"\n                small\n                button-size=\"xl\"\n                :accent-color=\"accentColor\"\n                :search-provider=\"searchProvider\"\n                @set-location=\"setLocationFromSearchFeature\"\n                @error=\"searchErrorMessage = $event\"\n              >\n              </location-search>\n            </div>\n            <location-selector\n              :model-value=\"selectedLocation\"\n              @update:modelValue=\"updateLocationFromMap\"\n            />\n\n          </v-card>\n        </v-dialog>\n        <span tabindex=\"0\" id=\"my-location-label\" class=\"elevation-1\" @click=\"showLocationSelector=true\" @keyup.enter=\"showLocationSelector=true\">Current location: {{ selectedLocationText != '' ? selectedLocationText : 'Cambridge, MA (default)' }}</span>\n      </div>\n      <div id=\"right-buttons\">\n        <div id=\"controls\" class=\"control-icon-wrapper\">\n          <div id=\"controls-top-row\">\n            <font-awesome-icon\n              size=\"lg\"\n              class=\"tab-focusable\"\n              :color=\"accentColor\"\n              :icon=\"showControls ? `chevron-down` : `gear`\"\n              @click=\"showControls = !showControls\" \n              @keyup.enter=\"showControls = !showControls\"\n              tabindex=\"0\" />\n          </div>\n        \n          <div v-if=\"showControls\" id=\"control-checkboxes\">\n            <v-checkbox :color=\"accentColor\" v-model=\"showEcliptic\" @keyup.enter=\"showEcliptic = !showEcliptic\"\n            label=\"Ecliptic\" hide-details />\n            <v-checkbox :color=\"accentColor\" v-model=\"showAltAzGrid\" @keyup.enter=\"showAltAzGrid = !showAltAzGrid\"\n              label=\"Sky Grid\" hide-details />\n            <v-checkbox :color=\"accentColor\" v-model=\"showHorizon\" @keyup.enter=\"showHorizon = !showHorizon\"\n              label=\"Horizon/Sky\" hide-details />\n              <v-checkbox :color=\"accentColor\" v-model=\"showPlanetLabels\" @keyup.enter=\"showPlanetLabels = !showPlanetLabels\"\n              label=\"Planet Labels\" hide-details />\n              <v-checkbox :color=\"accentColor\" v-model=\"showConstellations\" @keyup.enter=\"showConstellations = !showConstellations\"\n              label=\"Constellations\" hide-details />\n\n          </div>\n        </div>\n      </div>\n    </div>\n\n\n    <!-- This block contains the elements (e.g. the project icons) displayed along the bottom of the screen -->\n\n    <div id=\"bottom-content\">\n      <div id=\"date-picker\">\n        <v-overlay \n          v-model=\"datePickerOpen\"\n          activator=\"parent\"\n          location-strategy=\"connected\"\n          location=\"top end\"\n          origin=\"bottom end\"\n          :scrim=\"false\"\n          :style=\"cssVars\"\n        >\n        <template #activator=\"{props}\">\n          <!-- any props added are passed directly to v-card -->\n          <v-card \n            v-bind=\"props\"\n            class=\"td__card\"\n            width=\"fit-content\"\n            rounded=\"lg\"\n            tabindex=\"0\"\n            @keyup.enter=\"props.onClick\"\n            >\n            <time-display class=\"bsn__time\" :date=\"localSelectedDate\" ampm :short-time-date=\"smAndDown\" show-timezone :timezone=\"shortTimezone\" />\n            <v-icon v-if=\"!(smAndDown || mobile)\" class=\"td__icon\"  >mdi-cursor-default-click</v-icon>\n          </v-card>\n        </template>\n          <v-card ref=\"dtpCard\" tabindex=\"0\" width=\"fit-content\" elevation=\"5\">\n            <v-icon tabindex=\"0\" class=\"dtp-close-button\" @click=\"datePickerOpen=false\" @keyup.enter=\"datePickerOpen=false\" :color=\"accentColor\" size=\"18\">mdi-close</v-icon>\n            <date-time-picker tabindex=\"0\" v-model=\"localSelectedDate\" :editable-time=\"true\">\n              <!-- <button class=\"dtp__button\" @click=\"() => {playbackControl.pause(); set9pm(); goToTCrB()}\" name=\"set-9pm\" aria-label=\"Set time to 9pm\">9pm</button>\n              <button class=\"dtp__button\" @click=\"() => {playbackControl.pause(); setMidnight(); goToTCrB()}\" name=\"set-midnight\" aria-label=\"Set time to Midnight\">Midnight</button>-->\n              <button class=\"dtp__button\" @click=\"() => {selectedTime = Date.now()}\" name=\"set-now\" aria-label=\"Set time to Now\">Now</button> \n            </date-time-picker>\n          </v-card>\n        </v-overlay>\n      </div>\n      \n      <!-- eslint-disable-next-line vue/no-v-model-argument -->\n      <speed-control v-model:playing=\"playing\" \n        :store=\"store\"\n        :color=\"accentColor\" \n        :defaultRate=\"1000\"\n        :useInline=\"xs\"\n        :maxSpeed=\"10000\"\n        show-text\n        @reset=\"()=>{selectedTime = Date.now()}\"\n        />\n      <div id=\"change-flags\">\n        <icon-button\n          md-icon=\"mdi-information-outline\"\n          @activate=\"() => inIntro = true\"\n          :color=\"accentColor\"\n          :focus-color=\"accentColor\"\n          tooltip-text=\"Show Quick Start Guide\"\n          tooltip-location=\"bottom\"\n          tooltip-offset=\"5px\"\n          :show-tooltip=\"!mobile\"\n          mdSize=\"1.2em\"\n        >\n        </icon-button>\n        <icon-button\n          md-icon=\"mdi-lock\"\n          @activate=\"() => showPrivacyDialog = true\"\n          :color=\"accentColor\"\n          :focus-color=\"accentColor\"\n          tooltip-text=\"Change privacy settings\"\n          tooltip-location=\"bottom\"\n          tooltip-offset=\"5px\"\n          :show-tooltip=\"!mobile\"\n          mdSize=\"1.2em\"\n        >\n        </icon-button>\n      </div>\n      <div id=\"body-logos\" v-if=\"!smallSize\">\n        <credit-logos/>\n      </div>\n    </div>\n\n\n    <!-- This dialog contains the video that is displayed when the video icon is clicked -->\n\n    <v-dialog\n      id=\"video-container\"\n      v-model=\"showVideoSheet\"\n      transition=\"slide-y-transition\"\n      fullscreen\n    >\n      <div class=\"video-wrapper\">\n        <font-awesome-icon\n          id=\"video-close-icon\"\n          class=\"close-icon\"\n          icon=\"times\"\n          size=\"lg\"\n          @click=\"showVideoSheet = false\"\n          @keyup.enter=\"showVideoSheet = false\"\n          tabindex=\"0\"\n        ></font-awesome-icon>\n        <video\n          controls\n          id=\"info-video\"\n        >\n          <source src=\"CosmicDS Planet Parade Overhead View.mp4\" type=\"video/mp4\">\n        </video>\n      </div>\n    </v-dialog>\n\n    <!-- Data collection opt-out dialog -->\n    <v-dialog\n      scrim=\"false\"\n      v-model=\"showPrivacyDialog\"\n      max-width=\"400px\"\n      id=\"privacy-popup-dialog\"\n    >\n      <v-card>\n        <v-card-text>\n          To evaluate usage of this app, <strong>anonymized</strong> data may be collected, including locations searched or selected on map. Places selected via geolocation services on your device are NOT collected.\n        </v-card-text>\n        <v-card-actions class=\"pt-3\">\n          <v-spacer></v-spacer>\n          <v-btn\n            color=\"#BDBDBD\"\n            href=\"https://www.cfa.harvard.edu/privacy-statement\"\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n          >\n          Privacy Policy\n          </v-btn>\n          <v-btn\n            color=\"#ff6666\"\n            @click=\"() => {\n              responseOptOut = true;\n              showPrivacyDialog = false;\n            }\"\n          >\n          Opt out\n          </v-btn>\n          <v-btn \n            color=\"green\"\n            @click=\"() => {\n              responseOptOut = false;\n              showPrivacyDialog = false;\n            }\"\n          >\n            Allow\n          </v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n\n\n    <!-- This dialog contains the informational content that is displayed when the book icon is clicked -->\n\n    <v-dialog\n      :style=\"cssVars\"\n      class=\"bottom-sheet\"\n      id=\"text-bottom-sheet\"\n      hide-overlay\n      persistent\n      no-click-animation\n      absolute\n      width=\"100%\"\n      :scrim=\"false\"\n      location=\"bottom\"\n      v-model=\"showTextSheet\"\n      transition=\"dialog-bottom-transition\"\n    >\n      <v-card height=\"100%\">\n        <v-tabs\n          v-model=\"tab\"\n          height=\"32px\"\n          :color=\"accentColor\"\n          :slider-color=\"accentColor\"\n          id=\"tabs\"\n          dense\n        >\n          <v-tab class=\"info-tabs\" tabindex=\"0\"><h3>Information</h3></v-tab>\n          <v-tab class=\"info-tabs\" tabindex=\"0\"><h3>Using WWT</h3></v-tab>\n        </v-tabs>\n        <font-awesome-icon\n          id=\"close-text-icon\"\n          class=\"control-icon\"\n          icon=\"times\"\n          size=\"lg\"\n          @click=\"showTextSheet = false\"\n          @keyup.enter=\"showTextSheet = false\"\n          tabindex=\"0\"\n        ></font-awesome-icon>\n        <v-window v-model=\"tab\" id=\"tab-items\" class=\"pb-2 no-bottom-border-radius\">\n          <v-window-item>\n            <v-card class=\"no-bottom-border-radius scrollable\">\n              <v-card-text class=\"info-text no-bottom-border-radius\">\n                <h3>What is the planet parade?</h3>\n                <p>\n                  During February 2025, seven planets&#8212;Mercury, Saturn, Neptune, Venus, Uranus, Jupiter, and Mars&#8212;will be visible in the night sky all at once! \n                </p>\n                <p> \n                  Which planets will be visible to your eye depends on how dark your night sky is. For most of the month, from a reasonably dark, clear sky, you should be able to see four of the seven planets (Saturn, Venus, Jupiter, and Mars) by eye. Uranus and Neptune will also be up, but you will likely need binoculars or a small telescope to see them.\n                </p> \n                <p>\n                  At the end of February, Mercury, which is usually difficult to spot, will move far enough away from the Sun to also become visible.\n                </p>\n                <h3>Cool! How do I see the planet parade?</h3>\n                <p>\n                  The best time to see the planet parade will be shortly after it gets dark, maybe 20-30 minutes after sunset. In the Northern Hemisphere, you'll want a clear view towards the southern half of the sky, from west to east. \n                </p>\n                <p>\n                  You can use this resource to simulate the planet parade where you are.\n                </p>\n                <ul>\n                  <li>Click <font-awesome-icon class=\"bullet-icon\" icon=\"location-dot\"/> in the top-center of the view and choose your location. (The default location is Cambridge, MA.)</li>\n                  <li>The display defaults to the current day just before sunset. Use the time controls to advance time until just after sunset.</li>\n                  <li>\n                    If <span style=\"color: var(--accent-color)\">Horizon/Sky</span> is checked, you can see the Sun rise above the horizon in the morning and set in the evening. The sky will lighten and darken with the Sun's changing position. \n                  </li>\n                  <li>\n                    Display the cardinal directions in the view to help orient yourself by checking <span style=\"color: var(--accent-color)\">Sky Grid</span>.\n                  </li>\n                </ul>\n                <h3>How do I find my way around the sky?</h3>\n                <p>\n                  Here are some tips for finding the planets in the sky from the Northern Hemisphere.\n                </p>\n                <ul>\n                  <li>\n                    Venus is the brightest planet and should be easiest to spot above the western horizon.\n                  </li>\n                  <li>\n                    Once you've found Venus, look down toward the horizon to find Saturn.\n                  </li>\n                  <li>\n                     Imagine a line between Saturn and Venus that points along a big arc towards Jupiter (which is above and to the right of Orion).\n                  </li>\n                  <li> \n                    Keep following that path to a bright, red object, which is Mars.\n                  </li>\n                  <li>\n                    Mercury's position will change throughout the month, but it will be near the horizon, close to Venus and Saturn.\n                  </li>\n                </ul> \n                <h3>What is the significance of the planet parade?</h3>\n                <p>\n                  The planet parade happens when all the planets happen to be on the same side of their orbits around the Sun as Earth, so they all are on Earth's night-time side. (When a planet is on the opposite side of the Sun during Earth, that means it is up in the sky during the day when the Sun outshines it.) \n                </p>\n                <p>\n                  <strong>The planets are not really all in a line.</strong> It only appears that way from Earth because Earth and the other planets all orbit the Sun in roughly the same plane (as if they were on a vinyl record). From Earth's point of view, all the other solar system objects appear to move along a circular path around the sky, which ancient astronomers called the \"ecliptic.\" The <span style=\"color: var(--accent-color)\">Ecliptic</span> is displayed as a purple or magenta path in the virtual sky. \n                </p>\n                <p>\n                  Click <font-awesome-icon class=\"bullet-icon\" icon=\"video\" style=\"color: #f4ba3e\" /> in the upper left to watch a (silent) video showing an overhead view of the planets and how their positions lead to the planet parade.\n                </p>\n                <h3>What else can I do to learn more?</h3>\n                <p>\n                  Take your own images of the planets using <strong><a href=\"https://mo-www.cfa.harvard.edu/OWN/todays_solar_system.html#SS\" target=\"_blank\" rel=\"noopener noreferrer\">MicroObservatory's Observing With NASA</a></strong> program!\n                </p>\n                <h3>Will the planets be this big in my sky?</h3>\n                <p>\n                  Unfortunately, no. In this visualization, we scaled up the size of the solar system objects so you would be able to see them when zoomed out to a large swath of sky. In reality, the planets will appear in the sky as points of light (or very small disks through binoculars or a telescope).\n                </p>\n                <v-spacer class=\"end-spacer\"></v-spacer>\n              </v-card-text>\n            </v-card>\n          </v-window-item>\n          <v-window-item>\n            <v-card class=\"no-bottom-border-radius scrollable\">\n              <v-card-text class=\"info-text no-bottom-border-radius\">\n                <v-container>\n                  <v-row align=\"center\">\n                  <v-col cols=\"4\">\n                      <v-chip\n                        label\n                        outlined\n                      >\n                        Pan\n                      </v-chip>\n                    </v-col>\n                    <v-col cols=\"8\" class=\"pt-1\">\n                      <strong>{{ touchscreen ? \"press + drag\" : \"click + drag\" }}</strong>  {{ touchscreen ? \":\" : \"or\" }}  <strong>{{ touchscreen ? \":\" : \"W-A-S-D\" }}</strong> {{ touchscreen ? \":\" : \"keys\" }}<br>\n                    </v-col>\n                  </v-row>\n                  <v-row align=\"center\">\n                    <v-col cols=\"4\">\n                      <v-chip\n                        label\n                        outlined\n                      >\n                        Zoom\n                      </v-chip>\n                    </v-col>\n                    <v-col cols=\"8\" class=\"pt-1\">\n                      <strong>{{ touchscreen ? \"pinch in and out\" : \"scroll in and out\" }}</strong> {{ touchscreen ? \":\" : \"or\" }} <strong>{{ touchscreen ? \":\" : \"I-O\" }}</strong> {{ touchscreen ? \":\" : \"keys\" }}<br>\n                    </v-col>\n                  </v-row>\n                  <v-row>\n                    <v-col cols=\"12\">\n                      <div class=\"credits\">\n                      <h3>Credits:</h3>\n                      <h4><a href=\"https://www.cosmicds.cfa.harvard.edu/\" target=\"_blank\" rel=\"noopener noreferrer\">CosmicDS</a> Vue Data Stories Team:</h4>\n                      Jon Carifio<br>\n                      Pat Udomprasert<br>\n                      John Lewis<br>\n                      Alyssa Goodman<br>\n                      Mary Dussault<br>\n                      Harry Houghton<br>\n                      Evaluator: Sue Sunbury<br>\n                      <br>\n                      <h4>WorldWide Telescope Team:</h4>\n                      Peter Williams<br>\n                      A. David Weigel<br>\n                      Jon Carifio<br>\n                      </div>\n                      <v-spacer class=\"end-spacer\"></v-spacer>\n                    </v-col>\n                  </v-row>\n                  <v-row>\n                    <v-col>\n                      <funding-acknowledgement/>\n                    </v-col>\n                  </v-row>\n                </v-container>              \n              </v-card-text>\n            </v-card>\n          </v-window-item>\n        </v-window>\n      </v-card>\n    </v-dialog>\n\n  </div>\n</v-app>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, reactive, computed, onMounted, nextTick, watch } from \"vue\";\nimport { Color, Grids, Planets, Settings, WWTControl } from \"@wwtelescope/engine\";\nimport { SolarSystemObjects } from \"@wwtelescope/engine-types\";\nimport { engineStore } from \"@wwtelescope/engine-pinia\";\nimport { BackgroundImageset, LocationDeg, skyBackgroundImagesets, supportsTouchscreen, blurActiveElement, useWWTKeyboardControls, D2R, API_BASE_URL } from \"@cosmicds/vue-toolkit\";\nimport { useDisplay } from \"vuetify\";\nimport { v4 } from \"uuid\";\n\nimport { useTimezone } from \"./timezones\";\nimport { horizontalToEquatorial, skyOpacityForSunAlt } from \"./utils\";\nimport { resetAltAzGridText, makeAltAzGridText, drawPlanets, renderOneFrame, drawEcliptic, drawSkyOverlays } from \"./wwt-hacks\";\nimport { MapBoxFeature, MapBoxFeatureCollection, geocodingInfoForSearch, textForLocation } from \"@cosmicds/vue-toolkit/src/mapbox\";\n// import { useGeolocation } from \"@cosmicds/vue-toolkit\";\nimport { useSun } from './useSun';\n\nconst STORY_DATA_URL = `${API_BASE_URL}/planet-parade/data`;\n\nconst UUID_KEY = \"eclipse-mini-uuid\" as const;\nconst OPT_OUT_KEY = \"eclipse-mini-optout\" as const;\nconst SKIP_INTRO_CONTENT_KEY = \"skip-intro-content\" as const;\nconst maybeUUID = window.localStorage.getItem(UUID_KEY);\nconst storedOptOut = window.localStorage.getItem(OPT_OUT_KEY);\nconst skipIntroContent = window.localStorage.getItem(SKIP_INTRO_CONTENT_KEY)?.toLowerCase() === \"true\";\nconst existingUser = maybeUUID !== null;\nconst uuid = maybeUUID ?? v4();\nif (!existingUser) {\n  window.localStorage.setItem(UUID_KEY, uuid);\n}\nlet infoTimeMs = 0;\nlet videoPlayingTimeMs = 0;\nlet videoPlaying = false;\nlet videoOpened = false;\nlet videoPlayed = false;\nlet appStartTimestamp = Date.now();\nlet infoStartTimestamp = null as number | null;\nlet videoPlayingStartTimestamp = null as number | null;\n\nlet userSelectedSearchLocations: [number, number][] = [];\nlet userSelectedMapLocations: [number, number][] = [];\n\ntype SheetType = \"text\" | \"video\";\nexport interface PlanetParadeProps {\n  wwtNamespace?: string;\n}\n\nconst store = engineStore();\n\nuseWWTKeyboardControls(store);\n\nconst touchscreen = supportsTouchscreen();\nconst { smAndDown, smAndUp, xs } = useDisplay();\n\nconst _props = withDefaults(defineProps<PlanetParadeProps>(), {\n  wwtNamespace: \"planet-parade\",\n});\n\nconst queryHideSplash = new URLSearchParams(window.location.search).get(\"splash\")?.toLowerCase() === \"false\";\nconst splash = !(queryHideSplash || skipIntroContent);\nconst showSplashScreen = ref(splash);\nconst backgroundImagesets = reactive<BackgroundImageset[]>([]);\nconst sheet = ref<SheetType | null>(null);\nconst layersLoaded = ref(false);\nconst positionSet = ref(false);\nconst accentColor = ref(\"#f4ba3e\");\nconst accentColor2 = ref(\"#6793ff\");\nconst buttonColor = ref(\"#f4ba3e\");\nconst tab = ref(0);\nconst showHorizon = ref(true);\nconst showAltAzGrid = ref(true);\nconst showEcliptic = ref(true);\nconst showLocationSelector = ref(false);\nconst playing = ref(false);\nconst showControls = ref(smAndUp.value);\nconst showConstellations = ref(false);\nconst showPlanetLabels = ref(true);\nconst inIntro = ref(false);\nconst showPrivacyDialog = ref(false);\nconst datePickerOpen = ref(false);\nconst skipIntroChecked = ref(skipIntroContent);\n\nconst optOut = typeof storedOptOut === \"string\" ? storedOptOut === \"true\" : null;\nconst responseOptOut = ref(optOut);\n\nconst geocodingOptions = {\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  access_token: process.env.VUE_APP_MAPBOX_ACCESS_TOKEN ?? \"\", \n};\n\nconst selectedLocation = ref<LocationDeg>({\n  longitudeDeg: -71.1056,\n  latitudeDeg: 42.3581,\n});\nconst selectedLocationText = ref(\"\");\nupdateSelectedLocationText();\n\n// const { geolocation, geolocate} = useGeolocation();\n// function useGeolocated() {\n//   if (!geolocation.value) {return;}\n//   selectedLocation.value = { latitudeDeg: geolocation.value.latitude, longitudeDeg: geolocation.value.longitude };\n// }\n// watch(\n//   geolocation,\n//   (location) => {\n//     if (location) {\n//       selectedLocation.value = { latitudeDeg: location?.latitude, longitudeDeg: location?.longitude };\n//     }\n//   }\n// );\n\nconst searchErrorMessage = ref<string | null>(null);\nconst { selectedTimezoneOffset, shortTimezone, browserTimezoneOffset } = useTimezone(selectedLocation);\n\nconst selectedTime = ref(Date.now());\n\nconst { getTimeforSunAlt, getSunPositionAtTime } = useSun(store, selectedLocation, selectedTime, selectedTimezoneOffset);\n// faking localization because\n// <date-time-picker> and <time-display> are not timezone aware\nconst localSelectedDate = computed({\n  // if you console log this date it will still say the local timezone \n  // as determined by the browser Intl.DateTimeFormat().resolvedOptions().timeZone\n  // but we have manually offset it so the hours are correct for the selected timezone\n  get: () => {\n    const time = selectedTime.value;\n    const fakeUTC = time + browserTimezoneOffset;\n    return new Date(fakeUTC + selectedTimezoneOffset.value);\n  },\n  set: (value: Date) => {\n    // get local time\n    const time = value.getTime();\n    // undo fake localization\n    const newTime = time - selectedTimezoneOffset.value - browserTimezoneOffset;\n    selectedTime.value = new Date(newTime).getTime();\n  }\n});\n\n// eslint-disable-next-line @typescript-eslint/ban-ts-comment\n// @ts-ignore\nconst wwtSettings: Settings = Settings.get_active();\n\nfunction doWWTModifications() {\n\n  Grids._makeAltAzGridText = makeAltAzGridText;\n  Grids.drawEcliptic = drawEcliptic;\n\n  // We need to render one frame ahead of time\n  // as there's a lot of setup done on the first frame\n  // render that we need to use\n  WWTControl.singleton.renderOneFrame();\n\n  const boundRenderOneFrame = renderOneFrame.bind(WWTControl.singleton);\n  const newFrameRender = function() { \n    boundRenderOneFrame(\n      showHorizon.value,\n      showHorizon.value,\n      showPlanetLabels.value,\n    );\n  };\n\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-ignore\n  WWTControl.singleton._drawSkyOverlays = drawSkyOverlays.bind(WWTControl.singleton);\n\n  // as well as our custom text overlays\n  // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n  // @ts-ignore\n  WWTControl.singleton.renderOneFrame = newFrameRender;\n\n  const originalUpdatePlanetLocations = Planets.updatePlanetLocations;\n  const planetScales = [\n    8,  // Sun\n    1.25,  // Mercury\n    1.25,  // Venus\n    1.25,  // Mars\n    2.5,  // Jupiter\n    4.5,  // Saturn\n    2,  // Uranus\n    2,  // Neptune\n    1,  // Pluto\n    1.25,  // Moon\n  ];\n  function newUpdatePlanetLocations(threeD: boolean) {\n    originalUpdatePlanetLocations(threeD);\n    for (let i = 0; i <= SolarSystemObjects.moon; i++) {\n      Planets._planetScales[i] = planetScales[i];\n    }\n  }\n  Planets.updatePlanetLocations = newUpdatePlanetLocations;\n  Planets.drawPlanets = drawPlanets;\n\n  // Recall that zoom = 6 * FOV, in WWT\n  const maxFOV = 90;\n  WWTControl.singleton.set_zoomMax(maxFOV * 6);\n\n}\n\nonMounted(() => {\n  store.waitForReady().then(async () => {\n    skyBackgroundImagesets.forEach(iset => backgroundImagesets.push(iset));\n\n    // If there are layers to set up, do that here!\n    layersLoaded.value = true;\n\n    const altTime = getTimeforSunAlt(2).setting;\n    if (altTime) {\n      selectedTime.value = altTime;\n    }\n    setTimeout(() => resetCamera().then(() => positionSet.value = true), 100);\n\n    store.applySetting([\"localHorizonMode\", true]);\n    store.applySetting([\"altAzGridColor\", Color.fromArgb(180, 133, 201, 254)]);\n    store.applySetting([\"eclipticColor\", Color.fromArgb(255, 255, 0, 255)]);\n    store.applySetting([\"actualPlanetScale\", false]);\n    updateAltAzGrid(showAltAzGrid.value);\n    updateAltAzGridText(showAltAzGrid.value || showHorizon.value);\n    updateEcliptic(showEcliptic.value);\n    updateConstellations(showConstellations.value);\n    updateWWTLocation(selectedLocation.value);\n    store.setClockSync(false);\n    store.setClockRate(1800);\n\n    doWWTModifications();\n    // geolocate().then(() => {\n    //   console.log('got location');\n    //   useGeolocated(); \n    //   selectedTime.value = todayAt4pm.value;\n    //   resetCamera();\n    // });\n    \n    createUserEntry();\n\n    setInterval(() => {\n      if (playing.value) {\n        const time = store.currentTime;\n        selectedTime.value = time.getTime();\n      }\n      const sunPosition = getSunPositionAtTime(store.currentTime);\n      updateEclipticColor(sunPosition.altRad);\n    }, 500);\n\n    window.addEventListener(\"keyup\", (event: KeyboardEvent) => {\n      if ([\"Esc\", \"Escape\"].includes(event.key) && showVideoSheet.value) {\n        showVideoSheet.value = false;\n      }\n    });\n\n    window.addEventListener(\"visibilitychange\", () => {\n      if (document.visibilityState === \"hidden\") {\n        updateUserData();\n      } else {\n        resetData();\n      }\n    });\n  });\n});\n\nconst ready = computed(() => layersLoaded.value && positionSet.value);\n\n/* `isLoading` is a bit redundant here, but it could potentially have independent logic */\nconst isLoading = computed(() => !ready.value);\n\n// It doesn't really matter which one we note here\nconst inNorthernHemisphere = computed(() => selectedLocation.value.latitudeDeg > 0);\n\nconst dateTime = computed(() => new Date(selectedTime.value));\n\n/* Properties related to device/screen characteristics */\nconst smallSize = computed(() => smAndDown.value);\n\nconst mobile = computed(() => smallSize.value && touchscreen);\n\nconst xSmallSize = computed(() => xs.value);\n\n/* This lets us inject component data into element CSS */\nconst cssVars = computed(() => {\n  return {\n    \"--accent-color\": accentColor.value,\n    \"--accent-color2\": accentColor2.value,\n    \"--app-content-height\": showTextSheet.value ? \"66%\" : \"100%\",\n  };\n});\n\n\n/**\n  Computed flags that control whether the relevant dialogs display.\n  The `sheet` data member stores which sheet is open, so these are just\n  computed wrappers around modifying/querying that which can be used as\n  dialog v-model values\n*/\nconst showTextSheet = computed({\n  get() {\n    return sheet.value === \"text\";\n  },\n  set(_value: boolean) {\n    selectSheet(\"text\");\n  }\n});\n\nconst showVideoSheet = computed({\n  get() {\n    return sheet.value === \"video\";\n  },\n  set(value: boolean) {\n    selectSheet(\"video\");\n    if (!value) {\n      const video = document.querySelector(\"#info-video\") as HTMLVideoElement;\n      video.pause();\n    } else {\n      nextTick(() => {\n        const video = document.querySelector(\"#info-video\") as HTMLVideoElement;\n        video.addEventListener(\"play\", (_event: Event) => {\n          videoPlaying = true;\n          videoPlayingStartTimestamp = Date.now();\n          videoPlayed = true;\n        });\n\n        video.addEventListener(\"pause\", (_event: Event) => {\n          videoPlaying = false;\n          const now = Date.now();\n          if (videoPlayingStartTimestamp !== null) {\n            videoPlayingTimeMs += (now - videoPlayingStartTimestamp);\n            videoPlayingStartTimestamp = null;\n          }\n        });\n      });\n    }\n  }\n});\n\n/**\n  This is convenient if there's any other logic that we want to run\n  when the splash screen is closed\n*/\nfunction closeSplashScreen() {\n  showSplashScreen.value = false;\n}\n\nfunction selectSheet(sheetType: SheetType | null) {\n  if (sheet.value === sheetType) {\n    sheet.value = null;\n    nextTick(() => {\n      blurActiveElement();\n    });\n  } else {\n    sheet.value = sheetType;\n  }\n}\n\nfunction getTextForLocation(longitudeDeg: number, latitudeDeg: number): Promise<string> {\n  // eslint-disable-next-line @typescript-eslint/naming-convention\n  return textForLocation(longitudeDeg, latitudeDeg, geocodingOptions);\n}\n\nfunction setLocationFromFeature(feature: MapBoxFeature) {\n  selectedLocation.value = { longitudeDeg: feature.center[0], latitudeDeg: feature.center[1] };\n  getTextForLocation(feature.center[0], feature.center[1]).then(text => {\n    selectedLocationText.value = text;\n  }).catch(_err => {\n    searchErrorMessage.value = \"An error occurred while searching\";\n  });\n}\n\nfunction setLocationFromSearchFeature(feature: MapBoxFeature) {\n  setLocationFromFeature(feature);\n  userSelectedSearchLocations.push(feature.center);\n}\n\nasync function updateSelectedLocationText() {\n  selectedLocationText.value = await getTextForLocation(selectedLocation.value.longitudeDeg, selectedLocation.value.latitudeDeg);\n}\n\nfunction searchProvider(text: string): Promise<MapBoxFeatureCollection> {\n  return geocodingInfoForSearch(text, geocodingOptions);\n}\n\nfunction updateLocationFromMap(location: LocationDeg) {\n  selectedLocation.value = location;\n  userSelectedMapLocations.push([location.latitudeDeg, location.longitudeDeg]);\n}\n\nasync function createUserEntry() {\n  if (responseOptOut.value) {\n    return;\n  }\n\n  const response = await fetch(`${STORY_DATA_URL}/${uuid}`, {\n    method: \"GET\",\n    // eslint-disable-next-line @typescript-eslint/naming-convention\n    headers: { \"Authorization\": process.env.VUE_APP_CDS_API_KEY ?? \"\" }\n  });\n  const content = await response.json();\n  const exists = response.status === 200 && content.response?.user_uuid != undefined;\n  if (exists) {\n    return;\n  }\n\n  fetch(`${STORY_DATA_URL}`, {\n    method: \"PUT\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      \"Authorization\": process.env.VUE_APP_CDS_API_KEY ?? \"\",\n    },\n    body: JSON.stringify({\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      user_uuid: uuid,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      user_selected_search_locations: userSelectedSearchLocations,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      user_selected_map_locations: userSelectedMapLocations,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      app_time_ms: 0, info_time_ms: 0, video_time_ms: 0,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      video_opened: videoOpened, video_played: videoPlayed,\n    }),\n  });\n}\n\nfunction resetData() {\n  userSelectedMapLocations = [];\n  userSelectedSearchLocations = [];\n  infoTimeMs = 0;\n  videoPlayingTimeMs = 0;\n  const now = Date.now();\n  appStartTimestamp = now;\n  infoStartTimestamp = showTextSheet.value ? now : null;\n  videoPlayingStartTimestamp = videoPlaying ? now : null;\n}\n\nasync function updateUserData() {\n  if (responseOptOut.value) {\n    return;\n  }\n\n  const now = Date.now();\n  const infoTime = (showTextSheet.value && infoStartTimestamp !== null) ? now - infoStartTimestamp : infoTimeMs;\n  const videoTime = (videoPlaying && videoPlayingStartTimestamp !== null) ? now - videoPlayingStartTimestamp : videoPlayingTimeMs;\n\n  fetch(`${STORY_DATA_URL}/${uuid}`, {\n    method: \"PATCH\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      \"Authorization\": process.env.VUE_APP_CDS_API_KEY ?? \"\",\n    },\n    body: JSON.stringify({\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      user_selected_search_locations: userSelectedSearchLocations,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      user_selected_map_locations: userSelectedMapLocations,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      delta_app_time_ms: now - appStartTimestamp,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      delta_info_time_ms: infoTime,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      delta_video_time_ms: videoTime,\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      video_opened: videoOpened, video_played: videoPlayed,\n    }),\n    keepalive: true,\n  }).then(() => {\n    resetData();\n  });\n}\n\nasync function resetCamera(): Promise<void> {\n  const time = store.currentTime;\n\n  const latRad = selectedLocation.value.latitudeDeg * D2R;\n  const lonRad = selectedLocation.value.longitudeDeg * D2R;\n\n  const sunAltAz = getSunPositionAtTime(time);\n  const sunAz = sunAltAz.azRad;\n  const startAlt = smallSize.value ? 15 * D2R : 25 * D2R;\n  const startRADec = horizontalToEquatorial(\n    startAlt,\n    sunAz,\n    latRad,\n    lonRad,\n    time,\n  );\n\n  return store.gotoRADecZoom({\n    raRad: startRADec.raRad,\n    decRad: startRADec.decRad,\n    zoomDeg: 360,\n    instant: true,\n  });\n  \n}\n\nfunction updateWWTLocation(location: LocationDeg) {\n  wwtSettings.set_locationLat(location.latitudeDeg);\n  wwtSettings.set_locationLng(location.longitudeDeg);\n}\n\nfunction updateAltAzGrid(show: boolean) {\n  store.applySetting([\"showAltAzGrid\", show]);\n}\n\nfunction updateAltAzGridText(show: boolean) {\n  store.applySetting([\"showAltAzGridText\", show]);\n}\n\nfunction updateEcliptic(show: boolean) {\n  store.applySetting([\"showEcliptic\", show]);\n  // store.applySetting([\"showEclipticOverviewText\", show]);\n}\n\nfunction updateEclipticColor(sunAlt: number) {\n  const opacity = skyOpacityForSunAlt(sunAlt);\n  const component = 255 - opacity * (255 - 119);\n  const color = Color.fromArgb(255, component, 0, component);\n  store.applySetting([\"eclipticColor\", color]);\n}\n\nfunction updateConstellations(show: boolean) {\n  store.applySetting([\"showConstellationFigures\", show]);\n  store.applySetting([\"showConstellationLabels\", show]);\n}\n\nwatch(selectedLocation, (location: LocationDeg) => {\n  console.log('selectedLocation changed', location);\n  updateSelectedLocationText();\n  updateWWTLocation(location);\n  resetCamera();\n  WWTControl.singleton.renderOneFrame();\n});\n\n// watch(selectedTime, (value: number) => {\n//   console.log(value);});\nwatch(playing, (play: boolean) => {\n  store.setClockSync(play);\n});\n\nwatch(showAltAzGrid, (show: boolean) => {\n  updateAltAzGrid(show);\n  updateAltAzGridText(show || showHorizon.value);\n});\nwatch(showEcliptic, updateEcliptic);\nwatch(showConstellations, updateConstellations);\nwatch(showHorizon, (show: boolean) => {\n  updateAltAzGridText(show || showAltAzGrid.value);\n});\n\nwatch(dateTime, (dt: Date) => {\n  store.setTime(dt);\n});\n\nwatch(skipIntroChecked, (checked: boolean) => {\n  window.localStorage.setItem(SKIP_INTRO_CONTENT_KEY, String(checked));\n});\n\nwatch(showTextSheet, (show: boolean) => {\n  const now = Date.now();\n  if (show) {\n    infoStartTimestamp = now; \n  } else if (infoStartTimestamp !== null) {\n    infoTimeMs += (now - infoStartTimestamp);\n    infoStartTimestamp = null;\n  }\n});\n\nwatch(showVideoSheet, (show: boolean) => {\n  if (show) {\n    videoOpened = true;\n  }\n});\n\nwatch(inNorthernHemisphere, (_inNorth: boolean) => resetAltAzGridText());\n\nwatch(showSplashScreen, (show: boolean) => {\n  if (!show) {\n    inIntro.value = true;\n  }\n});\n\nwatch(inIntro, (intro: boolean) => {\n  if (!intro) {\n    if (!showSplashScreen.value && responseOptOut.value === null) {\n      showPrivacyDialog.value = true;\n    }\n  }\n});\n\nwatch(responseOptOut, (optOut: boolean | null) => {\n  if (optOut !== null) {\n    window.localStorage.setItem(OPT_OUT_KEY, String(optOut));\n  }\n});\n</script>\n\n<style lang=\"less\">\n@font-face {\n  font-family: \"Highway Gothic Narrow\";\n  src: url(\"./assets/HighwayGothicNarrow.ttf\");\n}\n\n:root {\n  --default-font-size: clamp(0.7rem, min(1.7vh, 1.7vw), 1.1rem);\n  --default-line-height: clamp(1rem, min(2.2vh, 2.2vw), 1.6rem);\n}\n\nhtml {\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  background-color: #000;\n  overflow: hidden;\n\n  \n  -ms-overflow-style: none;\n  // scrollbar-width: none;\n}\n\nbody {\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  padding: 0;\n  overflow: hidden;\n\n  font-family: Verdana, Arial, Helvetica, sans-serif;\n}\n\n#main-content {\n  position: fixed;\n  width: 100%;\n  height: var(--app-content-height);\n  overflow: hidden;\n\n  transition: height 0.1s ease-in-out;\n}\n\n#app {\n  width: 100%;\n  height: 100%;\n  margin: 0;\n  overflow: hidden;\n  font-size: 11pt;\n\n  .wwtelescope-component {\n    position: absolute;\n    top: 0;\n    width: 100%;\n    height: 100%;\n    border-style: none;\n    border-width: 0;\n    margin: 0;\n    padding: 0;\n  }\n}\n\n\n.fade-enter-active,\n.fade-leave-active {\n  transition: opacity 0.3s;\n}\n.fade-enter,\n.fade-leave-to {\n  opacity: 0;\n}\n\n.modal {\n  position: absolute;\n  top: 0px;\n  left: 0px;\n  width: 100%;\n  height: 100%;\n  z-index: 100;\n  color: #fff;\n  background-color: rgba(0, 0, 0, 0.7);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n#modal-loading {\n  background-color: #000;\n  .container {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: center;\n    .spinner {\n      background-image: url(\"https://projects.cosmicds.cfa.harvard.edu/cds-website/misc/lunar_loader.gif\");\n      background-repeat: no-repeat;\n      background-size: contain;\n      width: 3rem;\n      height: 3rem;\n    }\n    p {\n      margin: 0 0 0 1rem;\n      padding: 0;\n      font-size: 150%;\n    }\n  }\n}\n\np {\n  margin-block: 10px;\n}\n\nli {\n  margin-left: 20px;\n  margin-block: 8px;\n}\n\n#top-content {\n  position: absolute;\n  top: 1rem;\n  left: 1rem;\n  width: calc(100% - 2rem);\n  pointer-events: none;\n  display: flex;\n  justify-content: space-between;\n  align-items: flex-start;\n}\n\n#left-buttons {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n}\n\n#center-buttons {\n  position: absolute;\n  top: 0;\n  left: 50%;\n  transform: translateX(-50%);\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  gap: 1rem;\n  \n  #my-location-label {\n    background-color: #ccc;\n    padding-inline: 5px;\n    padding-block: 2px;\n    border-radius: 1em;\n    color: black;\n    font-size: var(--default-font-size);\n    pointer-events: auto;\n    cursor:pointer\n  }\n  \n  #my-location-label:hover {\n    filter: drop-shadow(0 0 2px white;)\n  }\n}\n\n#right-buttons {\n  display: flex;\n  flex-direction: column;\n  gap: 10px;\n  align-items: flex-end;\n  height: auto;\n}\n\n#controls {\n  pointer-events: auto;\n\n  background: black;\n  padding-block: 0.5em;\n  padding-right: 0.5em;\n  border-radius: 5px;\n  border: solid 1px var(--accent-color);\n  display: flex;\n  flex-direction: column;\n  pointer-events: auto;\n\n  .v-label {\n    color: var(--accent-color);\n    opacity: 1;\n    font-size: var(--default-font-size);\n  }\n\n  #control-checkboxes {\n    display: flex;\n    flex-direction: column;\n    justify-content: flex-start;\n    // padding-left: calc(0.5 * var(--default-line-height));\n\n    .v-checkbox .v-selection-control {\n      font-size: calc(1.1 * var(--default-font-size));\n      height: calc(1.2 * var(--default-line-height));\n      min-height: calc(1.2 * var(--default-line-height));\n    }\n    \n    .v-selection-control .v-label {\n      white-space: nowrap;\n    }\n\n    .v-checkbox .v-selection-control__input {\n      width: calc(1.2 * var(--default-line-height));\n      height: calc(1.2 * var(--default-line-height));\n    }\n\n    .v-checkbox .v-selection-control__wrapper {\n      width: calc(1.2 * var(--default-line-height));\n      height: calc(1.2 * var(--default-line-height));\n    }\n\n    .v-btn {\n      align-self: center;\n      padding-left: 5px;\n      padding-right: 5px;\n      border: solid 1px #899499;\n\n      &:focus {\n        border: 2px solid white;\n      }\n    }\n\n    .v-btn__content {\n      color: black;\n      font-weight: 900;\n      white-space: break-spaces;\n      width: 150px;\n    }\n  }\n  \n  #controls-top-row {\n    padding-left: 0.5em;\n    display: flex;\n    width: 100%;\n    flex-direction: row;\n    justify-content: flex-end;\n  }\n}\n\n#bottom-content {\n  display: flex;\n  flex-direction: row;\n  position: absolute;\n  bottom: 1rem;\n  right: 1rem;\n  width: calc(100% - 2rem);\n  pointer-events: none;\n  align-items: center;\n  gap: 5px;\n}\n\n// vuetify smAndDown\n@media ( max-width: 960px ) {\n  #bottom-content {\n    align-items: flex-start;\n  }\n  #date-picker {\n    margin-block: 0;\n  }\n  \n  .td__container.bsn__time {\n    margin-block: 0.25em !important;\n  }\n}\n\n@media (max-width: 600px) {\n  #bottom-content {\n    flex-direction: column;\n    align-items: center;\n    gap: 1rem;\n  }\n}\n\n#splash-overlay {\n  position: fixed;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n}\n\n#splash-screen {\n  color: #FFFFFF;\n  background-color: #000000;\n  display: flex;\n  flex-direction: column;\n  flex-wrap: wrap;\n  align-content: center;\n  justify-content: space-around;\n\n  font-family: 'Highway Gothic Narrow', 'Roboto', sans-serif;\n  font-size: min(8vw, 7vh);\n\n  p {\n    font-family: 'Highway Gothic Narrow', 'Roboto', sans-serif;\n    font-weight: bold;\n    vertical-align: middle;\n  }\n    \n  .highlight {\n    color: var(--accent-color2);\n    text-transform: uppercase;\n    font-weight: bolder;\n  }\n\n  border-radius: 30px;\n  border: min(1.2vw, 0.9vh) solid var(--accent-color);\n  overflow: auto;\n  padding-top: 4rem;\n  padding-bottom: 1rem;\n\n  @media (max-width: 699px) {\n    max-height: 80vh;\n    max-width: 90vw;\n  }\n\n  @media (min-width: 700px) {\n    max-height: 85vh;\n    max-width: min(70vw, 800px);\n  }\n\n  div {\n    margin-inline: auto;\n    text-align: center;\n  }\n\n  .small {\n    font-size: var(--default-font-size);\n    font-weight: bold;\n  }\n\n  #close-splash-button {\n    position: absolute;\n    top: 20px;\n    right: 20px;\n    text-align: end;\n    color: var(--accent-color);\n    font-size: min(5vw, 4vh);\n\n    &:hover {\n      cursor: pointer;\n    }\n  }\n\n  #splash-screen-text {\n    // in the grid, the text is in the 2nd column\n    display: flex;\n    flex-direction: column;\n    line-height: 130%;    \n  }\n\n  .splash-get-started {\n    border: 2px solid white;\n    font-size: calc(1.8 * var(--default-font-size));\n    margin-top: 5%;\n    margin-bottom: 2%;\n    font-weight: bold !important;\n  }\n\n  #splash-screen-guide {\n    margin-block: 1.5em;\n    font-size: min(5vw, 4vh);\n    line-height: 140%;\n    width: 75%;\n\n    .v-col{\n      padding: 0;\n    }\n    \n    .svg-inline--fa {\n      color:var(--accent-color);\n      margin: 0 10px;\n    }\n  }\n\n  #splash-screen-acknowledgements {\n    margin-top: 3rem;\n    font-size: calc(1.7 * var(--default-font-size));\n    line-height: calc(1.5 * var(--default-line-height));\n    width: 60%; \n  }\n  #splash-screen-logos {\n    margin-block: 0.75em;\n    img {\n    height: 5vmin;\n    vertical-align: middle;\n    margin: 2px;\n    }\n    @media only screen and (max-width: 600px) {\n      img {\n        height: 24px;\n      }\n    }\n    svg {\n      vertical-align: middle;\n      height: 24px;\n    }\n  }\n}\n\n// From Sara Soueidan (https://www.sarasoueidan.com/blog/focus-indicators/) & Erik Kroes (https://www.erikkroes.nl/blog/the-universal-focus-state/)\n:focus-visible:not(.v-overlay__content, .v-field__input input),\nbutton:focus-visible,\n.focus-visible,\n.v-selection-control--focus-visible .v-selection-control__input,\n#intro-window-close-button:focus-visible {\n  outline: 9px double white !important;\n  box-shadow: 0 0 0 6px black !important;\n  border-radius: .125rem;\n}\n\n.video-wrapper {\n  height: 100%;\n  background: black;\n  text-align: center;\n  z-index: 1000;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  #video-close-icon {\n    position: absolute;\n    top: 10px;\n    right: 10px;\n    z-index: 15;\n    \n    &:hover {\n      cursor: pointer;\n    }\n\n    &:focus {\n      color: white;\n      border: 2px solid white;\n    }\n  }\n}\n\nvideo {\n  // height: 100%;\n  // width: auto;\n  // max-width: 100%;\n  object-fit: contain;\n}\n\n#info-video {\n  // position: absolute;\n  // top: 0;\n  // left: 0;\n  width: 95%;\n  height: auto;\n  max-width: 100%;\n  overflow: hidden;\n  padding: 0px;\n  z-index: 10;\n  border: 1px solid white;\n}\n\n#introduction-overlay {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.info-card {\n  height: fit-content;\n  padding-inline: 30px;\n  padding-block: 20px;\n  max-width: 500px;\n\n  @media (max-width: 600px) {\n    width: 90%;\n  }\n\n  @media (min-width: 600px) {\n    width: 80%;\n  }\n}\n\n.bottom-sheet {\n  .v-overlay__content {\n    align-self: flex-end;\n    padding: 0;\n    margin: 0;\n    max-width: 100%;\n    height: 34%;\n  }\n\n  #tabs {\n    width: calc(100% - 3em);\n    align-self: left;\n  }\n  \n  .info-text {\n    height: 33vh;\n    padding-bottom: 25px;\n  \n    & a {\n      text-decoration: none;\n    }\n\n    & h3 {\n      margin-top: 20px;\n      margin-bottom: 6px;\n      color: var(--accent-color);\n    }\n  }\n  \n  .close-icon {\n    position: absolute;\n    top: 10px;\n    right: 10px;\n    z-index: 15;\n  \n    &:hover {\n      cursor: pointer;\n    }\n  \n    &:focus {\n      color: white;\n      border: 2px solid white;\n    }\n  }\n  \n  .scrollable {\n    overflow-y: auto;\n  }\n  \n  #tab-items {\n    // padding-bottom: 2px !important;\n  \n    .v-card-text {\n      font-size: ~\"max(14px, calc(0.7em + 0.3vw))\";\n      padding-top: ~\"max(2vw, 16px)\";\n      padding-left: ~\"max(4vw, 16px)\";\n      padding-right: ~\"max(4vw, 16px)\";\n  \n      .end-spacer {\n        height: 25px;\n      }\n    }\n  \n  }\n  \n  #close-text-icon {\n    position: absolute;\n    top: 0.25em;\n    right: calc((3em - 0.6875em) / 3); // font-awesome-icons have width 0.6875em\n    color: white;\n  }\n\n  // This prevents the tabs from having some extra space to the left when the screen is small\n  // (around 400px or less)\n  .v-tabs:not(.v-tabs--vertical).v-tabs--right>.v-slide-group--is-overflowing.v-tabs-bar--is-mobile:not(.v-slide-group--has-affixes) .v-slide-group__next, .v-tabs:not(.v-tabs--vertical):not(.v-tabs--right)>.v-slide-group--is-overflowing.v-tabs-bar--is-mobile:not(.v-slide-group--has-affixes) .v-slide-group__prev {\n    display: none;\n  }\n\n}\n\n.map-container {\n  @media (max-width: 600px) {\n    width: 90vw;\n    height: 70vh;\n  }\n\n@media (min-width: 601px) {\n    width: 70vw;\n    height: 60vh;\n  }\n}\n\n#geolocation-close {\n  position: absolute;\n  top: 1rem;\n  right: 1rem;\n  z-index: 1000;\n}\n\n#geolocation-controls {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-around;\n  align-items: center;\n  position: absolute;\n  width: 350px;\n  bottom: 1rem;\n  right: 1rem;\n  z-index: 1000;\n  gap: 5px;\n\n  .location-search {\n    flex-grow: 1;\n  }\n\n  @media (max-width: 600px) {\n    width: 300px;\n  }\n}\n\n#geolocation-wrapper\\+location .v-btn {\n  background-color: black;\n}\n\n#slider {\n  display: flex;\n  flex-direction: row;\n  flex-grow: 1;\n  gap: 0.5em;\n  align-items: center;\n}\n\n// Styling the slider\n#slider .v-slider {\n  pointer-events: auto;\n\n  .v-slider-track {\n    // --v-slider-track-size: 4px !important;\n\n    .v-slider-track__background {\n      background-color: #CCC !important;\n    }\n\n    .v-slider-track__fill {\n      background-color: rgb(255 193 203)!important;\n      height: var(--v-slider-track-size) !important;\n    }\n\n    .v-slider-track__background--opacity {\n      opacity: 1 !important;\n    }\n  }\n\n  .v-slider-thumb {\n    \n    .v-slider-thumb__surface {\n      border: 1px solid black !important;\n    }\n  }\n  \n\n  .v-slider-thumb__label {\n    min-width: fit-content;\n    white-space: nowrap;\n    color: black;\n    padding-inline: 0.7rem;\n    background-color: var(--accent-color);\n\n    font-size: var(--default-font-size);\n    padding-block: calc(0.5 * var(--default-line-height));\n\n    @media (max-width: 600px) {\n      font-size: calc(1 * var(--default-font-size));\n      padding-block: 0;\n      padding-inline: 0.3rem;\n      height: 15px;\n    }\n  }\n  \n  .v-slider-thumb__label::before {\n    color: var(--accent-color);\n  }\n}\n\n#change-flags {\n  position: absolute;\n  display: flex;\n  flex-direction: row;\n  gap: 5px;\n\n  @media (max-width: 990px) {\n    right: 0rem;\n    bottom: 0rem;\n  }\n  @media (min-width: 948px) {\n    right: 0.5rem;\n    bottom: 40px;\n  }\n    \n  .icon-wrapper {\n    margin: 0;\n    padding: 0.15em;\n    border: none;\n    min-width: 0;\n  }\n}\n\n#privacy-popup-dialog {\n\n  .v-card-text {\n    color: #BDBDBD;\n  }\n\n  .v-overlay__content {\n    font-size: var(--default-font-size);\n    background-color: purple;\n    position: absolute;\n    bottom: 0;\n    right: 0;\n  }\n\n  .v-btn--size-default {\n      font-size: calc(0.9 * var(--default-font-size));\n    }  \n\n  .v-card-actions .v-btn {\n    padding: 0 4px;\n  }\n}\n\n#intro-window-close-button {\n    position: absolute;\n    top: 0.25em;\n    right: 0.25em;\n\n    &:hover {\n      cursor: pointer;\n    }\n}\n\n.bullet-icon {\n  color: var(--accent-color);\n  width: 1.5em;\n}\n\n#date-picker {\n  margin: 1rem;\n  pointer-events: auto;\n  display: flex;\n  align-items: center;\n  gap: 1rem;\n}\n\n.dtp-close-button {\n  position: absolute;\n  top: 0.5em;\n  right: 0.5em;\n  border-radius: 50%;\n  border: 1.5px solid car(--accent-color)\n}\n.dtp__button {\n  background-color: var(--accent-color);\n  font-size: 0.85em;\n  color: black;\n  border-radius: 5px;\n  padding: 4px;\n  margin: 4px;\n  cursor: pointer;\n}\n\n.td__card {\n  border: 1px solid var(--accent-color);\n  text-align: right;\n  position: relative;\n  overflow: visible;\n}\n\n.td__icon {\n  position: absolute;\n  bottom: -4px;\n  right: 0px;\n  z-index: 10000;\n}\n\n.bsn__time .td__time_time {\n  font-size: var(--default-font-size);\n}\n\n.bsn__time .td__date_date {\n  font-size: calc(0.85 * var(--default-font-size));\n}\n\n.bsn__time .td__timezone_tz {\n  font-size: calc(0.85 * var(--default-font-size));\n}\n\n#body-logos  {\n  position: fixed;\n  right: 0.5em;\n  bottom: 0.5em;\n\n  #icons-container img {\n    height: 35px;\n    vertical-align: middle;\n    margin: 2px;\n  }\n}\n</style>\n","import script from \"./PlanetParade.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PlanetParade.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./PlanetParade.vue?vue&type=style&index=0&id=019ed85d&lang=less\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { aliases, mdi } from 'vuetify/iconsets/mdi';\nimport { createVuetify } from 'vuetify';\n\n// For test use. Do not include createVuetify()\n// see https://next.vuetifyjs.com/en/features/treeshaking/\n//import * as components from 'vuetify/components';\n//import * as directives from 'vuetify/directives';\n\n// Translations provided by Vuetify\nimport { en } from 'vuetify/locale';\n\n// Styles\nimport 'vuetify/styles';\nimport '@mdi/font/css/materialdesignicons.css';\n\nexport default createVuetify({\n  // Icon Fonts\n  icons: {\n    defaultSet: 'mdi',\n    aliases,\n    sets: {\n      mdi,\n    },\n  },\n  locale: {\n    locale: 'en',\n    fallback: 'en',\n    messages: { en },\n  },\n  theme: {\n    defaultTheme: 'dark',\n  },\n});\n\n// Export for test.\n//export { components, directives };\n","import { useModel as _useModel, mergeModels as _mergeModels, defineComponent as _defineComponent } from 'vue'\nimport { toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode } from \"vue\"\n\nconst _hoisted_1 = [\"min\", \"max\", \"step\", \"value\"]\n\nimport { ref, watch, computed } from 'vue';\n\nexport interface Props {\n  editable?: boolean;\n  min?: string | number\n  max?: string | number ;\n  step?: number;\n  clamp?: boolean;\n  zeroPad?: number;\n  pad2?: boolean;\n}\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'TapToInput',\n  props: /*@__PURE__*/_mergeModels({\n    editable: { type: Boolean, default: true },\n    min: { default: 0 },\n    max: { default: 9999 },\n    step: { default: 1 },\n    clamp: { type: Boolean, default: false },\n    zeroPad: { default: 0 },\n    pad2: { type: Boolean, default: false }\n  }, {\n    \"modelValue\": { default: 0 },\n    \"modelModifiers\": {},\n  }),\n  emits: [\"update:modelValue\"],\n  setup(__props: any) {\n\nconst value = _useModel(__props, \"modelValue\");\nconst psuedoValue = ref(value.value);\n\nconst editing = ref(false);\nconst input = ref();\n\nconst props = __props;\n\nfunction pad(value: number) {\n  if (props.zeroPad > 0) {\n    return value.toString().padStart(props.zeroPad, '0');\n  }\n  if (props.pad2) {\n    return value.toString().padStart(2, '0');\n  }\n  return value;\n}\n\nconst parseValue = (value: string | number | CallableFunction) => {\n  if (typeof value === 'number') {\n    return value;\n  } \n  if (typeof value === 'function') {\n    return value();\n  }\n  return value.includes('.') ? parseFloat(value) : parseInt(value);\n};\n\nconst minValue = ref(parseValue(props.min));\nconst maxValue = ref(parseValue(props.max));\nconst stepValue = ref(parseValue(props.step));\n\nfunction setValue(event: Event) {\n  if (event.target) {\n    psuedoValue.value = parseInt((event.target as HTMLInputElement).value);\n  }\n}\n\nfunction blurred() {\n  editing.value = false;\n}\n\nfunction round(value, toNearest) {\n  return Math.round(value / toNearest) * toNearest;\n}\n\nconst isValid = computed(() => {\n  if (psuedoValue.value < minValue.value) {\n    return false;\n  }\n  if (psuedoValue.value > maxValue.value) {\n    return false;\n  }\n  return true;\n});\n\nfunction clampValue(value: number) {\n  if (!props.clamp) {\n    return value;\n  }\n  if (value < minValue.value) {\n    value = minValue.value;\n  } else if (value > maxValue.value) {\n    value = maxValue.value;\n  }\n  if ((value % stepValue.value) !== 0) {\n    value = round(value, stepValue.value);\n  }\n  return value;\n}\n\n// watch props\nwatch(() => props.min, (newVal) => {\n  minValue.value = parseValue(newVal);\n  psuedoValue.value = clampValue(psuedoValue.value);\n});\n\nwatch(() => props.max, (newVal) => {\n  maxValue.value = parseValue(newVal);\n  psuedoValue.value = clampValue(psuedoValue.value);\n});\n\nwatch(() => props.step, (newVal) => {\n  stepValue.value = parseValue(newVal);\n});\n\nwatch(value, (newVal) => {\n  psuedoValue.value = clampValue(newVal);\n});\n\n\nwatch(input, (value) => {\n  if (value) {\n    value.focus();\n  }    \n});\n\nwatch(psuedoValue, (newValue, oldValue) => {\n  if (isValid.value) {\n    value.value = psuedoValue.value;\n    return;\n  }\n  if (props.clamp) {\n    psuedoValue.value = clampValue(newValue);\n    value.value = psuedoValue.value;\n    return;\n  }\n  psuedoValue.value = oldValue;\n  \n});\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (!editing.value || !props.editable)\n    ? (_openBlock(), _createElementBlock(\"span\", {\n        key: 0,\n        onClick: _cache[0] || (_cache[0] = ($event: any) => (editing.value = !editing.value)),\n        ref: \"display\",\n        class: \"tti__display\"\n      }, _toDisplayString(pad(psuedoValue.value)), 513))\n    : (_openBlock(), _createElementBlock(\"input\", {\n        key: 1,\n        type: \"number\",\n        min: minValue.value,\n        max: maxValue.value,\n        step: stepValue.value,\n        value: psuedoValue.value,\n        onChange: setValue,\n        onBlur: blurred,\n        ref_key: \"input\",\n        ref: input,\n        class: \"tti__input\"\n      }, null, 40, _hoisted_1))\n}\n}\n\n})","<!-- Input/Display with up down arrow above and below -->\n<template>\n    <span \n      v-if=\"!editing || !props.editable\"\n      @click=\"editing = !editing\"\n      ref=\"display\"\n      class=\"tti__display\"\n      >{{ pad(psuedoValue) }}\n    </span>\n    <input \n      v-else\n      type=\"number\" \n      :min=\"minValue\"\n      :max=\"maxValue\"\n      :step=\"stepValue\"\n      :value=\"psuedoValue\" \n      @change=\"setValue\"\n      @blur=\"blurred\"\n      ref=\"input\"\n      class=\"tti__input\"\n      />\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, withDefaults, watch, computed } from 'vue';\n\nconst value = defineModel({ default: 0 });\nconst psuedoValue = ref(value.value);\n\nconst editing = ref(false);\nconst input = ref();\n\nexport interface Props {\n  editable?: boolean;\n  min?: string | number\n  max?: string | number ;\n  step?: number;\n  clamp?: boolean;\n  zeroPad?: number;\n  pad2?: boolean;\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  editable: true,\n  min: 0,\n  max: 9999,\n  step: 1,\n  clamp: false,\n  zeroPad: 0,\n  pad2: false,\n});\n\nfunction pad(value: number) {\n  if (props.zeroPad > 0) {\n    return value.toString().padStart(props.zeroPad, '0');\n  }\n  if (props.pad2) {\n    return value.toString().padStart(2, '0');\n  }\n  return value;\n}\n\nconst parseValue = (value: string | number | CallableFunction) => {\n  if (typeof value === 'number') {\n    return value;\n  } \n  if (typeof value === 'function') {\n    return value();\n  }\n  return value.includes('.') ? parseFloat(value) : parseInt(value);\n};\n\nconst minValue = ref(parseValue(props.min));\nconst maxValue = ref(parseValue(props.max));\nconst stepValue = ref(parseValue(props.step));\n\nfunction setValue(event: Event) {\n  if (event.target) {\n    psuedoValue.value = parseInt((event.target as HTMLInputElement).value);\n  }\n}\n\nfunction blurred() {\n  editing.value = false;\n}\n\nfunction round(value, toNearest) {\n  return Math.round(value / toNearest) * toNearest;\n}\n\nconst isValid = computed(() => {\n  if (psuedoValue.value < minValue.value) {\n    return false;\n  }\n  if (psuedoValue.value > maxValue.value) {\n    return false;\n  }\n  return true;\n});\n\nfunction clampValue(value: number) {\n  if (!props.clamp) {\n    return value;\n  }\n  if (value < minValue.value) {\n    value = minValue.value;\n  } else if (value > maxValue.value) {\n    value = maxValue.value;\n  }\n  if ((value % stepValue.value) !== 0) {\n    value = round(value, stepValue.value);\n  }\n  return value;\n}\n\n// watch props\nwatch(() => props.min, (newVal) => {\n  minValue.value = parseValue(newVal);\n  psuedoValue.value = clampValue(psuedoValue.value);\n});\n\nwatch(() => props.max, (newVal) => {\n  maxValue.value = parseValue(newVal);\n  psuedoValue.value = clampValue(psuedoValue.value);\n});\n\nwatch(() => props.step, (newVal) => {\n  stepValue.value = parseValue(newVal);\n});\n\nwatch(value, (newVal) => {\n  psuedoValue.value = clampValue(newVal);\n});\n\n\nwatch(input, (value) => {\n  if (value) {\n    value.focus();\n  }    \n});\n\nwatch(psuedoValue, (newValue, oldValue) => {\n  if (isValid.value) {\n    value.value = psuedoValue.value;\n    return;\n  }\n  if (props.clamp) {\n    psuedoValue.value = clampValue(newValue);\n    value.value = psuedoValue.value;\n    return;\n  }\n  psuedoValue.value = oldValue;\n  \n});\n\n</script>\n\n<style>\n/* Chrome, Safari, Edge, Opera */\ninput.tti__input::-webkit-outer-spin-button,\ninput.tti__input::-webkit-inner-spin-button\n{\n  -webkit-appearance: none;\n  margin: 0;\n}\n\n/* Firefox */\ninput.tti__input[type='number']\n{\n  -moz-appearance: textfield;\n  -webkit-appearance: textfield;\n  appearance: textfield;\n}\n\ninput.tti__input[type='number']\n{\n  text-align: center;\n}\n\ninput.tti__input[type='number']:invalid\n{\n  background-color: #fd6969;\n}\n\n</style>\n","import script from \"./TapToInput.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./TapToInput.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./TapToInput.vue?vue&type=style&index=0&id=a86e530e&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { useModel as _useModel, mergeModels as _mergeModels, defineComponent as _defineComponent } from 'vue'\nimport { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, renderSlot as _renderSlot, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString } from \"vue\"\n\nconst _hoisted_1 = { class: \"dtp__container\" }\nconst _hoisted_2 = { class: \"dtp__row\" }\nconst _hoisted_3 = { class: \"dtp__grid-container\" }\nconst _hoisted_4 = { class: \"dtp__middle-slot\" }\nconst _hoisted_5 = {\n  key: 0,\n  class: \"dtp__ampm\"\n}\nconst _hoisted_6 = { class: \"dtp__bottom-content\" }\nconst _hoisted_7 = {\n  key: 0,\n  class: \"dtp__debug\"\n}\n\nimport { ref, watch, computed } from 'vue';\nimport TapToInput from './TapToInput.vue';\n\n\nexport interface Props {\n  debug?: boolean;\n  useAmpm?: boolean;\n  editableTime?: boolean;\n}\n\ntype Unit = 'year' | 'month' | 'day' | 'hour' | 'minute' | 'second';\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'DateTimePicker',\n  props: /*@__PURE__*/_mergeModels({\n    debug: { type: Boolean, default: false },\n    useAmpm: { type: Boolean, default: true },\n    editableTime: { type: Boolean, default: true }\n  }, {\n    \"modelValue\": {default: new Date('2027-01-01 12:00:00 UTC')},\n    \"modelModifiers\": {},\n  }),\n  emits: [\"update:modelValue\"],\n  setup(__props: any) {\n\nconst props = __props;\n\n\nconst date = _useModel(__props, \"modelValue\");\n\nconst year = ref(date.value.getFullYear());\nconst month = ref(date.value.getMonth()+1);\nconst day = ref(date.value.getDate());\nconst hour = ref(date.value.getHours());\nconst minute = ref(date.value.getMinutes());\nconst second = ref(date.value.getSeconds());\n\n// const ampm = ref(hour.value >= 12);\n\n\nconst isAm = computed({\n  get: () => hour.value < 12,\n  set: (value) => {\n    if (value) {\n      for (let i = 0; i < 12; i++) {\n        decrement('hour');\n      }\n    } else {\n      for (let i = 0; i < 12; i++) {\n        increment('hour');\n      }\n    }\n  }\n});\n\n// watch(ampm, (value) => { isAm.value = value;});\n\nconst values = {\n  year: year,\n  month: month,\n  day: day,\n  hour: hour,\n  minute: minute,\n  second: second,\n};\n\nconst limits = computed(() => ({\n  year: { min: 1, max: Infinity },\n  month: { min: 1, max: 12 },\n  day: { min: 1, max: _daysInMonth(month.value, year.value) },\n  hour: { min: 0, max: 23 },\n  minute: { min: 0, max: 59 },\n  second: { min: 0, max: 59 },\n}));\n\nconst units: Unit[] = ['second', 'minute', 'hour', 'day', 'month', 'year'];\n\nfunction changeValue(unit: Unit, increment: boolean) {\n  const limit = limits.value[unit].max;\n  const min = limits.value[unit].min;\n\n  if (increment) {\n    if (values[unit].value < limit) {\n      values[unit].value++;\n    } else {\n      values[unit].value = min;\n      const nextUnit = units[units.indexOf(unit) + 1];\n      if (nextUnit) {\n        changeValue(nextUnit, increment);\n      } else if (unit === 'hour' && props.useAmpm) {\n        // Toggle AM/PM when hour goes from 11 to 12\n        isAm.value = !isAm.value;\n      }\n    }\n  } else {\n    if (values[unit].value > min) {\n      values[unit].value--;\n    } else {\n      values[unit].value = limit;\n      const prevUnit = units[units.indexOf(unit) + 1];\n      if (prevUnit) {\n        changeValue(prevUnit, increment);\n      } else if (unit === 'hour' && props.useAmpm) {\n        // Toggle AM/PM when hour goes from 12 to 11\n        isAm.value = !isAm.value;\n      }\n    }\n  }\n\n  // Ensure hour is always between 0 and 23\n  if (unit === 'hour') {\n    hour.value = hour.value % 24;\n  }\n}\n\nconst displayHour = computed({\n  get() {\n    if (props.useAmpm) {\n      const h = hour.value % 12;\n      return h === 0 ? 12 : h;\n    } else {\n      return hour.value;\n    }\n  },\n  set(value: number) {\n    if (props.useAmpm) {\n      if (value === 12) {\n        hour.value = isAm.value ? 0 : 12;\n      } else {\n        hour.value = isAm.value ? value : value + 12;\n      }\n    } else {\n      hour.value = value;\n    }\n  }\n});\n\nfunction increment(value: Unit) {\n  changeValue(value, true);\n}\n\nfunction decrement(value: Unit) {\n  changeValue(value, false);\n}\n\nfunction _daysInMonth(month: number, year: number) {\n  return new Date(year, month, 0).getDate();\n}\n\n\nfunction utcDate(date: Date) {\n  // utc date string\n  return date.toISOString(); \n}\n\nfunction pad2(n: number) {\n  return n.toString().padStart(2, '0');\n}\n\n// update the date v-model\nwatch([year, month, day, hour, minute, second], () => {\n  date.value = new Date(year.value, month.value-1, day.value, hour.value, minute.value, second.value);\n});\n\n// watcher to fix leap years\nwatch([year, month, day, hour, minute, second], () => {\n  if (month.value === 2 && day.value > _daysInMonth(month.value, year.value)) {\n    day.value = _daysInMonth(month.value, year.value);\n  }\n});\n// after we have mounted make the up and down buttons the same width\n// keep this up to date with the model value\nwatch(date, () => {\n  year.value = date.value.getFullYear();\n  month.value = date.value.getMonth()+1;\n  day.value = date.value.getDate();\n  hour.value = date.value.getHours();\n  minute.value = date.value.getMinutes();\n  second.value = date.value.getSeconds();\n});\n\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_v_icon = _resolveComponent(\"v-icon\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"div\", _hoisted_3, [\n        _createElementVNode(\"button\", {\n          id: \"dtp__year-up\",\n          class: \"dtp__grid-item\",\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (increment('year')))\n        }, [\n          _cache[21] || (_cache[21] = _createElementVNode(\"span\", { class: \"dtp__button-label\" }, \"yr\", -1)),\n          _createVNode(_component_v_icon, null, {\n            default: _withCtx(() => _cache[20] || (_cache[20] = [\n              _createTextVNode(\"mdi-menu-up\")\n            ])),\n            _: 1\n          })\n        ]),\n        _createVNode(TapToInput, {\n          editable: props.editableTime,\n          id: \"dtp__year\",\n          class: \"dtp__grid-item dtp__time_part\",\n          min: limits.value.year.min,\n          max: limits.value.year.max,\n          modelValue: year.value,\n          \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((year).value = $event))\n        }, null, 8, [\"editable\", \"min\", \"max\", \"modelValue\"]),\n        _createElementVNode(\"button\", {\n          id: \"dtp__year-up\",\n          class: \"dtp__grid-item\",\n          onClick: _cache[2] || (_cache[2] = ($event: any) => (decrement('year')))\n        }, [\n          _createVNode(_component_v_icon, null, {\n            default: _withCtx(() => _cache[22] || (_cache[22] = [\n              _createTextVNode(\"mdi-menu-down\")\n            ])),\n            _: 1\n          })\n        ]),\n        _cache[40] || (_cache[40] = _createElementVNode(\"span\", null, null, -1)),\n        _cache[41] || (_cache[41] = _createElementVNode(\"span\", null, \"-\", -1)),\n        _cache[42] || (_cache[42] = _createElementVNode(\"span\", null, null, -1)),\n        _createElementVNode(\"button\", {\n          id: \"dtp__month-up\",\n          class: \"dtp__grid-item\",\n          onClick: _cache[3] || (_cache[3] = ($event: any) => (increment('month')))\n        }, [\n          _cache[24] || (_cache[24] = _createElementVNode(\"span\", { class: \"dtp__button-label\" }, \"mo\", -1)),\n          _createVNode(_component_v_icon, null, {\n            default: _withCtx(() => _cache[23] || (_cache[23] = [\n              _createTextVNode(\"mdi-menu-up\")\n            ])),\n            _: 1\n          })\n        ]),\n        _createVNode(TapToInput, {\n          editable: props.editableTime,\n          id: \"dtp__month\",\n          class: \"dtp__grid-item dtp__time_part\",\n          min: limits.value.month.min,\n          max: limits.value.month.max,\n          pad2: \"\",\n          modelValue: month.value,\n          \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((month).value = $event))\n        }, null, 8, [\"editable\", \"min\", \"max\", \"modelValue\"]),\n        _createElementVNode(\"button\", {\n          id: \"dtp__month-up\",\n          class: \"dtp__grid-item\",\n          onClick: _cache[5] || (_cache[5] = ($event: any) => (decrement('month')))\n        }, [\n          _createVNode(_component_v_icon, null, {\n            default: _withCtx(() => _cache[25] || (_cache[25] = [\n              _createTextVNode(\"mdi-menu-down\")\n            ])),\n            _: 1\n          })\n        ]),\n        _cache[43] || (_cache[43] = _createElementVNode(\"span\", null, null, -1)),\n        _cache[44] || (_cache[44] = _createElementVNode(\"span\", null, \"-\", -1)),\n        _renderSlot(_ctx.$slots, \"bottom-middle\", {}, () => [\n          _cache[26] || (_cache[26] = _createElementVNode(\"span\", null, null, -1))\n        ]),\n        _createElementVNode(\"button\", {\n          id: \"dtp__day-up\",\n          class: \"dtp__grid-item\",\n          onClick: _cache[6] || (_cache[6] = ($event: any) => (increment('day')))\n        }, [\n          _cache[28] || (_cache[28] = _createElementVNode(\"span\", { class: \"dtp__button-label\" }, \"day\", -1)),\n          _createVNode(_component_v_icon, null, {\n            default: _withCtx(() => _cache[27] || (_cache[27] = [\n              _createTextVNode(\"mdi-menu-up\")\n            ])),\n            _: 1\n          })\n        ]),\n        _createVNode(TapToInput, {\n          editable: props.editableTime,\n          id: \"dtp__day\",\n          class: \"dtp__grid-item dtp__time_part\",\n          min: limits.value.day.min,\n          max: limits.value.day.max,\n          pad2: \"\",\n          modelValue: day.value,\n          \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event: any) => ((day).value = $event))\n        }, null, 8, [\"editable\", \"min\", \"max\", \"modelValue\"]),\n        _createElementVNode(\"button\", {\n          id: \"dtp__day-up\",\n          class: \"dtp__grid-item\",\n          onClick: _cache[8] || (_cache[8] = ($event: any) => (decrement('day')))\n        }, [\n          _createVNode(_component_v_icon, null, {\n            default: _withCtx(() => _cache[29] || (_cache[29] = [\n              _createTextVNode(\"mdi-menu-down\")\n            ])),\n            _: 1\n          })\n        ]),\n        _renderSlot(_ctx.$slots, \"top-middle\", {}, () => [\n          _cache[30] || (_cache[30] = _createElementVNode(\"span\", null, null, -1))\n        ]),\n        _createElementVNode(\"span\", _hoisted_4, [\n          _renderSlot(_ctx.$slots, \"center-middle\")\n        ]),\n        _cache[45] || (_cache[45] = _createElementVNode(\"span\", null, null, -1)),\n        _createElementVNode(\"button\", {\n          id: \"dtp__hour-up\",\n          class: \"dtp__grid-item\",\n          onClick: _cache[9] || (_cache[9] = ($event: any) => (increment('hour')))\n        }, [\n          _cache[32] || (_cache[32] = _createElementVNode(\"span\", { class: \"dtp__button-label\" }, \"hr\", -1)),\n          _createVNode(_component_v_icon, null, {\n            default: _withCtx(() => _cache[31] || (_cache[31] = [\n              _createTextVNode(\"mdi-menu-up\")\n            ])),\n            _: 1\n          })\n        ]),\n        _createVNode(TapToInput, {\n          editable: props.editableTime,\n          id: \"dtp__hour\",\n          class: \"dtp__grid-item dtp__time_part\",\n          min: limits.value.hour.min,\n          max: limits.value.hour.max,\n          pad2: \"\",\n          modelValue: displayHour.value,\n          \"onUpdate:modelValue\": _cache[10] || (_cache[10] = ($event: any) => ((displayHour).value = $event))\n        }, null, 8, [\"editable\", \"min\", \"max\", \"modelValue\"]),\n        _createElementVNode(\"button\", {\n          id: \"dtp__hour-up\",\n          class: \"dtp__grid-item\",\n          onClick: _cache[11] || (_cache[11] = ($event: any) => (decrement('hour')))\n        }, [\n          _createVNode(_component_v_icon, null, {\n            default: _withCtx(() => _cache[33] || (_cache[33] = [\n              _createTextVNode(\"mdi-menu-down\")\n            ])),\n            _: 1\n          })\n        ]),\n        _cache[46] || (_cache[46] = _createElementVNode(\"span\", null, null, -1)),\n        _cache[47] || (_cache[47] = _createElementVNode(\"span\", null, \":\", -1)),\n        _cache[48] || (_cache[48] = _createElementVNode(\"span\", null, null, -1)),\n        _createElementVNode(\"button\", {\n          id: \"dtp__minute-up\",\n          class: \"dtp__grid-item\",\n          onClick: _cache[12] || (_cache[12] = ($event: any) => (increment('minute')))\n        }, [\n          _cache[35] || (_cache[35] = _createElementVNode(\"span\", { class: \"dtp__button-label\" }, \"min\", -1)),\n          _createVNode(_component_v_icon, null, {\n            default: _withCtx(() => _cache[34] || (_cache[34] = [\n              _createTextVNode(\"mdi-menu-up\")\n            ])),\n            _: 1\n          })\n        ]),\n        _createVNode(TapToInput, {\n          editable: props.editableTime,\n          id: \"dtp__minute\",\n          class: \"dtp__grid-item dtp__time_part\",\n          min: limits.value.minute.min,\n          max: limits.value.minute.max,\n          pad2: \"\",\n          modelValue: minute.value,\n          \"onUpdate:modelValue\": _cache[13] || (_cache[13] = ($event: any) => ((minute).value = $event))\n        }, null, 8, [\"editable\", \"min\", \"max\", \"modelValue\"]),\n        _createElementVNode(\"button\", {\n          id: \"dtp__minute-up\",\n          class: \"dtp__grid-item\",\n          onClick: _cache[14] || (_cache[14] = ($event: any) => (decrement('minute')))\n        }, [\n          _createVNode(_component_v_icon, null, {\n            default: _withCtx(() => _cache[36] || (_cache[36] = [\n              _createTextVNode(\"mdi-menu-down\")\n            ])),\n            _: 1\n          })\n        ]),\n        _cache[49] || (_cache[49] = _createElementVNode(\"span\", null, null, -1)),\n        _cache[50] || (_cache[50] = _createElementVNode(\"span\", null, \":\", -1)),\n        _cache[51] || (_cache[51] = _createElementVNode(\"span\", null, null, -1)),\n        _createElementVNode(\"button\", {\n          id: \"dtp__second-up\",\n          class: \"dtp__grid-item\",\n          onClick: _cache[15] || (_cache[15] = ($event: any) => (increment('second')))\n        }, [\n          _cache[38] || (_cache[38] = _createElementVNode(\"span\", { class: \"dtp__button-label\" }, \"sec\", -1)),\n          _createVNode(_component_v_icon, null, {\n            default: _withCtx(() => _cache[37] || (_cache[37] = [\n              _createTextVNode(\"mdi-menu-up\")\n            ])),\n            _: 1\n          })\n        ]),\n        _createVNode(TapToInput, {\n          editable: props.editableTime,\n          id: \"dtp__second\",\n          class: \"dtp__grid-item dtp__time_part\",\n          min: limits.value.second.min,\n          max: limits.value.second.max,\n          pad2: \"\",\n          modelValue: second.value,\n          \"onUpdate:modelValue\": _cache[16] || (_cache[16] = ($event: any) => ((second).value = $event))\n        }, null, 8, [\"editable\", \"min\", \"max\", \"modelValue\"]),\n        _createElementVNode(\"button\", {\n          id: \"dtp__second-up\",\n          class: \"dtp__grid-item\",\n          onClick: _cache[17] || (_cache[17] = ($event: any) => (decrement('second')))\n        }, [\n          _createVNode(_component_v_icon, null, {\n            default: _withCtx(() => _cache[39] || (_cache[39] = [\n              _createTextVNode(\"mdi-menu-down\")\n            ])),\n            _: 1\n          })\n        ])\n      ]),\n      (props.useAmpm)\n        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [\n            _createElementVNode(\"button\", {\n              name: \"set-am\",\n              class: _normalizeClass([\"dtp__ampm-button\", \"dtp__ampm-am\", { \"dtp__ampm-active\": isAm.value }]),\n              onClick: _cache[18] || (_cache[18] = ($event: any) => (isAm.value = true)),\n              \"aria-label\": \"Set AM\"\n            }, \"AM\", 2),\n            _createElementVNode(\"button\", {\n              name: \"set-pm\",\n              class: _normalizeClass([\"dtp__ampm-button\", \"dtp__ampm-pm\", { \"dtp__ampm-active\": !isAm.value }]),\n              onClick: _cache[19] || (_cache[19] = ($event: any) => (isAm.value = false)),\n              \"aria-label\": \"Set PM\"\n            }, \"PM\", 2)\n          ]))\n        : _createCommentVNode(\"\", true)\n    ]),\n    _createElementVNode(\"div\", _hoisted_6, [\n      _renderSlot(_ctx.$slots, \"default\")\n    ]),\n    (props.debug)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [\n          _createElementVNode(\"span\", null, \"Local: \" + _toDisplayString(year.value) + \"-\" + _toDisplayString(pad2(month.value)) + \"-\" + _toDisplayString(pad2(day.value)) + \" \" + _toDisplayString(pad2(hour.value)) + \":\" + _toDisplayString(pad2(minute.value)) + \":\" + _toDisplayString(pad2(second.value)), 1),\n          _createElementVNode(\"span\", null, \"UTC: \" + _toDisplayString(utcDate(date.value)), 1)\n        ]))\n      : _createCommentVNode(\"\", true)\n  ]))\n}\n}\n\n})","<!-- Design Inspired by Date/Time Picker at Stellarium Web https://stellarium-web.org/ -->\n<template>\n  <div class=\"dtp__container\">\n    <div class=\"dtp__row\">\n      <div class=\"dtp__grid-container\">\n\n        <!-- 1-1 -->\n        <button id=\"dtp__year-up\" class=\"dtp__grid-item\" @click=\"increment('year')\">\n          <span class=\"dtp__button-label\">yr</span>\n          <v-icon>mdi-menu-up</v-icon>\n        </button>\n        <!-- 2-1 -->\n        <tap-to-input :editable=\"props.editableTime\" id=\"dtp__year\" class=\"dtp__grid-item dtp__time_part\" :min=\"limits.year.min\" :max=\"limits.year.max\" v-model=\"year\" />\n        <!-- 3-1 -->\n        <button id=\"dtp__year-up\" class=\"dtp__grid-item\" @click=\"decrement('year')\">\n          <v-icon>mdi-menu-down</v-icon>\n        </button>\n\n        <!-- 1-2 -->\n        <span></span>\n        <!-- 2-2 -->\n        <span>-</span>\n        <!-- 3-2 -->\n        <span></span>\n\n        <!-- 1-3 -->\n        <button id=\"dtp__month-up\" class=\"dtp__grid-item\" @click=\"increment('month')\">\n          <span class=\"dtp__button-label\">mo</span>\n          <v-icon>mdi-menu-up</v-icon>\n        </button>\n        <!-- 2-3 -->\n        <tap-to-input :editable=\"props.editableTime\" id=\"dtp__month\" class=\"dtp__grid-item dtp__time_part\" :min=\"limits.month.min\" :max=\"limits.month.max\" pad2 v-model=\"month\" />\n        <!-- 3-3 -->\n        <button id=\"dtp__month-up\" class=\"dtp__grid-item\" @click=\"decrement('month')\">\n          <v-icon>mdi-menu-down</v-icon>\n        </button>\n\n        <!-- 1-4 -->\n        <span></span>\n        <!-- 2-4 -->\n        <span>-</span>\n        <!-- 3-4 -->\n        <slot name=\"bottom-middle\"><span></span></slot>\n\n        <!-- 1-5 -->\n        <button id=\"dtp__day-up\" class=\"dtp__grid-item\" @click=\"increment('day')\">\n          <span class=\"dtp__button-label\">day</span>\n          <v-icon>mdi-menu-up</v-icon>\n        </button>\n        <!-- 2-5 -->\n        <tap-to-input :editable=\"props.editableTime\" id=\"dtp__day\" class=\"dtp__grid-item dtp__time_part\" :min=\"limits.day.min\" :max=\"limits.day.max\" pad2 v-model=\"day\" />\n        <!-- 3-5 -->\n        <button id=\"dtp__day-up\" class=\"dtp__grid-item\" @click=\"decrement('day')\">\n          <v-icon>mdi-menu-down</v-icon>\n        </button>\n\n        <!-- 1-6 -->\n        <slot name=\"top-middle\"><span></span></slot>\n        <!-- 2-6 -->\n        <span class=\"dtp__middle-slot\"><slot name=\"center-middle\"></slot></span>\n        <!-- 3-6 -->\n        <span></span>\n\n        <!-- 1-7 -->\n        <button id=\"dtp__hour-up\" class=\"dtp__grid-item\" @click=\"increment('hour')\">\n          <span class=\"dtp__button-label\">hr</span>\n          <v-icon>mdi-menu-up</v-icon>\n        </button>\n        <!-- 2-7 -->\n        <tap-to-input :editable=\"props.editableTime\" id=\"dtp__hour\" class=\"dtp__grid-item dtp__time_part\" :min=\"limits.hour.min\" :max=\"limits.hour.max\" pad2 v-model=\"displayHour\" />\n        <!-- 3-7 -->\n        <button id=\"dtp__hour-up\" class=\"dtp__grid-item\" @click=\"decrement('hour')\">\n          <v-icon>mdi-menu-down</v-icon>\n        </button>\n\n        <!-- 1-8 -->\n        <span></span>\n        <!-- 2-8 -->\n        <span>:</span>\n        <!-- 3-8 -->\n        <span></span>\n\n        <!-- 1-9 -->\n        <button id=\"dtp__minute-up\" class=\"dtp__grid-item\" @click=\"increment('minute')\">\n          <span class=\"dtp__button-label\">min</span>\n          <v-icon>mdi-menu-up</v-icon>\n        </button>\n        <!-- 2-9 -->\n        <tap-to-input :editable=\"props.editableTime\" id=\"dtp__minute\" class=\"dtp__grid-item dtp__time_part\" :min=\"limits.minute.min\" :max=\"limits.minute.max\" pad2 v-model=\"minute\" />\n        <!-- 3-9 -->\n        <button id=\"dtp__minute-up\" class=\"dtp__grid-item\" @click=\"decrement('minute')\">\n          <v-icon>mdi-menu-down</v-icon>\n        </button>\n\n        <!-- 1-10 -->\n        <span></span>\n        <!-- 2-10 -->\n        <span>:</span>\n        <!-- 3-10 -->\n        <span></span>\n\n        <!-- 1-11 -->\n        <button id=\"dtp__second-up\" class=\"dtp__grid-item\" @click=\"increment('second')\">\n          <span class=\"dtp__button-label\">sec</span>\n          <v-icon>mdi-menu-up</v-icon>\n        </button>\n        <!-- 2-11 -->\n        <tap-to-input :editable=\"props.editableTime\" id=\"dtp__second\" class=\"dtp__grid-item dtp__time_part\" :min=\"limits.second.min\" :max=\"limits.second.max\" pad2 v-model=\"second\" />\n        <!-- 3-11 -->\n        <button id=\"dtp__second-up\" class=\"dtp__grid-item\" @click=\"decrement('second')\">\n          <v-icon>mdi-menu-down</v-icon>\n        </button>\n\n        <!-- <div class=\"dtp__rollers up-rollers\"> -->\n        <!-- </div> -->\n\n        <!-- <span class=\"dtp__time-string\"> -->\n        <!-- <span id=\"dtp__year\" class=\"dtp__grid-item dtp__time_part\">{{ year }}</span> -->\n\n        <!-- <span id=\"dtp__month\" class=\"dtp__grid-item dtp__time_part\">{{ pad2(month) }}</span> -->\n        <!-- <span id=\"dtp__day\" class=\"dtp__grid-item dtp__time_part\">{{ pad2(day) }}</span>  -->\n        <!-- <span id=\"dtp__hour\" class=\"dtp__grid-item dtp__time_part\">{{ pad2(displayHour) }}</span> -->\n        <!-- <span id=\"dtp__minute\" class=\"dtp__grid-item dtp__time_part\">{{ pad2(minute) }}</span> -->\n        <!-- <span id=\"dtp__second\" class=\"dtp__grid-item dtp__time_part\">{{ pad2(second) }}</span> -->\n        <!-- </span> -->\n\n      </div>\n      \n      <div class=\"dtp__ampm\" v-if=\"props.useAmpm\">\n        <button \n          name=\"set-am\" \n          :class='[\"dtp__ampm-button\", \"dtp__ampm-am\", { \"dtp__ampm-active\": isAm }]' \n          @click=\"isAm = true\" \n          aria-label=\"Set AM\"\n          >AM</button>\n        <button \n          name=\"set-pm\" \n          :class='[\"dtp__ampm-button\", \"dtp__ampm-pm\", { \"dtp__ampm-active\": !isAm }]' \n          @click=\"isAm = false\" \n          aria-label=\"Set PM\"\n          >PM</button>\n      </div>\n    </div>\n    \n    <div class=\"dtp__bottom-content\">\n      <slot></slot>\n    </div>\n    <div v-if=\"props.debug\" class=\"dtp__debug\">\n      <span>Local: {{ year }}-{{ pad2(month) }}-{{ pad2(day) }} {{ pad2(hour) }}:{{ pad2(minute) }}:{{ pad2(second) }}</span>\n      <span>UTC: {{ utcDate(date) }} </span>\n    </div>\n\n  </div>\n\n</template>\n\n\n<script setup lang=\"ts\">\nimport { ref, watch, computed } from 'vue';\nimport TapToInput from './TapToInput.vue';\n\n\nexport interface Props {\n  debug?: boolean;\n  useAmpm?: boolean;\n  editableTime?: boolean;\n}\n\nconst props = withDefaults(defineProps<Props>(), {\n  debug: false,\n  useAmpm: true,\n  editableTime: true,\n});\n\n\nconst date = defineModel({default: new Date('2027-01-01 12:00:00 UTC')});\n\nconst year = ref(date.value.getFullYear());\nconst month = ref(date.value.getMonth()+1);\nconst day = ref(date.value.getDate());\nconst hour = ref(date.value.getHours());\nconst minute = ref(date.value.getMinutes());\nconst second = ref(date.value.getSeconds());\n\n// const ampm = ref(hour.value >= 12);\n\n\nconst isAm = computed({\n  get: () => hour.value < 12,\n  set: (value) => {\n    if (value) {\n      for (let i = 0; i < 12; i++) {\n        decrement('hour');\n      }\n    } else {\n      for (let i = 0; i < 12; i++) {\n        increment('hour');\n      }\n    }\n  }\n});\n\n// watch(ampm, (value) => { isAm.value = value;});\n\nconst values = {\n  year: year,\n  month: month,\n  day: day,\n  hour: hour,\n  minute: minute,\n  second: second,\n};\n\ntype Unit = 'year' | 'month' | 'day' | 'hour' | 'minute' | 'second';\n\nconst limits = computed(() => ({\n  year: { min: 1, max: Infinity },\n  month: { min: 1, max: 12 },\n  day: { min: 1, max: _daysInMonth(month.value, year.value) },\n  hour: { min: 0, max: 23 },\n  minute: { min: 0, max: 59 },\n  second: { min: 0, max: 59 },\n}));\n\nconst units: Unit[] = ['second', 'minute', 'hour', 'day', 'month', 'year'];\n\nfunction changeValue(unit: Unit, increment: boolean) {\n  const limit = limits.value[unit].max;\n  const min = limits.value[unit].min;\n\n  if (increment) {\n    if (values[unit].value < limit) {\n      values[unit].value++;\n    } else {\n      values[unit].value = min;\n      const nextUnit = units[units.indexOf(unit) + 1];\n      if (nextUnit) {\n        changeValue(nextUnit, increment);\n      } else if (unit === 'hour' && props.useAmpm) {\n        // Toggle AM/PM when hour goes from 11 to 12\n        isAm.value = !isAm.value;\n      }\n    }\n  } else {\n    if (values[unit].value > min) {\n      values[unit].value--;\n    } else {\n      values[unit].value = limit;\n      const prevUnit = units[units.indexOf(unit) + 1];\n      if (prevUnit) {\n        changeValue(prevUnit, increment);\n      } else if (unit === 'hour' && props.useAmpm) {\n        // Toggle AM/PM when hour goes from 12 to 11\n        isAm.value = !isAm.value;\n      }\n    }\n  }\n\n  // Ensure hour is always between 0 and 23\n  if (unit === 'hour') {\n    hour.value = hour.value % 24;\n  }\n}\n\nconst displayHour = computed({\n  get() {\n    if (props.useAmpm) {\n      const h = hour.value % 12;\n      return h === 0 ? 12 : h;\n    } else {\n      return hour.value;\n    }\n  },\n  set(value: number) {\n    if (props.useAmpm) {\n      if (value === 12) {\n        hour.value = isAm.value ? 0 : 12;\n      } else {\n        hour.value = isAm.value ? value : value + 12;\n      }\n    } else {\n      hour.value = value;\n    }\n  }\n});\n\nfunction increment(value: Unit) {\n  changeValue(value, true);\n}\n\nfunction decrement(value: Unit) {\n  changeValue(value, false);\n}\n\nfunction _daysInMonth(month: number, year: number) {\n  return new Date(year, month, 0).getDate();\n}\n\n\nfunction utcDate(date: Date) {\n  // utc date string\n  return date.toISOString(); \n}\n\nfunction pad2(n: number) {\n  return n.toString().padStart(2, '0');\n}\n\n// update the date v-model\nwatch([year, month, day, hour, minute, second], () => {\n  date.value = new Date(year.value, month.value-1, day.value, hour.value, minute.value, second.value);\n});\n\n// watcher to fix leap years\nwatch([year, month, day, hour, minute, second], () => {\n  if (month.value === 2 && day.value > _daysInMonth(month.value, year.value)) {\n    day.value = _daysInMonth(month.value, year.value);\n  }\n});\n// after we have mounted make the up and down buttons the same width\n// keep this up to date with the model value\nwatch(date, () => {\n  year.value = date.value.getFullYear();\n  month.value = date.value.getMonth()+1;\n  day.value = date.value.getDate();\n  hour.value = date.value.getHours();\n  minute.value = date.value.getMinutes();\n  second.value = date.value.getSeconds();\n});\n\n</script>\n\n<style lang=\"less\">\n@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Mono:wght@500&display=swap');\n\n.dtp__container {\n  padding-top: 1.5em;\n  padding-bottom: 5px;\n  padding-inline: 15px;\n}\n\n@media (max-width: 350px) {\n  .dtp__container {\n    font-size: 5vw;\n  }\n}\n\n.dtp__grid-container {\n  display: grid;\n  grid-auto-flow: column;\n  grid-template-columns: repeat(11, 0fr);\n  grid-template-rows: auto auto auto;\n  justify-items: center;\n  justify-content: center;\n  font-family: 'Noto Sans Mono', monospace;\n  gap: 2px;\n  margin-bottom: 10px;\n}\n\n.dtp__row {\n  display: grid;\n  grid-template-columns: 0fr 0fr;\n  align-items: center;\n  gap: 1em;\n}\n\n@media (max-width: 350px) {\n  .dtp__row {\n    display: grid;\n    grid-template-columns: 0fr;\n    grid-template-rows: 0fr 0fr;\n    justify-items: center;\n    gap: 2px;\n  }\n}\n\n.dtp__grid-container > * {\n  margin: 0;\n  padding: 0;\n  width: 100%;\n}\n\n.dtp__middle-slot {\n  width: 1.5em;\n}\n\n.dtp__bottom-content {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n\n.dtp__grid-item {\n  position: relative;\n  // outline: 1px solid red;\n  text-align: center;\n}\n\nspan.dtp__button-label {\n  font-size: 0.8em;\n  // display: none;\n  position:absolute;\n  top: -5px;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  // outline: 1px solid red;\n}\n\n.dtp__ampm {\n  display: grid;\n  grid-template-columns: 3em;\n  grid-template-rows: 0fr 0fr;\n  gap: 1px;\n}\n\n.dtp__ampm-button {\n  background-color: #444;\n  color: #ccc;\n  padding: 0;\n  align-self: center;\n  font-size: .9em;\n  width: 4ch;\n}\n\n// for dtp__ampm-am/pm add only left right and top/bottom border raidus\n.dtp__ampm-am {\n  border: 1px solid var(--accent-color);\n  border-top-left-radius: .75ch;\n  border-top-right-radius: .75ch;\n  border-bottom: none\n}\n\n.dtp__ampm-pm {\n  border: 1px solid var(--accent-color);\n  border-bottom-left-radius: .75ch;\n  border-bottom-right-radius: .75ch;\n  border-top: none\n}\n\n@media (max-width: 350px) { \n  .dtp__ampm {\n    grid-template-columns: 0fr 0fr;\n    grid-template-rows: 0fr;\n    margin-bottom: 0.5em;\n  }\n  \n  .dtp__ampm-am {\n    border: 1px solid var(--accent-color);\n    border-radius: 0;\n    border-top-left-radius: .75ch;\n    border-bottom-left-radius: .75ch;\n    border-right: none;\n  }\n  \n  .dtp__ampm-pm {\n    border: 1px solid var(--accent-color);\n    border-radius: 0;\n    border-top-right-radius: .75ch;\n    border-bottom-right-radius: .75ch;\n    border-left: none;\n  }\n  \n}\n\n.dtp__ampm-active {\n  color: var(--accent-color);\n  background-color: #0e0552;\n}\n\n/* Chrome, Safari, Edge, Opera */\n.dtp__container input::-webkit-outer-spin-button,\ninput::-webkit-inner-spin-button {\n  -webkit-appearance: none;\n  margin: 0;\n}\n\n/* Firefox */\n.dtp__container  input[type=number] {\n  -moz-appearance: textfield;\n  appearance: textfield;\n}\n\ninput#dtp__year {\n  width: 4ch;\n}\n\ninput.dtp__time_part {\n  width: 2.5ch;\n}\n\n</style>\n","import script from \"./DateTimePicker.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./DateTimePicker.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./DateTimePicker.vue?vue&type=style&index=0&id=4bf0a910&lang=less\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { resolveComponent as _resolveComponent, createVNode as _createVNode, vShow as _vShow, withKeys as _withKeys, withModifiers as _withModifiers, normalizeClass as _normalizeClass, withCtx as _withCtx, withDirectives as _withDirectives, normalizeStyle as _normalizeStyle, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nimport { computed, ref, watch } from \"vue\";\nimport { MapBoxFeature, MapBoxFeatureCollection, textForMapboxFeature } from \"@cosmicds/vue-toolkit/src/mapbox\";\n\ntype SearchProvider = (searchText: string) => Promise<MapBoxFeatureCollection | null>;\n\nexport interface LocationSearchProps {\n  searchProvider?: SearchProvider;\n  modelValue?: boolean;\n  stayOpen?: boolean;\n  accentColor?: string;\n  small?: boolean;\n  theme?: string;\n  buttonSize?: string;\n  bgColor?: string;\n}\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'LocationSearch',\n  props: {\n    searchProvider: { type: Function, default: (_searchText: string) => null },\n    modelValue: { type: Boolean, default: true },\n    stayOpen: { type: Boolean, default: false },\n    accentColor: { default: \"white\" },\n    small: { type: Boolean, default: false },\n    theme: { default: \"dark\" },\n    buttonSize: { default: \"1x\" },\n    bgColor: { default: \"black\" }\n  },\n  emits: [\"error\", \"set-location\", \"update:modelValue\"],\n  setup(__props: any, { emit: __emit }) {\n\nconst props = __props;\n\nconst emit = __emit;\n\nconst searchOpen = ref(props.modelValue || props.stayOpen);\nconst searchItem = ref<string | null>(null);\nconst searchResults = ref<MapBoxFeatureCollection | null>(null);\nconst searchErrorMessage = ref<string | null>(null);\nconst locationJustUpdated = ref(false);\nconst menuOpen = ref(false);\nconst comboFocused = ref(false);\nconst searchInput = ref<HTMLInputElement | null>(null);\n\nconst cssStyles = computed(() => {\n  return {\n    \"--accent-color\": props.accentColor,\n    \"--bg-color\": props.bgColor,\n    \"--fg-container-padding\": searchOpen.value ? (props.small ? \"0px 5px 0px 0px\" : \"5px 10px 12px 10px\") : \"0px\",\n    \"--border-radius\": searchOpen.value ? \"7px\" : \"20px\",\n  };\n});\n\nfunction itemText(item: string | MapBoxFeature): string {\n  if (typeof item === \"string\") {\n    return item;\n  }\n  return textForMapboxFeature(item);\n}\n\nfunction performForwardGeocodingSearch() {\n  const search = searchItem.value;\n  if (search === null || search.length < 3) {\n    return;\n  }\n\n  props.searchProvider(search).then(info => {\n    if (info !== null && info.features.length === 1) {\n      setLocationFromSearchFeature(info.features[0]);\n    } else if (info !== null && info.features.length === 0) {\n      searchErrorMessage.value = \"No matching places were found\";\n      emit(\"error\", searchErrorMessage.value); \n    } else {\n      searchResults.value = info;\n    }\n  });\n}\n\nfunction focusCombobox() {\n  const input = searchInput.value as HTMLInputElement;\n  input.focus();\n}\n\nfunction blurCombobox() {\n  const input = searchInput.value as HTMLInputElement;\n  input.blur();\n}\n\nfunction toggleSearch() {\n  if (searchOpen.value) {\n    performForwardGeocodingSearch();\n    menuOpen.value = true;\n    focusCombobox();\n  } else {\n    searchOpen.value = true;\n  }\n}\n\n// function closeSearch() {\n//   searchOpen.value = false;\n//   clearSearchData();\n// }\n\nfunction onFocusChange(focused: boolean) {\n  comboFocused.value = focused;\n}\n\nfunction setLocationFromSearchFeature(feature: MapBoxFeature) {\n  blurCombobox();\n  timedJustUpdatedLocation();\n  clearSearchData();\n  emit(\"set-location\", feature);\n}\n\nfunction clearSearchData() {\n  searchResults.value = null;\n  searchItem.value = null;\n  searchErrorMessage.value = null;\n}\n\nfunction timedJustUpdatedLocation() {\n  locationJustUpdated.value = true;\n  setTimeout(() => {\n    locationJustUpdated.value = false;\n  }, 5000);\n}\n\nwatch(() => props.modelValue, (value: boolean) => { searchOpen.value = value; });\n\nwatch(searchOpen, (value: boolean) => emit(\"update:modelValue\", value));\n\nwatch(searchItem, function(item: string | MapBoxFeature | null) {\n  if (searchErrorMessage.value) {\n    searchErrorMessage.value = null;\n  }\n  if (!item || (typeof item === \"string\" && item.length === 0)) {\n    searchResults.value = null;\n  }\n  if (item && typeof item !== \"string\") {\n    setLocationFromSearchFeature(item);\n  }\n});\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_font_awesome_icon = _resolveComponent(\"font-awesome-icon\")!\n  const _component_v_combobox = _resolveComponent(\"v-combobox\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", {\n    class: \"forward-geocoding-container\",\n    style: _normalizeStyle(cssStyles.value)\n  }, [\n    _withDirectives(_createVNode(_component_v_combobox, {\n      class: _normalizeClass(['forward-geocoding-input', locationJustUpdated.value ? 'geocode-success' : '', _ctx.small ? 'forward-geocoding-input-small' : '']),\n      modelValue: searchItem.value,\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((searchItem).value = $event)),\n      items: searchResults.value ? searchResults.value.features : [],\n      \"item-title\": itemText,\n      \"bg-color\": _ctx.bgColor,\n      label: \"Enter city or zip\",\n      density: _ctx.small ? 'compact' : 'default',\n      \"hide-details\": \"\",\n      solo: \"\",\n      color: _ctx.accentColor,\n      onInput: () => {},\n      onKeydown: [\n        _withKeys(performForwardGeocodingSearch, [\"enter\"]),\n        _cache[1] || (_cache[1] = _withKeys(($event: any) => (searchResults.value = null), [\"esc\"])),\n        _cache[2] || (_cache[2] = _withModifiers(() => {}, [\"stop\"]))\n      ],\n      \"error-messages\": searchErrorMessage.value,\n      \"onClick:append\": focusCombobox,\n      \"onUpdate:focused\": _cache[3] || (_cache[3] = ($event: any) => (onFocusChange($event))),\n      ref_key: \"searchInput\",\n      ref: searchInput,\n      menu: menuOpen.value,\n      \"onUpdate:menu\": _cache[4] || (_cache[4] = ($event: any) => (menuOpen.value = $event))\n    }, {\n      append: _withCtx(() => [\n        _createVNode(_component_font_awesome_icon, {\n          class: \"geocoding-search-icon\",\n          icon: \"magnifying-glass\",\n          size: searchOpen.value ? 'xl' : _ctx.buttonSize,\n          color: \"gray\",\n          onClick: toggleSearch\n        }, null, 8, [\"size\"])\n      ]),\n      _: 1\n    }, 8, [\"class\", \"modelValue\", \"items\", \"bg-color\", \"density\", \"color\", \"error-messages\", \"menu\"]), [\n      [_vShow, searchOpen.value]\n    ]),\n    _withDirectives(_createVNode(_component_font_awesome_icon, {\n      class: \"geocoding-search-icon\",\n      icon: \"magnifying-glass\",\n      size: searchOpen.value ? 'xl' : _ctx.buttonSize,\n      color: \"gray\",\n      onClick: _withModifiers(toggleSearch, [\"prevent\"])\n    }, null, 8, [\"size\"]), [\n      [_vShow, !searchOpen.value && !_ctx.stayOpen]\n    ])\n  ], 4))\n}\n}\n\n})","<template>\n  <div\n    class=\"forward-geocoding-container\"\n    :style=\"cssStyles\"\n  >\n    <v-combobox\n      v-show=\"searchOpen\"\n      :class=\"['forward-geocoding-input', locationJustUpdated ? 'geocode-success' : '', small ? 'forward-geocoding-input-small' : '']\"\n      v-model=\"searchItem\"\n      :items=\"searchResults ? searchResults.features : []\"\n      :item-title=\"itemText\"\n      :bg-color=\"bgColor\"\n      label=\"Enter city or zip\"\n      :density=\"small ? 'compact' : 'default'\"\n      hide-details\n      solo\n      :color=\"accentColor\"\n      @input=\"() => {}\"\n      @keydown.enter=\"performForwardGeocodingSearch\"\n      @keydown.esc=\"searchResults = null\"\n      @keydown.stop\n      :error-messages=\"searchErrorMessage\"\n      @click:append=\"focusCombobox\"\n      @update:focused=\"onFocusChange($event)\"\n      ref=\"searchInput\"\n      :menu=\"menuOpen\"\n      @update:menu=\"menuOpen = $event\"\n    >\n    <template v-slot:append>\n      <font-awesome-icon\n        class=\"geocoding-search-icon\"\n        icon=\"magnifying-glass\"\n        :size=\"searchOpen ? 'xl' : buttonSize\"\n        color=\"gray\"\n        @click=\"toggleSearch\"\n      ></font-awesome-icon>\n    </template>\n  </v-combobox>\n  <font-awesome-icon\n      v-show=\"!searchOpen && !stayOpen\"\n      class=\"geocoding-search-icon\"\n      icon=\"magnifying-glass\"\n      :size=\"searchOpen ? 'xl' : buttonSize\"\n      color=\"gray\"\n      @click.prevent=\"toggleSearch\"\n    ></font-awesome-icon>\n  </div>\n</template> \n\n<script setup lang=\"ts\">\nimport { computed, ref, watch } from \"vue\";\nimport { MapBoxFeature, MapBoxFeatureCollection, textForMapboxFeature } from \"@cosmicds/vue-toolkit/src/mapbox\";\n\ntype SearchProvider = (searchText: string) => Promise<MapBoxFeatureCollection | null>;\n\nexport interface LocationSearchProps {\n  searchProvider?: SearchProvider;\n  modelValue?: boolean;\n  stayOpen?: boolean;\n  accentColor?: string;\n  small?: boolean;\n  theme?: string;\n  buttonSize?: string;\n  bgColor?: string;\n}\n\nconst props = withDefaults(defineProps<LocationSearchProps>(), {\n  searchProvider: (_searchText: string) => null,\n  modelValue: true,\n  stayOpen: false,\n  accentColor: \"white\",\n  small: false,\n  theme: \"dark\",\n  buttonSize: \"1x\",\n  bgColor: \"black\",\n});\n\nconst emit = defineEmits<{\n  (e: \"error\", message: string): void\n  (e: \"set-location\", feature: MapBoxFeature): void\n  (e: \"update:modelValue\", value: boolean): void\n}>();\n\nconst searchOpen = ref(props.modelValue || props.stayOpen);\nconst searchItem = ref<string | null>(null);\nconst searchResults = ref<MapBoxFeatureCollection | null>(null);\nconst searchErrorMessage = ref<string | null>(null);\nconst locationJustUpdated = ref(false);\nconst menuOpen = ref(false);\nconst comboFocused = ref(false);\nconst searchInput = ref<HTMLInputElement | null>(null);\n\nconst cssStyles = computed(() => {\n  return {\n    \"--accent-color\": props.accentColor,\n    \"--bg-color\": props.bgColor,\n    \"--fg-container-padding\": searchOpen.value ? (props.small ? \"0px 5px 0px 0px\" : \"5px 10px 12px 10px\") : \"0px\",\n    \"--border-radius\": searchOpen.value ? \"7px\" : \"20px\",\n  };\n});\n\nfunction itemText(item: string | MapBoxFeature): string {\n  if (typeof item === \"string\") {\n    return item;\n  }\n  return textForMapboxFeature(item);\n}\n\nfunction performForwardGeocodingSearch() {\n  const search = searchItem.value;\n  if (search === null || search.length < 3) {\n    return;\n  }\n\n  props.searchProvider(search).then(info => {\n    if (info !== null && info.features.length === 1) {\n      setLocationFromSearchFeature(info.features[0]);\n    } else if (info !== null && info.features.length === 0) {\n      searchErrorMessage.value = \"No matching places were found\";\n      emit(\"error\", searchErrorMessage.value); \n    } else {\n      searchResults.value = info;\n    }\n  });\n}\n\nfunction focusCombobox() {\n  const input = searchInput.value as HTMLInputElement;\n  input.focus();\n}\n\nfunction blurCombobox() {\n  const input = searchInput.value as HTMLInputElement;\n  input.blur();\n}\n\nfunction toggleSearch() {\n  if (searchOpen.value) {\n    performForwardGeocodingSearch();\n    menuOpen.value = true;\n    focusCombobox();\n  } else {\n    searchOpen.value = true;\n  }\n}\n\n// function closeSearch() {\n//   searchOpen.value = false;\n//   clearSearchData();\n// }\n\nfunction onFocusChange(focused: boolean) {\n  comboFocused.value = focused;\n}\n\nfunction setLocationFromSearchFeature(feature: MapBoxFeature) {\n  blurCombobox();\n  timedJustUpdatedLocation();\n  clearSearchData();\n  emit(\"set-location\", feature);\n}\n\nfunction clearSearchData() {\n  searchResults.value = null;\n  searchItem.value = null;\n  searchErrorMessage.value = null;\n}\n\nfunction timedJustUpdatedLocation() {\n  locationJustUpdated.value = true;\n  setTimeout(() => {\n    locationJustUpdated.value = false;\n  }, 5000);\n}\n\nwatch(() => props.modelValue, (value: boolean) => { searchOpen.value = value; });\n\nwatch(searchOpen, (value: boolean) => emit(\"update:modelValue\", value));\n\nwatch(searchItem, function(item: string | MapBoxFeature | null) {\n  if (searchErrorMessage.value) {\n    searchErrorMessage.value = null;\n  }\n  if (!item || (typeof item === \"string\" && item.length === 0)) {\n    searchResults.value = null;\n  }\n  if (item && typeof item !== \"string\") {\n    setLocationFromSearchFeature(item);\n  }\n});\n</script>\n\n<style lang=\"less\">\n\n// https://vue-loader.vuejs.org/guide/scoped-css.html#deep-selectors\n.forward-geocoding-container {\n  --border-radius: 20px;\n  position: relative;\n  color: var(--accent-color);\n  border: 2px solid var(--accent-color);\n  border-radius: var(--border-radius);\n  background-color: var(--bg-color);\n  margin-left: 0.25rem;\n  margin-bottom: 0.25rem;\n  padding: var(--fg-container-padding);\n\n  // there are two separate labels, we want the 2nd one to be large. the first is the small floating label\n  .v-field > .v-field__field > .v-label.v-field-label:nth-child(2) {\n    font-size: 1.2rem;\n  }\n\n  // .v-input--horizontal .v-input__append {\n  //   margin-inline-start: 0;\n  // }\n  \n  .v-text-field {\n    min-width: 150px;\n  }\n  \n  .v-field--variant-filled.v-field--has-background .v-field__overlay {\n    border-top-right-radius: 0px;\n}\n\n  .forward-geocoding-input > .v-input__control > .v-field {\n    border-radius: var(--border-radius);\n  }\n  \n  .forward-geocoding-input.geocode-success label {\n    opacity: 1;\n  }\n  \n  .forward-geocoding-input-small label {\n    // .v-label sets default to 1rem\n    font-size: 0.8rem;\n  }\n\n  .forward-geocoding-input-row {\n    display: flex;\n    flex-direction: row;\n    justify-content: space-around;\n    gap: 10px;\n    align-items: center;\n  }\n  \n  .geocoding-search-icon {\n    padding-inline: calc(0.3 * var(--default-line-height));\n    padding-block: calc(0.4 * var(--default-line-height));\n  }\n\n  .geocoding-search-icon:hover, #geocoding-close-icon:hover {\n    cursor: pointer;\n  }\n\n}\n</style>\n","import script from \"./LocationSearch.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./LocationSearch.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./LocationSearch.vue?vue&type=style&index=0&id=049c9a1e&lang=less\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, mergeProps as _mergeProps, normalizeStyle as _normalizeStyle } from \"vue\"\n\nconst _hoisted_1 = {\n  key: 1,\n  id: \"playback-play-pause-button\"\n}\nconst _hoisted_2 = {\n  key: 0,\n  id: \"playback-reverse-time\"\n}\nconst _hoisted_3 = { id: \"reverse-button-text\" }\nconst _hoisted_4 = { id: \"playback-slider-container\" }\nconst _hoisted_5 = { id: \"tick-container\" }\nconst _hoisted_6 = { class: \"tick-label\" }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_v_icon = _resolveComponent(\"v-icon\")!\n  const _component_icon_button = _resolveComponent(\"icon-button\")!\n  const _component_v_slider = _resolveComponent(\"v-slider\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", {\n    id: \"enclosing-playback-container\",\n    style: _normalizeStyle(_ctx.cssVars)\n  }, [\n    ((_ctx.inline && _ctx.inlineButton) || _ctx.showCloseButton)\n      ? (_openBlock(), _createElementBlock(\"div\", {\n          key: 0,\n          id: \"playback-close-button\",\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.$emit('close')))\n        }, [\n          _createVNode(_component_v_icon, {\n            color: _ctx.color,\n            size: \"18\"\n          }, {\n            default: _withCtx(() => _cache[4] || (_cache[4] = [\n              _createTextVNode(\"mdi-close\")\n            ])),\n            _: 1\n          }, 8, [\"color\"])\n        ]))\n      : _createCommentVNode(\"\", true),\n    (!_ctx.inline || _ctx.inlineButton && !_ctx.hidePlayButton)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n          _createVNode(_component_icon_button, {\n            \"md-icon\": _ctx.isPaused ? 'mdi-play' : 'mdi-pause',\n            onActivate: _cache[1] || (_cache[1] = ($event: any) => (_ctx.isPaused = !_ctx.isPaused)),\n            color: _ctx.color,\n            \"focus-color\": _ctx.color,\n            \"tooltip-text\": \"Play/Pause\",\n            \"tooltip-location\": \"top\",\n            \"tooltip-offset\": \"5px\",\n            \"md-size\": \"18\"\n          }, null, 8, [\"md-icon\", \"color\", \"focus-color\"]),\n          (!_ctx.inline || _ctx.inlineButton)\n            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [\n                _createVNode(_component_icon_button, {\n                  onActivate: _cache[2] || (_cache[2] = ($event: any) => (_ctx.reverseTime = !_ctx.reverseTime)),\n                  \"md-icon\": _ctx.reverseTime ? 'mdi-step-forward-2' : 'mdi-step-backward-2',\n                  color: _ctx.color,\n                  \"focus-color\": _ctx.color,\n                  \"tooltip-text\": \"Forward/Reverse\",\n                  \"tooltip-location\": \"top\",\n                  \"tooltip-offset\": \"5px\",\n                  \"md-size\": \"18\"\n                }, null, 8, [\"md-icon\", \"color\", \"focus-color\"]),\n                _createElementVNode(\"span\", _hoisted_3, _toDisplayString(_ctx.reverseTime ? 'Forward' : 'Reverse'), 1)\n              ]))\n            : _createCommentVNode(\"\", true)\n        ]))\n      : _createCommentVNode(\"\", true),\n    _createElementVNode(\"div\", _hoisted_4, [\n      _createElementVNode(\"div\", _hoisted_5, [\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.index, (val) => {\n          return (_openBlock(), _createElementBlock(\"div\", _mergeProps({\n            key: val,\n            ref_for: true\n          }, _ctx.options(val), { class: \"tick\" }), [\n            _createElementVNode(\"span\", _hoisted_6, _toDisplayString(_ctx.valueToMark(val)), 1)\n          ], 16))\n        }), 128))\n      ]),\n      _createVNode(_component_v_slider, {\n        ref: \"slider\",\n        \"hide-details\": \"\",\n        modelValue: _ctx.value,\n        \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((_ctx.value) = $event)),\n        max: _ctx.max ?? _ctx.index[_ctx.index.length - 1],\n        min: _ctx.min ?? _ctx.index[0],\n        \"thumb-size\": 16,\n        color: \"white\",\n        \"track-color\": \"white\",\n        \"track-fill-color\": \"white\",\n        \"thumb-color\": \"blue\",\n        \"track-size\": \"8\",\n        step: _ctx.step,\n        \"show-ticks\": _ctx.useBuiltInTicks ? 'always' : false,\n        ticks: _ctx.useBuiltInTicks ? _ctx.marks : undefined\n      }, null, 8, [\"modelValue\", \"max\", \"min\", \"step\", \"show-ticks\", \"ticks\"])\n    ])\n  ], 4))\n}","<template>\n  <div id=\"enclosing-playback-container\" :style=\"cssVars\">\n    \n    <!-- add a close box -->\n    <div v-if=\"(inline && inlineButton) || showCloseButton\" id=\"playback-close-button\" @click=\"$emit('close')\">\n        <v-icon :color=\"color\" size=\"18\">mdi-close</v-icon>\n    </div>\n    \n    <div v-if=\"!inline || inlineButton && !hidePlayButton\" id=\"playback-play-pause-button\">\n      <icon-button\n        :md-icon=\"isPaused ? 'mdi-play' : 'mdi-pause'\"\n        @activate=\"isPaused = !isPaused\"\n        :color=\"color\"\n        :focus-color=\"color\"\n        tooltip-text=\"Play/Pause\"\n        tooltip-location=\"top\"\n        tooltip-offset=\"5px\"\n        md-size=\"18\"\n      ></icon-button>\n\n      <div v-if=\"!inline || inlineButton\" id=\"playback-reverse-time\">\n        <icon-button\n          @activate=\"reverseTime = !reverseTime\"\n          :md-icon=\"reverseTime ? 'mdi-step-forward-2' : 'mdi-step-backward-2'\"\n          :color=\"color\"\n          :focus-color=\"color\"\n          tooltip-text=\"Forward/Reverse\"\n          tooltip-location=\"top\"\n          tooltip-offset=\"5px\"\n          md-size=\"18\"\n        >\n        </icon-button>\n        <span id=\"reverse-button-text\">{{ reverseTime ? 'Forward' : 'Reverse' }}</span>\n      </div>\n    </div>\n    \n    <div id=\"playback-slider-container\">\n      \n      <div id=\"tick-container\">\n        <div v-for=\"val in index\" :key=\"val\" v-bind=\"options(val)\" class=\"tick\">\n          <span class=\"tick-label\"> {{ valueToMark(val) }} </span>\n        </div>\n      </div>\n      \n      <v-slider\n        ref=\"slider\"\n        hide-details\n        v-model=\"value\"\n        :max=\"max ?? index[index.length - 1]\"\n        :min=\"min ?? index[0]\"\n        :thumb-size=\"16\"\n        color=\"white\"\n        track-color=\"white\"\n        track-fill-color=\"white\"\n        thumb-color=\"blue\"\n        track-size=\"8\"\n        :step=\"step\"\n        :show-ticks=\"useBuiltInTicks ? 'always' : false\"\n        :ticks=\"useBuiltInTicks ? marks : undefined\"\n        >\n      </v-slider>\n    </div>\n\n    \n  </div>\n\n  \n</template>\n\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue';\n// import VueSlider from 'vue-slider-component';\nimport { VSlider } from 'vuetify/components/VSlider';\nimport { SymmetricalLogTransform, symmLinspace } from './symlog';\n\nconst symLog = new SymmetricalLogTransform(10);\n\nexport default defineComponent({\n  name: 'PlaybackControl',\n\n  components: {\n    'v-slider': VSlider,\n  },\n  \n  emits: ['update:modelValue', 'paused', 'close'],\n\n  props: {\n    // Define the props here\n    modelValue: {\n      type: Number,\n      default: 1,\n    },\n    maxPower: {\n      type: Number,\n      default: 3,\n    },\n    paused: {\n      type: Boolean,\n      default: true,\n    },\n    \n    max: {\n      type: Number,\n      default: null,\n    },\n    \n    min: {\n      type: Number,\n      default: null,\n    },\n    \n    color: {\n      type: String,\n      default: 'white',\n    },\n    smallScreen: {\n      type: Boolean,\n      default: false,\n    },\n    \n    inline: {\n      type: Boolean,\n      default: true,\n    },\n    inlineButton: {\n      type: Boolean,\n      default: false,\n    },\n    showCloseButton: {\n      type: Boolean,\n      default: false,\n    },\n    hidePlayButton: {\n      type: Boolean,\n      default: false\n    }\n    \n  },\n\n  mounted() {\n    // Do something when the component is mounted\n    // get height of v-input_container\n    const container = document.getElementById('playback-slider-container');\n    if (container) {\n      // query container for the v-slider\n      const input = container.querySelector(' .v-slider__container');\n      if (input) {\n        // get the height of the v-slider\n        const height = input.clientHeight;\n        // set the height of the tick-container\n        container.style.setProperty('--v-slider-height', `${height}px`);\n      }\n    }\n    \n    // create a resize observer for enclosing-playback-container\n    // that adjusts it's scale relative to a certain width\n    const resizeObserver = new ResizeObserver((entries) => {\n      for (const _entry of entries) {\n        \n        const track = document.querySelector('.v-slider-track') as HTMLElement;\n        const container = document.getElementById('enclosing-playback-container') as HTMLElement;\n        if (container) {\n          const input = container.querySelector('.v-slider__container');\n          const tickContainer = document.querySelector('#tick-container') as HTMLElement;\n        \n          const psc = document.querySelector('#playback-slider-container') as HTMLElement;\n          if (track && container) {\n            const s = track.scrollWidth;\n            container.style.setProperty('--track-width', `${s}px`);\n          }\n          if (tickContainer && input && psc) {\n            psc.style.setProperty('--v-slider-height', `${input.clientHeight}px`);\n          }\n          \n          if (this.inline && container) {\n            container.classList.add('inset');\n          } else {\n            container.classList.remove('inset');\n          }\n        }\n        \n        // if container width is more than 300px use .normal-screen on psc\n        // if (container.clientWidth <= 300) {\n        //   psc.classList.add('small-screen');\n        // } else {\n        //   psc.classList.remove('small-screen');\n        // }\n        \n      }\n    });\n    resizeObserver.observe(document.getElementById('enclosing-playback-container')!);\n    \n  },\n\n\n\n  data() {\n    return {\n      // Define the data here\n      data: ['a', 'b', 'c'],\n      symlog: symLog,\n      index: symLog.sequence(this.maxPower).filter(v => v > 0),\n      myTicks: symmLinspace(1, Math.pow(10,this.maxPower), 2).map((val) => symLog.toSymlogIndex(val)),\n      useBuiltInTicks: true,\n    };\n  },\n\n  methods: {\n\n    // Define the methods here\n    valueToMark(value: number): number | string {\n      if (value === 0) return 'Pause';\n      const pre = this.reverseTime ? -1 : 1;\n      return (pre * symLog.fromSymLogIndex(value)).toString() + 'x';\n    },\n\n    options(val: number) {\n      const min = this.min ?? this.index[0];\n      const max = this.max ?? this.index[this.index.length - 1];\n      const pos = (val - min) / (max - min) * 100;\n      return {\n        style: {\n          left: pos + '%',\n        },\n      };\n    },\n\n  },\n\n  computed: {\n    \n    cssVars() {\n      return {\n        '--color': this.color,\n      };\n    },\n    \n    isPaused: {\n      get() {\n        console.log('PBC: isPaused get',this.paused);\n        return this.paused;\n      },\n      set(val: boolean) {\n        console.log('PBC: isPaused set',val);\n        this.$emit('paused', val);\n      }\n    },\n    \n    // Define the computed properties here\n    marks(): Record<number, string> {\n      const marks: Record<number, string> = {};\n      this.index.forEach((value) => {\n        const pre = this.reverseTime ? -1 : 1;\n        marks[value] = value === 0 ? '' : (pre * symLog.fromSymLogIndex(value)).toString();\n      });\n      \n\n      return marks;\n    },\n\n    step(): number {\n      const val = Math.abs(this.value) <= 1 ? 1 : 0.1;\n      return val;\n    },\n    \n    value: {\n      get() {\n        return Math.abs(symLog.toSymlogIndex(this.modelValue));\n      },\n      \n      set(val: number) {\n        const abs = symLog.fromSymLogIndex(val);\n        const sign = this.reverseTime ? -1 : 1;\n        this.$emit('update:modelValue', sign * abs);\n      }\n    },\n    \n    reverseTime: {\n      get() {\n        return this.modelValue < 0;\n      },\n      set(rt: boolean) {\n        const val = symLog.fromSymLogIndex(this.value);\n        this.$emit('update:modelValue', rt ? -val : val);\n      }\n    },\n\n\n\n  }\n});\n\n</script>\n\n<style lang=\"less\">\n// Define the styles here\n\n\n#enclosing-playback-container {\n  // modify the Vuetify slifer properties\n  contain: layout;\n  display: flex;\n  flex-grow: 1;\n  align-items: center;\n  width: 100%;\n  padding-left: 0.5rem;\n  padding-right: 0.25rem;\n  padding-block-start: 0.25rem;\n  padding-block-end: 0.75rem;\n  border-radius: 0.5rem;\n  border: 1px solid white;\n  // min-width: 200px;\n  max-width: 510px;\n  background-color: #272727;\n  font-size: 0.7rem;\n  --track-wdith: 0px; // get set by the resize observer to the actual track width\n  --min-tick-gap: 0.2rem;\n  --tick-color: #ddd;\n  --track-color: white;\n  --tick-font-size: 1em;\n  pointer-events: auto;\n  z-index: 9999;\n  \n  // no close button normally\n  #playback-close-button {\n    position: absolute;\n    right: 0;\n    top: 0;\n    transform: translate(125%, 0);\n    \n    border-radius: 50%;\n    padding: 2px;\n\n    pointer-events: auto;\n    \n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border: 1px solid var(--color);\n    background-color: black;\n    color: var(--color);\n  }\n    \n  // #playback-close-button {\n  //   display: none;\n  // }\n  \n  &.inset {\n    padding: 0;\n    padding-inline: 0.25rem;\n    padding-block-end: 1em;\n    background-color: black;\n    \n    border: 2px solid var(--color);\n    // transform: translateY(25%);\n    \n    --tick-font-size: clamp(10px, 1.5vw, 1em);\n    \n    i.v-icon {\n      font-size: clamp(1vw, 1.5em, 18px) !important;\n      width: 1em !important;\n      height: 1em !important;\n    }\n    \n    #playback-play-pause-button {\n      i.v-icon {\n        font-size: clamp(1vw, 1.5em, 24px) !important;\n        width: 1.5em !important;\n        height: 1em !important;\n      }\n    }\n    \n    #playback-slider-container {\n      \n      padding-inline-start: 0.5rem;\n    }\n    \n    \n    \n  }\n  \n  #playback-play-pause-button {\n    display: flex;\n    margin-inline-end: 0.5rem;\n    flex-direction: row;\n    align-items: center;\n    gap: 0.75em;\n    pointer-events: auto!important;\n    \n    #playback-reverse-time {\n      position: relative;\n      #reverse-button-text {\n        position: absolute;\n        font-size: var(--tick-font-size);\n        left: 0%;\n      }\n      .icon-wrapper {\n        border-radius: 2em;\n      }\n    }\n\n  }\n  \n    > #playback-play-pause-button.hide {\n      display: none; \n    }\n    \n  \n  #playback-slider-container {\n    flex-grow: 1;\n  }\n  \n\n  #playback-slider-container {\n    display: flex;\n    flex-direction: column;\n    position: relative;\n    padding-left: 0.5rem;\n    --v-slider-height: 32px;\n    --psc-offset: calc(-1*var(--tick-font-size)/2);\n\n    height: calc(var(--v-slider-height) + var(--tick-font-size));\n        \n    .v-slider-track__ticks {\n      border-radius: calc(var(--v-slider-height) / 2);\n    }\n    \n    .v-slider-track__tick-label {\n      display: none;\n    }\n    \n    \n    .track-tick-size {\n      font-size: var(--v-slider-track-size);\n      --avail-space: calc((var(--track-width) - 18 * var(--min-tick-gap)) / 9);\n      --v-slider-tick-size: clamp(1em, var(--avail-space), 3em); // scale with track size\n      border-radius: 50%;\n    }\n    \n    .pause-color {\n      --pause-color: rebeccaPurple !important;\n      background-color: var(--pause-color);\n      &.v-slider-track__tick--filled {\n        background-color: var(--pause-color);\n      }\n    }\n    \n    // the zero tick mark\n    \n    \n    // push the track to the back\n    .v-slider-track * {\n        opacity: 1;\n        background-color: var(--track-color);\n      }\n\n    // show no progress fill\n    .v-slider-track__fill {\n      opacity: 0;\n    }\n    \n    .v-slider-track__tick {\n      .track-tick-size();\n      \n      background-color: var(--tick-color);\n      \n      &.v-slider-track__tick--filled {\n        // margin-inline-start: calc(100% - var(--v-slider-tick-size) - 1px); // default\n        background-color: var(--tick-color);\n      }\n      \n      &.v-slider-track__tick--first {\n        // margin-inline-start: calc(var(--v-slider-tick-size) + 1px); // default\n        margin-inline-start: 0px;\n      }\n      \n      &.v-slider-track__tick--last {\n        // margin-inline-start: calc(100% - var(--v-slider-tick-size) - 1px); // default\n        margin-inline-start: 100%;\n      }\n    \n    }\n      \n    @media (max-width: 500px){\n      \n      .v-slider-track__tick {\n        --v-slider-tick-size: 2em;\n      }\n      \n    }\n      \n    \n  }\n  \n  .icon-wrapper {\n    pointer-events: auto;\n  }\n  \n      \n      \n  \n\n\n    #tick-container {\n      --height: 0px;\n      --position: calc(var(--v-slider-height) + var(--height));\n      margin-inline: 8px;\n      position: relative;\n      height: var(--height);\n      transform: translateY(var(--position));\n      \n      @media (max-width: 500px) {\n        --position: calc(var(--v-slider-height) - 0.5em);\n        transform: translateY(--position);\n      }\n\n      .tick {\n        position: absolute;\n        transform: translateX(-50%);\n      }\n      \n\n      .tick-label {\n        font-size: var(--tick-font-size);\n        color: white;\n      }\n\n    }\n  }\n\n\n</style>","\n\ntype PNum = number | number[];\ntype ONum<T extends PNum> = T extends number ? number : number[];\n  \nexport class SymmetricalLogTransform {\n  // adapted from matplotlib\n  // https://github.com/matplotlib/matplotlib/blob/main/lib/matplotlib/scale.py#L348\n  private base: number;\n  private logBase: number;\n  \n\n  constructor(base: number = 10) {\n    this.base = base;\n    this.logBase = Math.log(base);\n  }\n  \n  private log(x: number): number {\n    // need this to return exact numbers and 0\n    if (x === 0) {\n      return 0;\n    } \n    if (this.base == 10) {\n      return Math.log10(x);\n    }\n    if (this.base == 2) {\n      return Math.log2(x);\n    }\n    if (this.base == Math.E) {\n      return Math.log(x);\n    }\n    return Math.log(x) / this.logBase;\n  }\n  \n  // generate a sequence of values\n  public sequence(max: number, index: boolean = true): number[] {\n    const rightSide = (new Array(max + 1)).fill(0).map((_, i) => (i+1));\n    const leftSide = rightSide.map((value) => -value).reverse();\n    const seq = leftSide.concat([0]).concat(rightSide);\n    if (index) {\n      return seq;\n    } else {\n      return this.fromSymLogIndex(seq);\n    }\n  }\n  \n  // transform from real numbers to symmetrical log scale\n  private inverseTransform<T extends PNum>(value: T): ONum<T> {\n    // if value is an array, map over it\n    if (Array.isArray(value)) {\n      return value.map((v) => this.inverseTransform(v)) as ONum<T>;\n    }    \n    const absValue = Math.abs(value);\n    let out: number;\n\n    if (absValue > 1) {\n      out = Math.sign(value) * Math.pow(this.base, absValue) / this.base;\n    } else {\n      out = value;\n    }\n    return out as ONum<T>;\n  }\n  \n  private   transform<T extends PNum>(value: T): ONum<T> {\n    // if value is an array, map over it\n    if (Array.isArray(value)) {\n      return value.map((v) => this.transform(v)) as ONum<T>;\n    }\n    \n    const absValue = Math.abs(value);\n    let out: number;\n\n    if (absValue > 1) {\n      out = Math.sign(value) * (this.log(absValue) + 1);\n    } else {\n      out = value;\n    }\n    return out as ONum<T>;\n  }\n  \n  // from -3, -2, -1, 0, 1, 2, 3 --> -100, -10, -1, 0, 1, 10, 100\n  public fromSymLogIndex<T extends PNum>(value: T): ONum<T> {\n    return this.inverseTransform(value);\n  }\n  \n  public toSymlogIndex<T extends PNum>(value: T): ONum<T> {\n    return this.transform(value);\n  }\n\n}\n\n\nexport function makeSymmetric(right: number[]): number[] {\n  const left = right.map((value) => -value).reverse();\n  return left.concat([0]).concat(right);\n}\n\n// generate sequence using step size\nexport function linspace(start: number, stop: number, delta: number): number[] {\n  const out: number[] = [];\n  for (let i = start; i <= stop; i += delta) {\n    out.push(i);\n  }\n  return out;\n}\n\nexport function symmLinspace(start: number, stop: number, delta: number): number[] {\n  const right = linspace(start, stop, delta);\n  return makeSymmetric(right);\n}","import { render } from \"./PlaybackControl.vue?vue&type=template&id=75f0b142&ts=true\"\nimport script from \"./PlaybackControl.vue?vue&type=script&lang=ts\"\nexport * from \"./PlaybackControl.vue?vue&type=script&lang=ts\"\n\nimport \"./PlaybackControl.vue?vue&type=style&index=0&id=75f0b142&lang=less\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","// wwt_playback_control.ts\n\n// Vue composable for controlling the playback and playrate of the WWT engine\nimport { ref, watch } from \"vue\";\nimport { engineStore } from \"@wwtelescope/engine-pinia\";\ntype WWTEngineStore = ReturnType<typeof engineStore>;\nexport function usePlaybackControl(store: WWTEngineStore, debug = false) {\n  console.log(\"usePlaybackControl\");\n  const clockRate = ref(1);\n  const timePlaying = ref(false);\n  \n  const play = () => { timePlaying.value = true; };\n  \n  const pause = () => { timePlaying.value = false; };\n\n  const togglePlay = () => { timePlaying.value = !timePlaying.value; };\n  \n  \n  function setSpeed(rate: number) {\n    clockRate.value = rate;\n  }\n  \n\n  store.waitForReady().then(() => {\n    watch(clockRate, (newRate) => {\n      store.setClockRate(newRate);\n    });\n\n    watch(timePlaying, (newIsPlaying) => {\n      store.setClockSync(newIsPlaying);\n    });\n    store.setClockRate(clockRate.value);\n    store.setClockSync(timePlaying.value);\n  });\n  \n  // watch everything and log out what changes\n  if (debug) {\n    watch(clockRate, (newRate) => {\n      console.log(\"playbackRate changed\", newRate);\n    });\n    watch(timePlaying, (newIsPlaying) => {\n      console.log(\"isPlaying changed\", newIsPlaying);\n    });\n  }\n\n  \n  \n\n    \n    \n\n\n  return {\n    play, \n    pause,\n    togglePlay,\n    setSpeed,\n    timePlaying,\n    clockRate\n  };\n  \n}\n    ","import { useModel as _useModel, mergeModels as _mergeModels, defineComponent as _defineComponent } from 'vue'\nimport { resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, unref as _unref, createVNode as _createVNode, mergeProps as _mergeProps, withCtx as _withCtx, vShow as _vShow, resolveDirective as _resolveDirective, withDirectives as _withDirectives, createElementBlock as _createElementBlock, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString } from \"vue\"\n\nconst _hoisted_1 = { id: \"speed-control\" }\nconst _hoisted_2 = { id: \"speed-buttons\" }\nconst _hoisted_3 = {\n  key: 5,\n  id: \"inline-speed-control\"\n}\nconst _hoisted_4 = {\n  key: 0,\n  id: \"speed-text\"\n}\n\nimport { ref, computed, watch } from 'vue';\nimport { useDisplay } from 'vuetify';\n\nimport { supportsTouchscreen } from \"@cosmicds/vue-toolkit\";\n\n\n// import { storeToRefs } from 'pinia';\nimport { engineStore } from \"@wwtelescope/engine-pinia\";\nimport { usePlaybackControl } from '../wwt_playback_control';\n\n\ninterface Props {\n  store: ReturnType<typeof engineStore>;\n  color: string;\n  maxSpeed?: number;\n  defaultRate?: number;\n  useInline?: boolean;\n  showText?: boolean;\n  rateDelta?: number;\n}\n\nconst minSpeed = 1;\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'SpeedControl',\n  props: /*@__PURE__*/_mergeModels({\n    store: {},\n    color: { default: 'white' },\n    maxSpeed: { default: 10000 },\n    defaultRate: { default: 1 },\n    useInline: { type: Boolean, default: false },\n    showText: { type: Boolean, default: false },\n    rateDelta: { default: 10 }\n  }, {\n    \"playing\": { type: Boolean, ...{default: false, required: true} },\n    \"playingModifiers\": {},\n  }),\n  emits: /*@__PURE__*/_mergeModels(['reset', 'update:playing'], [\"update:playing\"]),\n  setup(__props: any, { emit: __emit }) {\n\nconst { \n  color, \n  maxSpeed, \n  defaultRate, \n  store, \n  showText, \n  rateDelta, \n  useOldControl, \n  useInline\n} = __props;\n\n\nconst playing = _useModel<boolean>(__props, 'playing');\nconst emit = __emit;\n\nconst playbackVisible = ref(false);\nconst forceRate = ref(false);\n\nconst { timePlaying, clockRate, setSpeed } = usePlaybackControl(store, false);\nsetSpeed(defaultRate);\n\ntimePlaying.value = playing.value;\nwatch(playing, (v) => {timePlaying.value = v;});\nwatch(timePlaying, (v) => {playing.value = v;});\n\nfunction clamp(val) {\n  return Math.min(Math.max(val, minSpeed), maxSpeed);\n}\n\nconst playbackRate = computed({\n  get: function(): number {\n    if (forceRate.value) {\n      const sign = Math.sign(clockRate.value);\n      return sign * Math.min(10, sign * clockRate.value);\n    }\n    return clockRate.value;\n  },\n  set: function(value: number) {\n    clockRate.value = Math.sign(value) * clamp(Math.abs(value));\n  }\n});\n\nfunction reverseRate() {\n  playbackRate.value = -playbackRate.value;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nfunction setDirection(direction: 'forward' | 'reverse' | null = null) {\n  playbackRate.value = direction == 'reverse' ? -Math.abs(playbackRate.value) : Math.abs(playbackRate.value);\n}\n\nfunction increaseRate() {\n  const sign = Math.sign(playbackRate.value);\n  const abs = Math.abs(playbackRate.value);\n  const newRate = abs * rateDelta;\n  playbackRate.value = sign * clamp(newRate);\n}\nfunction decreaseRate() {\n  const sign = Math.sign(playbackRate.value);\n  const abs = Math.abs(playbackRate.value);\n  const newRate = abs / rateDelta;\n  playbackRate.value = sign * clamp(newRate);\n}\n\n\n// either moves to reverse time (at -1x) or slows down by rateDelta\nfunction reverseOrIncreaseReversePlaybackRate() {\n  forceRate.value = false;\n  const sign = Math.sign(playbackRate.value);\n  if (sign > 0) {\n    playbackRate.value = -Math.min(playbackRate.value, 1);\n    return;\n  }\n  const abs = Math.abs(playbackRate.value);\n  let ezrate = Math.floor(Math.log10(abs));\n  ezrate -= sign * Math.log10(rateDelta);\n  playbackRate.value = sign * clamp(Math.pow(10, Math.abs(ezrate)));\n}\n\n// etiher switches to forward time (at 1x) or speeds up by rateDelta\nfunction forwardOrIncreaseForwardPlaybackRate() {\n  forceRate.value = false;\n  const sign = Math.sign(playbackRate.value);\n  if (sign < 0 ) {\n    playbackRate.value = -Math.max(playbackRate.value,-1);\n    return;\n  }\n  const abs = Math.abs(playbackRate.value);\n  let ezrate = Math.floor(Math.log10(abs));\n  ezrate += sign * Math.log10(rateDelta);\n  playbackRate.value = sign * clamp(Math.pow(10, Math.abs(ezrate)));\n}\n\nconst { smAndDown } = useDisplay();\nconst mobile = computed( () => smAndDown && supportsTouchscreen());\n\nconst allowClickOutside = ref(false);\nfunction onClickOutside() {\n  // console.log('onclickoutside', playbackVisible.value, allowClickOutside.value);\n  if (playbackVisible.value && allowClickOutside.value) {\n    playbackVisible.value = false;\n    return;\n  }\n  allowClickOutside.value = playbackVisible.value;\n}\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_icon_button = _resolveComponent(\"icon-button\")!\n  const _component_playback_control = _resolveComponent(\"playback-control\")!\n  const _component_v_dialog = _resolveComponent(\"v-dialog\")!\n  const _directive_click_outside = _resolveDirective(\"click-outside\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", _hoisted_2, [\n      useOldControl\n        ? (_openBlock(), _createBlock(_component_icon_button, {\n            key: 0,\n            id: \"reverse-speed\",\n            \"fa-icon\": 'angles-left',\n            onActivate: _cache[0] || (_cache[0] = \n          () => {\n            reverseOrIncreaseReversePlaybackRate();\n            timePlaying.value = true;\n          }\n        ),\n            color: color,\n            \"focus-color\": color,\n            \"tooltip-text\": playbackRate.value < 0 ? 'Reverse Faster' : 'Reverse',\n            \"tooltip-location\": \"top\",\n            \"tooltip-offset\": \"5px\",\n            faSize: \"1x\",\n            \"show-tooltip\": !mobile.value\n          }, null, 8, [\"tooltip-text\", \"show-tooltip\"]))\n        : _createCommentVNode(\"\", true),\n      useOldControl\n        ? (_openBlock(), _createBlock(_component_icon_button, {\n            key: 1,\n            id: \"forward-speed\",\n            \"fa-icon\": 'angles-right',\n            onActivate: _cache[1] || (_cache[1] = \n          () => {\n            if (!_unref(timePlaying)) {\n              timePlaying.value = true\n            } else {\n              forwardOrIncreaseForwardPlaybackRate();\n            }\n          }\n        ),\n            color: color,\n            \"focus-color\": color,\n            \"tooltip-text\": playbackRate.value > 0 ? 'Faster' : 'Forward',\n            \"tooltip-location\": \"top\",\n            \"tooltip-offset\": \"5px\",\n            faSize: \"1x\",\n            \"show-tooltip\": !mobile.value\n          }, null, 8, [\"tooltip-text\", \"show-tooltip\"]))\n        : _createCommentVNode(\"\", true),\n      _createVNode(_component_icon_button, {\n        onActivate: _cache[2] || (_cache[2] = () => {\n          reverseRate()\n        }),\n        \"md-icon\": playbackRate.value < 0 ? 'mdi-step-forward-2' : 'mdi-step-backward-2',\n        color: color,\n        \"focus-color\": color,\n        \"tooltip-text\": playbackRate.value < 0 ? 'Play time forward' : 'Play time backwards',\n        \"tooltip-location\": \"top\",\n        \"tooltip-offset\": \"5px\",\n        \"show-tooltip\": !mobile.value,\n        \"md-size\": \"18\"\n      }, null, 8, [\"md-icon\", \"tooltip-text\", \"show-tooltip\"]),\n      _createVNode(_component_icon_button, {\n        id: \"play-pause-icon\",\n        \"fa-icon\": !_unref(timePlaying) ? 'play' : 'pause',\n        onActivate: _cache[3] || (_cache[3] = \n          () => {\n            timePlaying.value = !_unref(timePlaying);\n          }\n        ),\n        color: color,\n        \"focus-color\": color,\n        \"tooltip-text\": \"Play/Pause\",\n        \"tooltip-location\": \"top\",\n        \"tooltip-offset\": \"5px\",\n        faSize: \"1x\",\n        \"show-tooltip\": !mobile.value\n      }, null, 8, [\"fa-icon\", \"show-tooltip\"]),\n      (!useOldControl)\n        ? (_openBlock(), _createBlock(_component_icon_button, {\n            key: 2,\n            id: \"slow-down\",\n            \"fa-icon\": 'angles-down',\n            onActivate: _cache[4] || (_cache[4] = \n          () => {\n            decreaseRate();\n            timePlaying.value = true;\n          }\n        ),\n            color: color,\n            \"focus-color\": color,\n            \"tooltip-text\": `Slow down ${rateDelta}x`,\n            \"tooltip-location\": \"top\",\n            \"tooltip-offset\": \"5px\",\n            faSize: \"1x\",\n            \"show-tooltip\": !mobile.value\n          }, null, 8, [\"tooltip-text\", \"show-tooltip\"]))\n        : _createCommentVNode(\"\", true),\n      (!useOldControl)\n        ? (_openBlock(), _createBlock(_component_icon_button, {\n            key: 3,\n            id: \"speed-up\",\n            \"fa-icon\": 'angles-up',\n            onActivate: _cache[5] || (_cache[5] = \n          () => {\n            increaseRate();\n            timePlaying.value = true;\n          }\n        ),\n            color: color,\n            \"focus-color\": color,\n            \"tooltip-text\": `Speed up ${rateDelta}x`,\n            \"tooltip-location\": \"top\",\n            \"tooltip-offset\": \"5px\",\n            faSize: \"1x\",\n            \"show-tooltip\": !mobile.value\n          }, null, 8, [\"tooltip-text\", \"show-tooltip\"]))\n        : _createCommentVNode(\"\", true),\n      _createVNode(_component_icon_button, {\n        id: \"reset\",\n        \"fa-icon\": 'rotate',\n        onActivate: _cache[6] || (_cache[6] = \n          () => {\n            playbackRate.value = 100;\n            timePlaying.value = false;\n            forceRate.value = false;\n            emit('reset');\n          }\n        ),\n        color: color,\n        \"focus-color\": color,\n        \"tooltip-text\": \"Reset\",\n        \"tooltip-location\": \"top\",\n        \"tooltip-offset\": \"5px\",\n        faSize: \"1x\",\n        \"show-tooltip\": !mobile.value\n      }, null, 8, [\"show-tooltip\"]),\n      (!useInline)\n        ? (_openBlock(), _createBlock(_component_v_dialog, {\n            key: 4,\n            modelValue: playbackVisible.value,\n            \"onUpdate:modelValue\": _cache[11] || (_cache[11] = ($event: any) => ((playbackVisible).value = $event)),\n            scrim: false,\n            location: \"top\",\n            offset: \"40\",\n            \"location-strategy\": \"connected\",\n            persistent: \"\",\n            \"no-click-animation\": \"\",\n            \"retain-focus\": false\n          }, {\n            activator: _withCtx(({ props }) => [\n              _createVNode(_component_icon_button, _mergeProps({\n                id: \"speed-control-icon\",\n                onActivate: _cache[7] || (_cache[7] = \n              () => {\n                playbackVisible.value = !playbackVisible.value;\n              }\n            ),\n                \"fa-icon\": playbackVisible.value ? 'times' : 'gauge-high',\n                color: color,\n                \"focus-color\": color,\n                \"tooltip-text\": \"More Speed Controls\",\n                \"tooltip-location\": \"top\",\n                \"tooltip-offset\": \"5px\",\n                faSize: \"1x\",\n                \"show-tooltip\": !mobile.value\n              }, props), null, 16, [\"fa-icon\", \"show-tooltip\"])\n            ]),\n            default: _withCtx(() => [\n              (playbackVisible.value)\n                ? (_openBlock(), _createBlock(_component_playback_control, {\n                    key: 0,\n                    class: \"desktop-playback-control\",\n                    \"model-value\": playbackRate.value,\n                    \"onUpdate:modelValue\": _cache[8] || (_cache[8] = (value) => {\n                          forceRate.value = false;\n                          playbackRate.value = value;\n                        }),\n                    paused: !_unref(timePlaying),\n                    onPaused: _cache[9] || (_cache[9] = ($event: any) => (timePlaying.value = !$event)),\n                    \"max-power\": Math.log10(maxSpeed),\n                    max: Math.log10(maxSpeed) + 1,\n                    color: color,\n                    inline: false,\n                    \"show-close-button\": \"\",\n                    onClose: _cache[10] || (_cache[10] = \n            () => {\n              playbackVisible.value = false;\n            }\n          )\n                  }, null, 8, [\"model-value\", \"paused\", \"max-power\", \"max\"]))\n                : _createCommentVNode(\"\", true)\n            ]),\n            _: 1\n          }, 8, [\"modelValue\"]))\n        : _createCommentVNode(\"\", true),\n      useInline\n        ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [\n            _createVNode(_component_icon_button, {\n              id: \"speed-control-icon\",\n              onActivate: _cache[12] || (_cache[12] = \n            () => {\n              playbackVisible.value = !playbackVisible.value;\n              allowClickOutside.value = false; // prevent onClickOutside from hiding it.\n            }\n          ),\n              \"fa-icon\": playbackVisible.value ? 'times' : 'gauge-high',\n              color: color,\n              \"focus-color\": color,\n              \"tooltip-text\": \"Time Controls\",\n              \"tooltip-location\": \"top\",\n              \"tooltip-offset\": \"5px\",\n              faSize: \"1x\",\n              \"show-tooltip\": !mobile.value\n            }, null, 8, [\"fa-icon\", \"show-tooltip\"]),\n            _withDirectives(_createVNode(_component_playback_control, {\n              class: \"mobile-playback-control\",\n              \"model-value\": playbackRate.value,\n              \"onUpdate:modelValue\": _cache[13] || (_cache[13] = (value) => {\n                          forceRate.value = false;\n                          playbackRate.value = value;\n                        }),\n              paused: !_unref(timePlaying),\n              onPaused: _cache[14] || (_cache[14] = ($event: any) => (timePlaying.value = !$event)),\n              \"max-power\": Math.log10(maxSpeed),\n              max: Math.log10(maxSpeed) + 1,\n              color: color,\n              inline: true,\n              \"inline-button\": \"\",\n              onClose: _cache[15] || (_cache[15] = \n            () => {\n              playbackVisible.value = false;\n            }\n          )\n            }, null, 8, [\"model-value\", \"paused\", \"max-power\", \"max\"]), [\n              [_vShow, playbackVisible.value],\n              [_directive_click_outside, onClickOutside]\n            ])\n          ]))\n        : _createCommentVNode(\"\", true)\n    ]),\n    showText\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, _toDisplayString(Math.round(playbackRate.value)) + \"x \" + _toDisplayString(_unref(timePlaying) ? '' : '(Paused)'), 1))\n      : _createCommentVNode(\"\", true)\n  ]))\n}\n}\n\n})","<template>\n  <div id=\"speed-control\">\n    <div id=\"speed-buttons\">\n      <icon-button\n        v-if=\"useOldControl\"\n        id=\"reverse-speed\"\n        :fa-icon=\"'angles-left'\"\n        @activate=\"\n          () => {\n            reverseOrIncreaseReversePlaybackRate();\n            timePlaying = true;\n          }\n        \"\n        :color=\"color\"\n        :focus-color=\"color\"\n        :tooltip-text=\"playbackRate < 0 ? 'Reverse Faster' : 'Reverse'\"\n        tooltip-location=\"top\"\n        tooltip-offset=\"5px\"\n        faSize=\"1x\"\n        :show-tooltip=\"!mobile\"\n      ></icon-button>\n      \n      <icon-button \n        v-if=\"useOldControl\"\n        id=\"forward-speed\"\n        :fa-icon=\"'angles-right'\"\n        @activate=\"\n          () => {\n            if (!timePlaying) {\n              timePlaying = true\n            } else {\n              forwardOrIncreaseForwardPlaybackRate();\n            }\n          }\n        \"\n        :color=\"color\"\n        :focus-color=\"color\"\n        :tooltip-text=\"playbackRate > 0 ? 'Faster' : 'Forward'\"\n        tooltip-location=\"top\"\n        tooltip-offset=\"5px\"\n        faSize=\"1x\"\n        :show-tooltip=\"!mobile\"\n      ></icon-button>\n      \n      <!-- <icon-button \n        v-if=\"!useOldControl\"\n        id=\"reverse-direction\"\n        :fa-icon=\"'angles-left'\"\n        @activate=\"\n          () => {\n            setDirection('reverse')\n            timePlaying = true\n          }\n        \"\n        :color=\"color\"\n        :focus-color=\"color\"\n        tooltip-text=\"Reverse\"\n        tooltip-location=\"top\"\n        tooltip-offset=\"5px\"\n        faSize=\"1x\"\n        :show-tooltip=\"!mobile\"\n      ></icon-button> -->\n      \n      <!-- <icon-button \n        v-if=\"!useOldControl\"\n        id=\"forward-direction\"\n        :fa-icon=\"'angles-right'\"\n        @activate=\"\n          () => {\n            setDirection('forward');\n            timePlaying = true\n          }\n        \"\n        :color=\"color\"\n        :focus-color=\"color\"\n        tooltip-text=\"Forward\"\n        tooltip-location=\"top\"\n        tooltip-offset=\"5px\"\n        faSize=\"1x\"\n        :show-tooltip=\"!mobile\"\n      ></icon-button> -->\n      <icon-button\n        @activate=\"() => {\n          reverseRate()\n        }\"\n        :md-icon=\"playbackRate < 0 ? 'mdi-step-forward-2' : 'mdi-step-backward-2'\"\n        :color=\"color\"\n        :focus-color=\"color\"\n        :tooltip-text=\"playbackRate < 0 ? 'Play time forward' : 'Play time backwards'\"\n        tooltip-location=\"top\"\n        tooltip-offset=\"5px\"\n        :show-tooltip=\"!mobile\"\n        md-size=\"18\"\n      >\n      </icon-button>\n      \n      <icon-button \n        id=\"play-pause-icon\"\n        :fa-icon=\"!timePlaying ? 'play' : 'pause'\"\n        @activate=\"\n          () => {\n            timePlaying = !timePlaying;\n          }\n        \"\n        :color=\"color\"\n        :focus-color=\"color\"\n        tooltip-text=\"Play/Pause\"\n        tooltip-location=\"top\"\n        tooltip-offset=\"5px\"\n        faSize=\"1x\"\n        :show-tooltip=\"!mobile\"\n      ></icon-button>\n      \n      <icon-button \n        v-if=\"!useOldControl\"\n        id=\"slow-down\"\n        :fa-icon=\"'angles-down'\"\n        @activate=\"\n          () => {\n            decreaseRate();\n            timePlaying = true;\n          }\n        \"\n        :color=\"color\"\n        :focus-color=\"color\"\n        :tooltip-text=\"`Slow down ${rateDelta}x`\"\n        tooltip-location=\"top\"\n        tooltip-offset=\"5px\"\n        faSize=\"1x\"\n        :show-tooltip=\"!mobile\"\n      ></icon-button>\n      \n      <icon-button \n        v-if=\"!useOldControl\"\n        id=\"speed-up\"\n        :fa-icon=\"'angles-up'\"\n        @activate=\"\n          () => {\n            increaseRate();\n            timePlaying = true;\n          }\n        \"\n        :color=\"color\"\n        :focus-color=\"color\"\n        :tooltip-text=\"`Speed up ${rateDelta}x`\"\n        tooltip-location=\"top\"\n        tooltip-offset=\"5px\"\n        faSize=\"1x\"\n        :show-tooltip=\"!mobile\"\n      ></icon-button>\n      \n      \n\n      <icon-button \n        id=\"reset\"\n        :fa-icon=\"'rotate'\"\n        @activate=\"\n          () => {\n            playbackRate = 100;\n            timePlaying = false;\n            forceRate = false;\n            emit('reset');\n          }\n        \"\n        :color=\"color\"\n        :focus-color=\"color\"\n        tooltip-text=\"Reset\"\n        tooltip-location=\"top\"\n        tooltip-offset=\"5px\"\n        faSize=\"1x\"\n        :show-tooltip=\"!mobile\"\n      ></icon-button>\n\n      <v-dialog\n        v-if=\"!useInline\"\n        v-model=\"playbackVisible\"\n        :scrim=\"false\"\n        location=\"top\"\n        offset=\"40\"\n        location-strategy=\"connected\"\n        persistent\n        no-click-animation\n        :retain-focus=\"false\"\n      >\n        <template v-slot:activator=\"{ props }\">\n          <icon-button\n            id=\"speed-control-icon\"\n            @activate=\"\n              () => {\n                playbackVisible = !playbackVisible;\n              }\n            \"\n            :fa-icon=\"playbackVisible ? 'times' : 'gauge-high'\"\n            :color=\"color\"\n            :focus-color=\"color\"\n            tooltip-text=\"More Speed Controls\"\n            tooltip-location=\"top\"\n            tooltip-offset=\"5px\"\n            faSize=\"1x\"\n            :show-tooltip=\"!mobile\"\n            v-bind=\"props\"\n          ></icon-button>\n        </template>\n        <playback-control\n          class=\"desktop-playback-control\"\n          v-if=\"playbackVisible\"\n          :model-value=\"playbackRate\"\n          @update:modelValue=\"(value: number) => {\n                          forceRate = false;\n                          playbackRate = value;\n                        }\"\n          :paused=\"!timePlaying\"\n          @paused=\"timePlaying = !$event\"\n          :max-power=\"Math.log10(maxSpeed)\"\n          :max=\"Math.log10(maxSpeed) + 1\"\n          :color=\"color\"\n          :inline=\"false\"\n          show-close-button\n          @close=\"\n            () => {\n              playbackVisible = false;\n            }\n          \"\n        />\n      </v-dialog>\n      <div v-if=\"useInline\" id=\"inline-speed-control\">\n        <icon-button\n          id=\"speed-control-icon\"\n          @activate=\"\n            () => {\n              playbackVisible = !playbackVisible;\n              allowClickOutside = false; // prevent onClickOutside from hiding it.\n            }\n          \"\n          :fa-icon=\"playbackVisible ? 'times' : 'gauge-high'\"\n          :color=\"color\"\n          :focus-color=\"color\"\n          tooltip-text=\"Time Controls\"\n          tooltip-location=\"top\"\n          tooltip-offset=\"5px\"\n          faSize=\"1x\"\n          :show-tooltip=\"!mobile\"\n        ></icon-button>\n\n        <playback-control\n          class=\"mobile-playback-control\"\n          v-show=\"playbackVisible\"\n          :model-value=\"playbackRate\"\n          @update:modelValue=\"(value: number) => {\n                          forceRate = false;\n                          playbackRate = value;\n                        }\"\n          :paused=\"!timePlaying\"\n          @paused=\"timePlaying = !$event\"\n          :max-power=\"Math.log10(maxSpeed)\"\n          :max=\"Math.log10(maxSpeed) + 1\"\n          :color=\"color\"\n          :inline=\"true\"\n          inline-button\n          v-click-outside=\"onClickOutside\"\n          @close=\"\n            () => {\n              playbackVisible = false;\n            }\n          \"\n        />\n      </div>\n    </div>\n    \n    <div v-if=\"showText\" id=\"speed-text\">{{ Math.round(playbackRate) }}x {{ timePlaying ? '' : '(Paused)'  }}</div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed, watch } from 'vue';\nimport { useDisplay } from 'vuetify';\n\nimport { supportsTouchscreen } from \"@cosmicds/vue-toolkit\";\n\n\n// import { storeToRefs } from 'pinia';\nimport { engineStore } from \"@wwtelescope/engine-pinia\";\nimport { usePlaybackControl } from '../wwt_playback_control';\n\n\ninterface Props {\n  store: ReturnType<typeof engineStore>;\n  color: string;\n  maxSpeed?: number;\n  defaultRate?: number;\n  useInline?: boolean;\n  showText?: boolean;\n  rateDelta?: number;\n}\n\nconst { \n  color, \n  maxSpeed, \n  defaultRate, \n  store, \n  showText, \n  rateDelta, \n  useOldControl, \n  useInline\n} = withDefaults(defineProps<Props>(),\n  {\n    color: 'white',\n    maxSpeed: 10000,\n    minSpeed: 1,\n    defaultRate: 1,\n    useInline: false,\n    showText: false,\n    rateDelta: 10,\n    useOldControl: false,\n  }\n);\n\n\nconst playing = defineModel<boolean>('playing', {default: false, required: true});\nconst minSpeed = 1;\n\nconst emit = defineEmits(['reset', 'update:playing']);\n\nconst playbackVisible = ref(false);\nconst forceRate = ref(false);\n\nconst { timePlaying, clockRate, setSpeed } = usePlaybackControl(store, false);\nsetSpeed(defaultRate);\n\ntimePlaying.value = playing.value;\nwatch(playing, (v) => {timePlaying.value = v;});\nwatch(timePlaying, (v) => {playing.value = v;});\n\nfunction clamp(val) {\n  return Math.min(Math.max(val, minSpeed), maxSpeed);\n}\n\nconst playbackRate = computed({\n  get: function(): number {\n    if (forceRate.value) {\n      const sign = Math.sign(clockRate.value);\n      return sign * Math.min(10, sign * clockRate.value);\n    }\n    return clockRate.value;\n  },\n  set: function(value: number) {\n    clockRate.value = Math.sign(value) * clamp(Math.abs(value));\n  }\n});\n\nfunction reverseRate() {\n  playbackRate.value = -playbackRate.value;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nfunction setDirection(direction: 'forward' | 'reverse' | null = null) {\n  playbackRate.value = direction == 'reverse' ? -Math.abs(playbackRate.value) : Math.abs(playbackRate.value);\n}\n\nfunction increaseRate() {\n  const sign = Math.sign(playbackRate.value);\n  const abs = Math.abs(playbackRate.value);\n  const newRate = abs * rateDelta;\n  playbackRate.value = sign * clamp(newRate);\n}\nfunction decreaseRate() {\n  const sign = Math.sign(playbackRate.value);\n  const abs = Math.abs(playbackRate.value);\n  const newRate = abs / rateDelta;\n  playbackRate.value = sign * clamp(newRate);\n}\n\n\n// either moves to reverse time (at -1x) or slows down by rateDelta\nfunction reverseOrIncreaseReversePlaybackRate() {\n  forceRate.value = false;\n  const sign = Math.sign(playbackRate.value);\n  if (sign > 0) {\n    playbackRate.value = -Math.min(playbackRate.value, 1);\n    return;\n  }\n  const abs = Math.abs(playbackRate.value);\n  let ezrate = Math.floor(Math.log10(abs));\n  ezrate -= sign * Math.log10(rateDelta);\n  playbackRate.value = sign * clamp(Math.pow(10, Math.abs(ezrate)));\n}\n\n// etiher switches to forward time (at 1x) or speeds up by rateDelta\nfunction forwardOrIncreaseForwardPlaybackRate() {\n  forceRate.value = false;\n  const sign = Math.sign(playbackRate.value);\n  if (sign < 0 ) {\n    playbackRate.value = -Math.max(playbackRate.value,-1);\n    return;\n  }\n  const abs = Math.abs(playbackRate.value);\n  let ezrate = Math.floor(Math.log10(abs));\n  ezrate += sign * Math.log10(rateDelta);\n  playbackRate.value = sign * clamp(Math.pow(10, Math.abs(ezrate)));\n}\n\nconst { smAndDown } = useDisplay();\nconst mobile = computed( () => smAndDown && supportsTouchscreen());\n\nconst allowClickOutside = ref(false);\nfunction onClickOutside() {\n  // console.log('onclickoutside', playbackVisible.value, allowClickOutside.value);\n  if (playbackVisible.value && allowClickOutside.value) {\n    playbackVisible.value = false;\n    return;\n  }\n  allowClickOutside.value = playbackVisible.value;\n}\n</script>\n\n<style lang=\"less\">\n\n#speed-control {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 10px;\n  //margin-left: 10px;\n\n  #speed-buttons {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    gap: 10px;\n  }\n  \n  @media (orientation: landscape) {\n    // margin-left: 3rem;\n  }\n  \n  .icon-wrapper {\n    padding-inline: calc(0.3 * var(--default-line-height));\n    padding-block: calc(0.4 * var(--default-line-height));\n    border: 2px solid var(--accent-color);\n  }\n\n}\n\n#enclosing-playback-container.desktop-playback-control {\n  --tick-font-size: 12px;\n  margin-bottom: calc(2.5rem + 5px);\n  padding-right: 1rem;\n  \n}\n\n// account for the long 10000x text\n#enclosing-playback-container.inset {\n  padding-right: 1rem;\n}\n\n\n#inline-speed-control {\n  display: flex; \n  flex-grow: 0;\n  align-items: flex-end; \n  position: relative; \n  gap: 6px;\n\n#enclosing-playback-container.mobile-playback-control {\n    position: fixed;\n    width: calc(90% - 1rem);\n    left: calc(50% - 11px); // 9px is half the size close button\n    --off: 0; //calc(50%);\n    transform: translateX(-50%) translateY(var(--off)) !important;\n  }\n\n}\n\n\n#speed-text {\n  background-color: rgba(0, 0, 0, 0.5);\n  padding-inline: 0.4em;\n  border-radius: 0.3em;\n  font-size: calc(1 * var(--default-font-size));\n  text-wrap: nowrap;  \n  width: fit-content;\n  align-self: center;\n}\n\n</style>\n","import script from \"./SpeedControl.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SpeedControl.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./SpeedControl.vue?vue&type=style&index=0&id=5ec0f2a2&lang=less\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode } from \"vue\"\n\nconst _hoisted_1 = { class: \"td__container\" }\nconst _hoisted_2 = {\n  key: 0,\n  class: \"td__date\"\n}\nconst _hoisted_3 = { class: \"td__date_date\" }\nconst _hoisted_4 = {\n  key: 1,\n  class: \"td__time\"\n}\nconst _hoisted_5 = { class: \"td__time_time\" }\nconst _hoisted_6 = {\n  key: 2,\n  class: \"td__timezone\"\n}\nconst _hoisted_7 = { class: \"td__timezone_tz\" }\nconst _hoisted_8 = {\n  key: 3,\n  class: \"td__time\"\n}\nconst _hoisted_9 = { class: \"td__time_time\" }\n\nimport { computed } from 'vue';\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'TimeDisplay',\n  props: {\n  date: { type: Date, required: true },\n  ampm: { type: Boolean, default: false },\n  showDate: { type: Boolean, default: true, required: false },\n  showTimezone: { type: Boolean, default: true, required: false },\n  shortTimeDate: { type: Boolean, default: false, required: false },\n  timezone: { \n    type: String, \n    default: Intl.DateTimeFormat().resolvedOptions().timeZone, \n    required: false \n  }\n},\n  setup(__props) {\n\nconst props = __props;\n\nfunction pad(number: number, length: number = 2): string {\n  return String(number).padStart(length, '0');\n}\n\n\nconst hours = computed(() => {\n  if (props.ampm) {\n    const hour = props.date.getHours() % 12;\n    return hour === 0 ? 12 : hour;\n  } else {\n    return props.date.getHours();\n  }\n});\n\n\nconst ampm = computed(() => {\n  return props.date.getHours() >= 12 ? 'PM' : 'AM';\n});\n\nconst shortTimeDateString = computed(() => {\n  // return date formatted as Oct 3 9:00 AM\n  const month = props.date.toLocaleString('default', { month: 'short' });\n  const day = props.date.getDate();\n  const h = props.date.getHours() % 12;\n  const hour = h === 0 ? 12 : h;\n  const minute = pad(props.date.getMinutes());\n  const ampm = props.date.getHours() >= 12 ? 'PM' : 'AM';\n  const tz =  props.timezone;\n  return `${month} ${day} ${hour}:${minute} ${ampm}` + (props.showTimezone ? ` ${tz}` : '');\n});\n\n\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    (props.showDate && !props.shortTimeDate)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [\n          _createElementVNode(\"span\", _hoisted_3, _toDisplayString(props.date.toLocaleString('default', { month: 'long' })) + \" \" + _toDisplayString(pad(props.date.getDate())) + \", \" + _toDisplayString(props.date.getFullYear()), 1)\n        ]))\n      : _createCommentVNode(\"\", true),\n    (!props.shortTimeDate)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [\n          _createElementVNode(\"span\", _hoisted_5, _toDisplayString(pad(hours.value)) + \":\" + _toDisplayString(pad(props.date.getMinutes())) + \":\" + _toDisplayString(pad(props.date.getSeconds())) + \" \" + _toDisplayString(props.ampm ? ampm.value : ''), 1)\n        ]))\n      : _createCommentVNode(\"\", true),\n    (props.showTimezone && !props.shortTimeDate)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [\n          _createElementVNode(\"span\", _hoisted_7, _toDisplayString(props.timezone), 1)\n        ]))\n      : _createCommentVNode(\"\", true),\n    (props.shortTimeDate)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [\n          _createElementVNode(\"span\", _hoisted_9, _toDisplayString(shortTimeDateString.value), 1)\n        ]))\n      : _createCommentVNode(\"\", true)\n  ]))\n}\n}\n\n})","<template>\n    <div class=\"td__container\">\n      <div class=\"td__date\" v-if=\"props.showDate && !props.shortTimeDate\">\n        <span class=\"td__date_date\">\n          {{ props.date.toLocaleString('default', { month: 'long' }) }} {{ pad(props.date.getDate()) }}, {{ props.date.getFullYear() }}\n        </span>\n      </div>\n      <div class=\"td__time\" v-if=\"!props.shortTimeDate\">\n        <span class=\"td__time_time\">{{ pad(hours) }}:{{ pad(props.date.getMinutes()) }}:{{ pad(props.date.getSeconds()) }} {{ props.ampm ? ampm : '' }}</span>\n      </div>\n      <div class=\"td__timezone\" v-if=\"props.showTimezone && !props.shortTimeDate\">\n        <span class=\"td__timezone_tz\">{{ props.timezone }}</span>\n      </div>\n      <div class=\"td__time\" v-if=\"props.shortTimeDate\"> \n        <span class=\"td__time_time\">{{ shortTimeDateString }}</span>\n      </div>\n      \n   </div>  \n</template>\n\n\n\n<script setup lang=\"ts\">\nimport { computed, defineProps } from 'vue';\n\nconst props = defineProps({\n  date: { type: Date, required: true },\n  ampm: { type: Boolean, default: false },\n  showDate: { type: Boolean, default: true, required: false },\n  showTimezone: { type: Boolean, default: true, required: false },\n  shortTimeDate: { type: Boolean, default: false, required: false },\n  timezone: { \n    type: String, \n    default: Intl.DateTimeFormat().resolvedOptions().timeZone, \n    required: false \n  }\n}\n);\n\nfunction pad(number: number, length: number = 2): string {\n  return String(number).padStart(length, '0');\n}\n\n\nconst hours = computed(() => {\n  if (props.ampm) {\n    const hour = props.date.getHours() % 12;\n    return hour === 0 ? 12 : hour;\n  } else {\n    return props.date.getHours();\n  }\n});\n\n\nconst ampm = computed(() => {\n  return props.date.getHours() >= 12 ? 'PM' : 'AM';\n});\n\nconst shortTimeDateString = computed(() => {\n  // return date formatted as Oct 3 9:00 AM\n  const month = props.date.toLocaleString('default', { month: 'short' });\n  const day = props.date.getDate();\n  const h = props.date.getHours() % 12;\n  const hour = h === 0 ? 12 : h;\n  const minute = pad(props.date.getMinutes());\n  const ampm = props.date.getHours() >= 12 ? 'PM' : 'AM';\n  const tz =  props.timezone;\n  return `${month} ${day} ${hour}:${minute} ${ampm}` + (props.showTimezone ? ` ${tz}` : '');\n});\n\n\n</script>\n\n<style>\n\n.td__container {\n  margin: 1em;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  color: currentColor;\n}\n\n.td__container > div > span {\n  -webkit-user-select: none; /* Safari */\n  -ms-user-select: none; /* IE 10 and IE 11 */\n  user-select: none; /* Standard syntax */\n}\n\n.td__time {\n  width: max-content;\n}\n\n.td__time_time {\n  font-size: 1em;\n  color: inherit;\n  text-align: center;\n  text-wrap: nowrap;\n  width: fit-content;\n}\n\n.td__date {\n  width: max-content;\n}\n\n.td__date_date {\n  font-size: 0.75em;\n  color: inherit;\n  text-align: center;\n  text-wrap: nowrap;\n  width: fit-content;\n}\n\n.td__timezone {\n  width: max-content;\n}\n\n.td__timezone_tz {\n  font-size: 0.75em;\n  color: inherit;\n  text-align: center;\n  text-wrap: nowrap;\n  width: fit-content;\n}\n\n</style>","import script from \"./TimeDisplay.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./TimeDisplay.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./TimeDisplay.vue?vue&type=style&index=0&id=c41cd87c&lang=css\"\n\nconst __exports__ = script;\n\nexport default __exports__","import Vue, { createApp, type Plugin } from \"vue\";\n\nimport { CreditLogos, FundingAcknowledgement, GeolocationButton, IconButton, LocationSelector } from \"@cosmicds/vue-toolkit\";\nimport PlanetParade from \"./PlanetParade.vue\";\n\nimport vuetify from \"../plugins/vuetify\";\n\nimport { FontAwesomeIcon } from \"@fortawesome/vue-fontawesome\";\n\nimport { WWTComponent, wwtPinia } from \"@wwtelescope/engine-pinia\";\n\nimport DateTimePicker from \"./components/DateTimePicker.vue\";\nimport LocationSearch from \"./components/LocationSearch.vue\";\nimport PlaybackControl from './components/PlaybackControl.vue';\nimport SpeedControl from \"./components/SpeedControl.vue\";\nimport TimeDisplay from \"./components/TimeDisplay.vue\";\n\n\nimport { library } from \"@fortawesome/fontawesome-svg-core\";\nimport {\n  faBookOpen,\n  faChevronDown,\n  faCircleXmark,\n  faGear,\n  faLocationDot,\n  faMagnifyingGlass,\n  faPlay,\n  faPause,\n  faTimes,\n  faVideo,\n  faXmark,\n  faGaugeHigh,\n  faAnglesLeft,\n  faAnglesRight,\n  faAnglesUp,\n  faAnglesDown,\n  faRotate,\n} from \"@fortawesome/free-solid-svg-icons\";\n\nlibrary.add(faBookOpen);\nlibrary.add(faChevronDown);\nlibrary.add(faCircleXmark);\nlibrary.add(faGear);\nlibrary.add(faLocationDot);\nlibrary.add(faMagnifyingGlass);\nlibrary.add(faPlay);\nlibrary.add(faPause);\nlibrary.add(faTimes);\nlibrary.add(faVideo);\nlibrary.add(faXmark);\nlibrary.add(faGaugeHigh);\nlibrary.add(faAnglesLeft);\nlibrary.add(faAnglesRight);\nlibrary.add(faAnglesUp);\nlibrary.add(faAnglesDown);\nlibrary.add(faRotate);\n\n/** v-hide directive taken from https://www.ryansouthgate.com/2020/01/30/vue-js-v-hide-element-whilst-keeping-occupied-space/ */\n// Extract the function out, up here, so I'm not writing it twice\nconst update = (el: HTMLElement, binding: Vue.DirectiveBinding) => el.style.visibility = (binding.value) ? \"hidden\" : \"\";\n\ncreateApp(PlanetParade, {\n  wwtNamespace: \"planet-parade\"\n})\n \n  // Plugins\n  .use(wwtPinia as unknown as Plugin<[]>)\n  .use(vuetify)\n\n  // Directives\n  .directive(\n    /**\n    * Hides an HTML element, keeping the space it would have used if it were visible (css: Visibility)\n    */\n    \"hide\", {\n      // Run on initialisation (first render) of the directive on the element\n      beforeMount(el, binding, _vnode, _prevVnode) {\n        update(el, binding);\n      },\n      // Run on subsequent updates to the value supplied to the directive\n      updated(el, binding, _vnode, _prevVnode) {\n        update(el, binding);\n      }\n    })\n\n  // Components\n  .component(\"WorldWideTelescope\", WWTComponent)\n  .component('font-awesome-icon', FontAwesomeIcon)\n  .component('credit-logos', CreditLogos)\n  .component('funding-acknowledgement', FundingAcknowledgement)\n  .component('geolocation-button', GeolocationButton)\n  .component('icon-button', IconButton)\n  .component('location-selector', LocationSelector)\n  .component('location-search', LocationSearch)\n  .component('time-display', TimeDisplay)\n  .component('date-time-picker', DateTimePicker)\n  .component('speed-control', SpeedControl)\n  .component('playback-control', PlaybackControl)\n\n  // Mount\n  .mount(\"#app\");\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunk_cosmicds_planet_parade\"] = self[\"webpackChunk_cosmicds_planet_parade\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], () => (__webpack_require__(8867)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["useTimezone","selectedLocation","selectedTimezone","value","latitudeDeg","longitudeDeg","selectedTimezoneOffset","shortTimezone","Date","browserTimezone","Intl","DateTimeFormat","resolvedOptions","timeZone","browserTimezoneOffset","getTimezoneOffset","console","log","altAzToHADec","altRad","azRad","latRad","Math","PI","ra","atan2","sin","cos","tan","dec","asin","getJulian","utc","year","getUTCFullYear","month","getUTCMonth","day","getUTCDate","hour","getUTCHours","minute","getUTCMinutes","second","getUTCSeconds","getUTCMilliseconds","a","floor","b","c","d","jd","mstFromUTC2","longRad","lng","R2D","modifiedJD","julianCenturies","mst","horizontalToEquatorial","st","haDec","ha","raRad","D2R","decRad","equatorialToHorizontal","hourAngle","lat","sinAlt","altitude","cosAz","azimuth","acos","skyOpacityForSunAlt","sunAltRad","civilTwilight","astronomicalTwilight","min","max","atan","sunPlace","Place","set_names","set_classification","solarSystem","set_target","sun","set_zoomLevel","drawHorizon","renderContext","options","n","delta","triangleList","color","Color","load","round","opacity","settings","Settings","get_active","longitudeRad","get_locationLng","latitudeRad","get_locationLat","now","SpaceTimeController","get_now","i","points","map","point","raDecRad","Coordinates","raDecTo3d","addSubdividedTriangles","draw","drawSky","sunAltAz","get_RA","get_dec","WWTControl","scriptInterface","setForegroundOpacity","nameForObject","object","name","charAt","toUpperCase","slice","placeForObject","place","maxFOV","minFOV","maxFactor","minFactor","gMax","gMin","planetTextOffsetsY","planetTextOffsetsX","textOverlayForSolarSystemObject","text","glyphHeight","zoom","viewCamera","fov","exp","scale","sign","get_location","get_lat","up","Vector3d","create","location","y","x","Text3d","makeTextOverlays","batch","Text3dBatch","values","Object","keys","filter","key","isNaN","Number","forEach","moon","add","resetAltAzGridText","Grids","_altAzTextBatch","makeAltAzGridText","alt","directions","v","useCustomGlyphs","GLYPH_CACHE","cache","GlyphCache","origin","window","endsWith","length","imageUrl","xmlUrl","_texture","Texture","fromUrl","_webFile","WebFile","onStateChange","prototype","_glyphXmlReady","bind","send","_glyphCache","prepareBatch","drawPlanets","_opacity","Planets","_planetTextures","_loadPlanetTextures","elong","_geocentricElongation","_planetLocations","RA","raDif","_phaseAngle","distance","dista","abs","degreesToRadians","distb","sunMoonDist","sqrt","coronaOpacity","moonEffect","_planetScales","_drawPlanet","_planetDrawOrder","planetId","renderOneFrame","showHorizon","showSky","showPlanetLabels","this","get_backgroundImageset","renderType","get_dataSetType","sizeChange","canvas","width","parentNode","clientWidth","height","clientHeight","explorer","refresh","_crossHairs","Tile","lastDeepestLevel","deepestLevel","RenderTriangle","tilesInView","tilesTouched","set_metaNow","get__mover","set_now","get_currentDateTime","updatePlanetLocations","get_solarSystemMode","newCam","get_currentPosition","targetCamera","copy","space","get_galacticMode","gPoint","j2000toGalactic","targetAlt","targetAz","az","get_localHorizonMode","currentAltAz","equitorialToHorizon","fromRaDec","get_alt","get_az","get_complete","_fireArrived","singleton","set__mover","_notifyMoveComplete","updateClock","_updateViewParameters","clear","setupMatricesSpace3d","drawImageSet","get_foregroundImageset","set_foregroundImageset","gl","_foregroundCanvas","saveDevice","device","_fgDevice","clearRect","save","globalAlpha","drawImage","restore","uiController","render","Annotation","prepBatch","_annotations","item","drawBatch","_lastMouseMove","raDecDown","getCoordinatesForScreenPoint","_hoverTextPoint","_annotationHover","_hoverText","_drawHoverText","imageset","get_catalogHipsImagesets","get_hipsProperties","get_catalogSpreadSheetLayer","enabled","lastVersion","get_version","constellation","Constellations","containment","findConstellationForPoint","_drawSkyOverlays","_planetTextOverlays","viewTransform","fromArgb","worldSave","get_world","viewSave","get_view","projSave","get_projection","get_current","get_showCrosshairs","_drawCrosshairs","tilesAllLoaded","TileCache","get_queueCount","setupMatricesOverlays","_fadeFrame","_frameCount","decimateQueue","processQueue","currentRenderGeneration","TourPlayer","get_playing","set_crossFadeFrame","set_world","set_view","set_projection","ms","_lastUpdate","trianglesRendered","trianglesCulled","capturingVideo","dumpFrameParams","waitDownload","captureFrameForVideo","_videoBlobReady","format","nextFrame","get_doneDumping","frameDumping","cancelFrameDump","drawEcliptic","drawColor","drawCircle","_eclipticOverviewLineList","_eclipticYear","obliquity","meanObliquityOfEcliptic","get_jNow","mat","Matrix3d","_rotationX","daysPerYear","DT","isLeap","_monthDays","_eclipticCount","jYear","utcToJulian","dPrev","dStart","SimpleLineList","set_depthBuffered","m","daysThisMonth","sunRaDec","getPlanetLocationJD","sunEcliptic","CT","eq2Ec","dd","addLine","_transformCoordinate","drawLines","drawSkyOverlays","get_showConstellationPictures","freestandingMode","drawArtwork","get_showConstellationFigures","constellationsFigures","URLHelpers","engineAssetUrl","get_showEclipticGrid","drawEclipticGrid","get_eclipticGridColor","get_showEclipticGridText","drawEclipticGridText","get_showGalacticGrid","drawGalacticGrid","get_galacticGridColor","get_showGalacticGridText","drawGalacticGridText","get_showAltAzGrid","drawAltAzGrid","get_altAzGridColor","get_showAltAzGridText","drawAltAzGridText","get_showPrecessionChart","drawPrecessionChart","get_precessionChartColor","get_showEcliptic","get_eclipticColor","get_showEclipticOverviewText","drawEclipticText","get_showGrid","drawEquitorialGrid","get_equatorialGridColor","get_showEquatorialGridText","drawEquitorialGridText","get_showConstellationBoundries","constellationsBoundries","get_showConstellationSelection","get_showConstellationLabels","drawConstellationNames","Colors","get_yellow","SECONDS_PER_DAY","MILLISECONDS_PER_DAY","secondsInterval","MILLISECONDS_PER_INTERVAL","useSun","store","_selectedTime","_selectedTimezoneOffset","waitForReady","then","selectedTime","locationRad","sunPosition","getSunPositionAtTime","time","getTimeforSunAlt","altDeg","minTime","maxTime","sunAlt","rising","setting","_hoisted_1","id","_hoisted_2","class","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","style","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","UUID_KEY","OPT_OUT_KEY","SKIP_INTRO_CONTENT_KEY","__name","props","wwtNamespace","default","setup","__props","STORY_DATA_URL","API_BASE_URL","maybeUUID","localStorage","getItem","storedOptOut","skipIntroContent","toLowerCase","existingUser","uuid","v4","setItem","infoTimeMs","videoPlayingTimeMs","videoPlaying","videoOpened","videoPlayed","appStartTimestamp","infoStartTimestamp","videoPlayingStartTimestamp","userSelectedSearchLocations","userSelectedMapLocations","engineStore","useWWTKeyboardControls","touchscreen","supportsTouchscreen","smAndDown","smAndUp","xs","queryHideSplash","URLSearchParams","search","get","splash","showSplashScreen","backgroundImagesets","sheet","layersLoaded","positionSet","accentColor","accentColor2","buttonColor","tab","showAltAzGrid","showEcliptic","showLocationSelector","playing","showControls","showConstellations","inIntro","showPrivacyDialog","datePickerOpen","skipIntroChecked","optOut","responseOptOut","geocodingOptions","access_token","selectedLocationText","updateSelectedLocationText","searchErrorMessage","localSelectedDate","fakeUTC","set","getTime","newTime","wwtSettings","doWWTModifications","_makeAltAzGridText","boundRenderOneFrame","newFrameRender","originalUpdatePlanetLocations","planetScales","newUpdatePlanetLocations","threeD","set_zoomMax","skyBackgroundImagesets","iset","push","altTime","setTimeout","resetCamera","applySetting","updateAltAzGrid","updateAltAzGridText","updateEcliptic","updateConstellations","updateWWTLocation","setClockSync","setClockRate","createUserEntry","setInterval","currentTime","updateEclipticColor","addEventListener","event","includes","showVideoSheet","document","visibilityState","updateUserData","resetData","ready","isLoading","inNorthernHemisphere","dateTime","smallSize","mobile","xSmallSize","cssVars","showTextSheet","_value","selectSheet","video","querySelector","_event","pause","closeSplashScreen","sheetType","blurActiveElement","getTextForLocation","setLocationFromFeature","feature","center","catch","_err","setLocationFromSearchFeature","searchProvider","updateLocationFromMap","fetch","method","headers","response","json","content","exists","status","undefined","user_uuid","body","JSON","stringify","user_selected_search_locations","user_selected_map_locations","app_time_ms","info_time_ms","video_time_ms","video_opened","video_played","infoTime","videoTime","delta_app_time_ms","delta_info_time_ms","delta_video_time_ms","keepalive","Promise","lonRad","sunAz","startAlt","startRADec","gotoRADecZoom","zoomDeg","instant","set_locationLat","set_locationLng","show","component","play","dt","setTime","checked","String","_inNorth","intro","_ctx","_cache","_component_WorldWideTelescope","_component_font_awesome_icon","_component_credit_logos","_component_icon_button","_component_geolocation_button","_component_location_search","_component_location_selector","_component_time_display","_component_date_time_picker","_component_speed_control","_component_funding_acknowledgement","absolute","onClick","onKeyup","icon","tabindex","density","size","variant","rounded","_","href","target","rel","modelValue","$event","label","transition","elevation","onGeolocation","longitude","latitude","small","onSetLocation","onError","activator","scrim","date","ampm","timezone","ref","defaultRate","useInline","maxSpeed","onReset","onActivate","mdSize","fullscreen","controls","src","type","persistent","dense","align","cols","outlined","__exports__","icons","defaultSet","aliases","sets","mdi","locale","fallback","messages","en","theme","defaultTheme","editable","Boolean","step","clamp","zeroPad","pad2","emits","psuedoValue","editing","input","pad","toString","padStart","parseValue","parseFloat","parseInt","minValue","maxValue","stepValue","setValue","blurred","toNearest","isValid","clampValue","newVal","focus","newValue","oldValue","onChange","onBlur","ref_key","debug","useAmpm","editableTime","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","isAm","decrement","increment","limits","Infinity","_daysInMonth","units","changeValue","unit","limit","nextUnit","indexOf","prevUnit","displayHour","h","utcDate","toISOString","TapToInput","$slots","Function","_searchText","stayOpen","buttonSize","bgColor","__emit","emit","searchOpen","searchItem","searchResults","locationJustUpdated","menuOpen","comboFocused","searchInput","cssStyles","itemText","performForwardGeocodingSearch","info","features","focusCombobox","blurCombobox","blur","toggleSearch","onFocusChange","focused","timedJustUpdatedLocation","clearSearchData","items","solo","onInput","onKeydown","menu","append","$props","$setup","$data","$options","inline","inlineButton","showCloseButton","$emit","hidePlayButton","isPaused","reverseTime","index","val","valueToMark","useBuiltInTicks","ticks","marks","base","logBase","log10","log2","E","sequence","rightSide","Array","fill","leftSide","reverse","seq","concat","fromSymLogIndex","inverseTransform","isArray","out","absValue","pow","transform","toSymlogIndex","makeSymmetric","right","left","linspace","start","stop","symmLinspace","symLog","SymmetricalLogTransform","components","VSlider","maxPower","paused","smallScreen","mounted","container","getElementById","setProperty","resizeObserver","ResizeObserver","entries","track","tickContainer","psc","s","scrollWidth","classList","remove","observe","data","symlog","myTicks","methods","pre","pos","computed","rt","usePlaybackControl","clockRate","timePlaying","togglePlay","setSpeed","rate","newRate","newIsPlaying","minSpeed","showText","rateDelta","required","useOldControl","playbackVisible","forceRate","playbackRate","reverseRate","increaseRate","decreaseRate","reverseOrIncreaseReversePlaybackRate","ezrate","forwardOrIncreaseForwardPlaybackRate","allowClickOutside","onClickOutside","_component_playback_control","faSize","offset","onPaused","onClose","showDate","showTimezone","shortTimeDate","number","hours","shortTimeDateString","toLocaleString","tz","update","el","binding","visibility","PlanetParade","use","wwtPinia","vuetify","directive","beforeMount","_vnode","_prevVnode","updated","WWTComponent","CreditLogos","FundingAcknowledgement","GeolocationButton","IconButton","LocationSelector","LocationSearch","TimeDisplay","DateTimePicker","SpeedControl","PlaybackControl","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","deferred","O","result","chunkIds","fn","priority","notFulfilled","fulfilled","j","every","splice","r","getter","__esModule","definition","o","defineProperty","enumerable","g","globalThis","e","obj","prop","hasOwnProperty","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","__webpack_exports__"],"sourceRoot":""}